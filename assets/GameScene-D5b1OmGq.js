import{r as Ps,g as av,R as ot,a as $,j as We,_ as Sm}from"./index-M5bl4g1S.js";import{W as lv,R as rv,O as iv,P as Em,S as Is,a as is,V as bm,b as _m,B as Tm,L as Ro,c as ks,N as Mm,A as Cm,d as Wf,C as Fr,e as wr,U as Do,f as rt,g as Br,h as Um,i as Am,T as xm,j as Rm,k as Oo,M as Il,I as Dm,l as Fo,D as Lo,m as ov,H as sa,F as Xa,n as Nr,o as ca,p as Om,q as Nm,r as uv,Q as ml,E as Js,s as zm,t as wm,u as Bm,v as Gm,w as jm,x as Hm,y as Fm,z as Lm,G as sv,J as Vm,K as Ym,X as cv,Y as qm,Z as Xl,_ as Xm,$ as $f,a0 as Lr,a1 as vl,a2 as fv,a3 as No,a4 as Zm,a5 as Qm,a6 as Km,a7 as Pm,a8 as Im,a9 as To,aa as km,ab as Jm,ac as ed,ad as Wm,ae as $m,af as e0,ag as t0,ah as n0}from"./vendor-three-BLiiJV4E.js";import{Vector3 as os,EventQueue as a0,RigidBodyDesc as l0,ColliderDesc as r0,ActiveEvents as po}from"./vendor-rapier-BodjHcp2.js";var us={exports:{}},Ya={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td;function i0(){return td||(td=1,Ya.ConcurrentRoot=1,Ya.ContinuousEventPriority=8,Ya.DefaultEventPriority=32,Ya.DiscreteEventPriority=2,Ya.IdleEventPriority=268435456,Ya.LegacyRoot=0,Ya.NoEventPriority=0),Ya}var nd;function o0(){return nd||(nd=1,us.exports=i0()),us.exports}var Mo=o0(),ss={exports:{}},cs={},fs={exports:{}},ds={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad;function u0(){if(ad)return ds;ad=1;var i=Ps();function n(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var s=typeof Object.is=="function"?Object.is:n,h=i.useState,r=i.useEffect,l=i.useLayoutEffect,c=i.useDebugValue;function f(g,y){var E=y(),T=h({inst:{value:E,getSnapshot:y}}),x=T[0].inst,U=T[1];return l(function(){x.value=E,x.getSnapshot=y,u(x)&&U({inst:x})},[g,E,y]),r(function(){return u(x)&&U({inst:x}),g(function(){u(x)&&U({inst:x})})},[g]),c(E),E}function u(g){var y=g.getSnapshot;g=g.value;try{var E=y();return!s(g,E)}catch{return!0}}function v(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:f;return ds.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:p,ds}var ld;function s0(){return ld||(ld=1,fs.exports=u0()),fs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd;function c0(){if(rd)return cs;rd=1;var i=Ps(),n=s0();function s(v,p){return v===p&&(v!==0||1/v===1/p)||v!==v&&p!==p}var h=typeof Object.is=="function"?Object.is:s,r=n.useSyncExternalStore,l=i.useRef,c=i.useEffect,f=i.useMemo,u=i.useDebugValue;return cs.useSyncExternalStoreWithSelector=function(v,p,g,y,E){var T=l(null);if(T.current===null){var x={hasValue:!1,value:null};T.current=x}else x=T.current;T=f(function(){function A(G){if(!M){if(M=!0,z=G,G=y(G),E!==void 0&&x.hasValue){var V=x.value;if(E(V,G))return N=V}return N=G}if(V=N,h(z,G))return V;var D=y(G);return E!==void 0&&E(V,D)?(z=G,V):(z=G,N=D)}var M=!1,z,N,O=g===void 0?null:g;return[function(){return A(p())},O===null?void 0:function(){return A(O())}]},[p,g,y,E]);var U=r(v,T[0],T[1]);return c(function(){x.hasValue=!0,x.value=U},[U]),u(U),U},cs}var id;function f0(){return id||(id=1,ss.exports=c0()),ss.exports}var d0=f0();const v0=av(d0),od=i=>{let n;const s=new Set,h=(v,p)=>{const g=typeof v=="function"?v(n):v;if(!Object.is(g,n)){const y=n;n=p??(typeof g!="object"||g===null)?g:Object.assign({},n,g),s.forEach(E=>E(n,y))}},r=()=>n,f={setState:h,getState:r,getInitialState:()=>u,subscribe:v=>(s.add(v),()=>s.delete(v))},u=n=i(h,r,f);return f},h0=i=>i?od(i):od,{useSyncExternalStoreWithSelector:p0}=v0,m0=i=>i;function g0(i,n=m0,s){const h=p0(i.subscribe,i.getState,i.getInitialState,n,s);return ot.useDebugValue(h),h}const ud=(i,n)=>{const s=h0(i),h=(r,l=n)=>g0(s,r,l);return Object.assign(h,s),h},dv=(i,n)=>i?ud(i,n):ud;var vs={exports:{}},hs={exports:{}},ps={exports:{}},ms={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd;function y0(){return sd||(sd=1,function(i){function n(C,k){var ee=C.length;C.push(k);e:for(;0<ee;){var Z=ee-1>>>1,Y=C[Z];if(0<r(Y,k))C[Z]=k,C[ee]=Y,ee=Z;else break e}}function s(C){return C.length===0?null:C[0]}function h(C){if(C.length===0)return null;var k=C[0],ee=C.pop();if(ee!==k){C[0]=ee;e:for(var Z=0,Y=C.length,R=Y>>>1;Z<R;){var j=2*(Z+1)-1,I=C[j],Q=j+1,W=C[Q];if(0>r(I,ee))Q<Y&&0>r(W,I)?(C[Z]=W,C[Q]=ee,Z=Q):(C[Z]=I,C[j]=ee,Z=j);else if(Q<Y&&0>r(W,ee))C[Z]=W,C[Q]=ee,Z=Q;else break e}}return k}function r(C,k){var ee=C.sortIndex-k.sortIndex;return ee!==0?ee:C.id-k.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var u=[],v=[],p=1,g=null,y=3,E=!1,T=!1,x=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function z(C){for(var k=s(v);k!==null;){if(k.callback===null)h(v);else if(k.startTime<=C)h(v),k.sortIndex=k.expirationTime,n(u,k);else break;k=s(v)}}function N(C){if(x=!1,z(C),!T)if(s(u)!==null)T=!0,F();else{var k=s(v);k!==null&&ce(N,k.startTime-C)}}var O=!1,G=-1,V=5,D=-1;function L(){return!(i.unstable_now()-D<V)}function q(){if(O){var C=i.unstable_now();D=C;var k=!0;try{e:{T=!1,x&&(x=!1,A(G),G=-1),E=!0;var ee=y;try{t:{for(z(C),g=s(u);g!==null&&!(g.expirationTime>C&&L());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,y=g.priorityLevel;var Y=Z(g.expirationTime<=C);if(C=i.unstable_now(),typeof Y=="function"){g.callback=Y,z(C),k=!0;break t}g===s(u)&&h(u),z(C)}else h(u);g=s(u)}if(g!==null)k=!0;else{var R=s(v);R!==null&&ce(N,R.startTime-C),k=!1}}break e}finally{g=null,y=ee,E=!1}k=void 0}}finally{k?ie():O=!1}}}var ie;if(typeof M=="function")ie=function(){M(q)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,X=w.port2;w.port1.onmessage=q,ie=function(){X.postMessage(null)}}else ie=function(){U(q,0)};function F(){O||(O=!0,ie())}function ce(C,k){G=U(function(){C(i.unstable_now())},k)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(C){C.callback=null},i.unstable_continueExecution=function(){T||E||(T=!0,F())},i.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<C?Math.floor(1e3/C):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return s(u)},i.unstable_next=function(C){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var ee=y;y=k;try{return C()}finally{y=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(C,k){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var ee=y;y=C;try{return k()}finally{y=ee}},i.unstable_scheduleCallback=function(C,k,ee){var Z=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Z+ee:Z):ee=Z,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,C={id:p++,callback:k,priorityLevel:C,startTime:ee,expirationTime:Y,sortIndex:-1},ee>Z?(C.sortIndex=ee,n(v,C),s(u)===null&&C===s(v)&&(x?(A(G),G=-1):x=!0,ce(N,ee-Z))):(C.sortIndex=Y,n(u,C),T||E||(T=!0,F())),C},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(C){var k=y;return function(){var ee=y;y=k;try{return C.apply(this,arguments)}finally{y=ee}}}}(ms)),ms}var cd;function S0(){return cd||(cd=1,ps.exports=y0()),ps.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd;function E0(){return fd||(fd=1,function(i){i.exports=function(n){function s(e,t,a,o){return new Gh(e,t,a,o)}function h(){}function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return e===null||typeof e!="object"?null:(e=yf&&e[yf]||e["@@iterator"],typeof e=="function"?e:null)}function c(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Yh?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case or:return"Fragment";case ir:return"Portal";case Au:return"Profiler";case pf:return"StrictMode";case Ru:return"Suspense";case Du:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case el:return(e.displayName||"Context")+".Provider";case mf:return(e._context.displayName||"Context")+".Consumer";case xu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ou:return t=e.displayName||null,t!==null?t:c(e.type)||"Memo";case tl:t=e._payload,e=e._init;try{return c(e(t))}catch{}}return null}function f(e){if(Nu===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Nu=t&&t[1]||"",Sf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nu+e+Sf}function u(e,t){if(!e||zu)return"";zu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(st){var ze=st}Reflect.construct(e,[],Oe)}else{try{Oe.call()}catch(st){ze=st}e.call(Oe.prototype)}}else{try{throw Error()}catch(st){ze=st}(Oe=e())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(st){if(st&&ze&&typeof st.stack=="string")return[st.stack,ze.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),b=m[0],B=m[1];if(b&&B){var J=b.split(`
`),de=B.split(`
`);for(d=o=0;o<J.length&&!J[o].includes("DetermineComponentFrameRoot");)o++;for(;d<de.length&&!de[d].includes("DetermineComponentFrameRoot");)d++;if(o===J.length||d===de.length)for(o=J.length-1,d=de.length-1;1<=o&&0<=d&&J[o]!==de[d];)d--;for(;1<=o&&0<=d;o--,d--)if(J[o]!==de[d]){if(o!==1||d!==1)do if(o--,d--,0>d||J[o]!==de[d]){var Me=`
`+J[o].replace(" at new "," at ");return e.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",e.displayName)),Me}while(1<=o&&0<=d);break}}}finally{zu=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?f(a):""}function v(e){switch(e.tag){case 26:case 27:case 5:return f(e.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 15:return e=u(e.type,!1),e;case 11:return e=u(e.type.render,!1),e;case 1:return e=u(e.type,!0),e;default:return""}}function p(e){try{var t="";do t+=v(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function g(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function y(e){if(g(e)!==e)throw Error(r(188))}function E(e){var t=e.alternate;if(!t){if(t=g(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,o=t;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return y(d),e;if(m===o)return y(d),t;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=d,o=m;else{for(var b=!1,B=d.child;B;){if(B===a){b=!0,a=d,o=m;break}if(B===o){b=!0,o=d,a=m;break}B=B.sibling}if(!b){for(B=m.child;B;){if(B===a){b=!0,a=m,o=d;break}if(B===o){b=!0,o=m,a=d;break}B=B.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=x(e),t!==null))return t;e=e.sibling}return null}function U(e){return{current:e}}function A(e){0>sr||(e.current=Fu[sr],Fu[sr]=null,sr--)}function M(e,t){sr++,Fu[sr]=e.current,e.current=t}function z(e){return e>>>=0,e===0?32:31-(am(e)/lm|0)|0}function N(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function O(e,t){var a=e.pendingLanes;if(a===0)return 0;var o=0,d=e.suspendedLanes,m=e.pingedLanes,b=e.warmLanes;e=e.finishedLanes!==0;var B=a&134217727;return B!==0?(a=B&~d,a!==0?o=N(a):(m&=B,m!==0?o=N(m):e||(b=B&~b,b!==0&&(o=N(b))))):(B=a&~d,B!==0?o=N(B):m!==0?o=N(m):e||(b=a&~b,b!==0&&(o=N(b)))),o===0?0:t!==0&&t!==o&&(t&d)===0&&(d=o&-o,b=t&-t,d>=b||d===32&&(b&4194176)!==0)?t:o}function G(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function V(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(){var e=Pi;return Pi<<=1,(Pi&4194176)===0&&(Pi=128),e}function L(){var e=Ii;return Ii<<=1,(Ii&62914560)===0&&(Ii=4194304),e}function q(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ie(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function w(e,t,a,o,d,m){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var B=e.entanglements,J=e.expirationTimes,de=e.hiddenUpdates;for(a=b&~a;0<a;){var Me=31-Zn(a),Oe=1<<Me;B[Me]=0,J[Me]=-1;var ze=de[Me];if(ze!==null)for(de[Me]=null,Me=0;Me<ze.length;Me++){var st=ze[Me];st!==null&&(st.lane&=-536870913)}a&=~Oe}o!==0&&X(e,o,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(b&~t))}function X(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Zn(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194218}function F(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var o=31-Zn(a),d=1<<o;d&t|e[o]&t&&(e[o]|=t),a&=~d}}function ce(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function C(e){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(ui,e,void 0,(e.current.flags&128)===128)}catch{}}function k(e){if(typeof sm=="function"&&cm(e),Qn&&typeof Qn.setStrictMode=="function")try{Qn.setStrictMode(ui,e)}catch{}}function ee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function Z(e,t){if(typeof e=="object"&&e!==null){var a=Zf.get(e);return a!==void 0?a:(t={value:e,source:t,stack:p(t)},Zf.set(e,t),t)}return{value:e,source:t,stack:p(t)}}function Y(e,t){fr[dr++]=Wi,fr[dr++]=Ji,Ji=e,Wi=t}function R(e,t,a){na[aa++]=Ga,na[aa++]=ja,na[aa++]=zl,zl=e;var o=Ga;e=ja;var d=32-Zn(o)-1;o&=~(1<<d),a+=1;var m=32-Zn(t)+d;if(30<m){var b=d-d%5;m=(o&(1<<b)-1).toString(32),o>>=b,d-=b,Ga=1<<32-Zn(t)+d|a<<d|o,ja=m+e}else Ga=1<<m|a<<d|o,ja=e}function j(e){e.return!==null&&(Y(e,1),R(e,1,0))}function I(e){for(;e===Ji;)Ji=fr[--dr],fr[dr]=null,Wi=fr[--dr],fr[dr]=null;for(;e===zl;)zl=na[--aa],na[aa]=null,ja=na[--aa],na[aa]=null,Ga=na[--aa],na[aa]=null}function Q(e,t){M(al,t),M(si,e),M(_n,null),e=Zh(t),A(_n),M(_n,e)}function W(){A(_n),A(si),A(al)}function K(e){e.memoizedState!==null&&M($i,e);var t=_n.current,a=Qh(t,e.type);t!==a&&(M(si,e),M(_n,a))}function ae(e){si.current===e&&(A(_n),A(si)),$i.current===e&&(A($i),Ba?Nl._currentValue=ur:Nl._currentValue2=ur)}function se(e){var t=Error(r(418,""));throw Xe(Z(t,e)),Yu}function pe(e,t){if(!ea)throw Error(r(175));Fp(e.stateNode,e.type,e.memoizedProps,t,e)||se(e)}function Ce(e){for(zn=e.return;zn;)switch(zn.tag){case 3:case 27:Ea=!0;return;case 5:case 13:Ea=!1;return;default:zn=zn.return}}function me(e){if(!ea||e!==zn)return!1;if(!At)return Ce(e),At=!0,!1;var t=!1;if(Rn?e.tag!==3&&e.tag!==27&&(e.tag!==5||wf(e.type)&&!Ki(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||wf(e.type)&&!Ki(e.type,e.memoizedProps))&&(t=!0),t&&Dn&&se(e),Ce(e),e.tag===13){if(!ea)throw Error(r(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Dn=Yp(e)}else Dn=zn?Nf(e.stateNode):null;return!0}function ve(){ea&&(Dn=zn=null,At=!1)}function Xe(e){pa===null?pa=[e]:pa.push(e)}function Be(){for(var e=vr,t=qu=vr=0;t<e;){var a=la[t];la[t++]=null;var o=la[t];la[t++]=null;var d=la[t];la[t++]=null;var m=la[t];if(la[t++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}m!==0&&Ee(a,d,m)}}function Ue(e,t,a,o){la[vr++]=e,la[vr++]=t,la[vr++]=a,la[vr++]=o,qu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Re(e,t,a,o){return Ue(e,t,a,o),we(e)}function Ne(e,t){return Ue(e,null,null,t),we(e)}function Ee(e,t,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;d&&t!==null&&e.tag===3&&(m=e.stateNode,d=31-Zn(a),m=m.hiddenUpdates,e=m[d],e===null?m[d]=[t]:e.push(t),t.lane=a|536870912)}function we(e){if(50<yi)throw yi=0,rs=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function xe(e){e!==hr&&e.next===null&&(hr===null?eo=hr=e:hr=hr.next=e),to=!0,Xu||(Xu=!0,dt(Ie))}function he(e,t){if(!Zu&&to){Zu=!0;do for(var a=!1,o=eo;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var b=o.suspendedLanes,B=o.pingedLanes;m=(1<<31-Zn(42|e)+1)-1,m&=d&~(b&~B),m=m&201326677?m&201326677|1:m?m|2:0}m!==0&&(a=!0,Ae(o,m))}else m=Tt,m=O(o,o===Ft?m:0),(m&3)===0||G(o,m)||(a=!0,Ae(o,m));o=o.next}while(a);Zu=!1}}function Ie(){to=Xu=!1;var e=0;pr!==0&&(ep()&&(e=pr),pr=0);for(var t=ha(),a=null,o=eo;o!==null;){var d=o.next,m=De(o,t);m===0?(o.next=null,a===null?eo=d:a.next=d,d===null&&(hr=a)):(a=o,(e!==0||(m&3)!==0)&&(to=!0)),o=d}he(e)}function De(e,t){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var b=31-Zn(m),B=1<<b,J=d[b];J===-1?((B&a)===0||(B&o)!==0)&&(d[b]=V(B,t)):J<=t&&(e.expiredLanes|=B),m&=~B}if(t=Ft,a=Tt,a=O(e,e===t?a:0),o=e.callbackNode,a===0||e===t&&Lt===2||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Lu(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||G(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(o!==null&&Lu(o),ce(a)){case 2:case 8:a=om;break;case 32:a=Vu;break;case 268435456:a=um;break;default:a=Vu}return o=Ve.bind(null,e),a=ki(a,o),e.callbackPriority=t,e.callbackNode=a,t}return o!==null&&o!==null&&Lu(o),e.callbackPriority=2,e.callbackNode=null,2}function Ve(e,t){var a=e.callbackNode;if(Rl()&&e.callbackNode!==a)return null;var o=Tt;return o=O(e,e===Ft?o:0),o===0?null:(Kc(e,o,t),De(e,ha()),e.callbackNode!=null&&e.callbackNode===a?Ve.bind(null,e):null)}function Ae(e,t){if(Rl())return null;Kc(e,t,!0)}function dt(e){ip?op(function(){(jt&6)!==0?ki(Xf,e):e()}):ki(Xf,e)}function je(){return pr===0&&(pr=D()),pr}function Ye(e,t){if(ci===null){var a=ci=[];Qu=0,mr=je(),gr={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Qu++,t.then(qe,qe),t}function qe(){if(--Qu===0&&ci!==null){gr!==null&&(gr.status="fulfilled");var e=ci;ci=null,mr=0,gr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ke(e,t){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var d=0;d<a.length;d++)(0,a[d])(t)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}function vt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mt(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ze(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fe(e,t,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(jt&2)!==0){var d=o.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),o.pending=t,t=we(e),Ee(e,null,a),t}return Ue(e,o,t,a),we(e)}function He(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194176)!==0)){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,F(e,a)}}function ht(e,t){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?d=m=t:m=m.next=t}else d=m=t;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function $e(){if(Ku){var e=gr;if(e!==null)throw e}}function ut(e,t,a,o){Ku=!1;var d=e.updateQueue;ll=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,B=d.shared.pending;if(B!==null){d.shared.pending=null;var J=B,de=J.next;J.next=null,b===null?m=de:b.next=de,b=J;var Me=e.alternate;Me!==null&&(Me=Me.updateQueue,B=Me.lastBaseUpdate,B!==b&&(B===null?Me.firstBaseUpdate=de:B.next=de,Me.lastBaseUpdate=J))}if(m!==null){var Oe=d.baseState;b=0,Me=de=J=null,B=m;do{var ze=B.lane&-536870913,st=ze!==B.lane;if(st?(Tt&ze)===ze:(o&ze)===ze){ze!==0&&ze===mr&&(Ku=!0),Me!==null&&(Me=Me.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var oa=e,Si=B;ze=t;var Yl=a;switch(Si.tag){case 1:if(oa=Si.payload,typeof oa=="function"){Oe=oa.call(Yl,Oe,ze);break e}Oe=oa;break e;case 3:oa.flags=oa.flags&-65537|128;case 0:if(oa=Si.payload,ze=typeof oa=="function"?oa.call(Yl,Oe,ze):oa,ze==null)break e;Oe=Uu({},Oe,ze);break e;case 2:ll=!0}}ze=B.callback,ze!==null&&(e.flags|=64,st&&(e.flags|=8192),st=d.callbacks,st===null?d.callbacks=[ze]:st.push(ze))}else st={lane:ze,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Me===null?(de=Me=st,J=Oe):Me=Me.next=st,b|=ze;if(B=B.next,B===null){if(B=d.shared.pending,B===null)break;st=B,B=st.next,st.next=null,d.lastBaseUpdate=st,d.shared.pending=null}}while(!0);Me===null&&(J=Oe),d.baseState=J,d.firstBaseUpdate=de,d.lastBaseUpdate=Me,m===null&&(d.shared.lanes=0),ol|=b,e.lanes=b,e.memoizedState=Oe}}function gt(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function fe(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)gt(a[e],t)}function tt(e,t){if(Kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!fm.call(t,d)||!Kn(e[d],t[d]))return!1}return!0}function pn(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ct(){}function nt(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ct,ct),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===fi?Error(r(483)):e;default:if(typeof t.status=="string")t.then(ct,ct);else{if(e=Ft,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=o}},function(o){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===fi?Error(r(483)):e}throw yr=t,fi}}function zt(){if(yr===null)throw Error(r(459));var e=yr;return yr=null,e}function yt(e){var t=di;return di+=1,Sr===null&&(Sr=[]),nt(Sr,e,t)}function Je(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Dt(e,t){throw t.$$typeof===Fh?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ln(e){var t=e._init;return t(e._payload)}function nn(e){function t(te,P){if(e){var re=te.deletions;re===null?(te.deletions=[P],te.flags|=16):re.push(P)}}function a(te,P){if(!e)return null;for(;P!==null;)t(te,P),P=P.sibling;return null}function o(te){for(var P=new Map;te!==null;)te.key!==null?P.set(te.key,te):P.set(te.index,te),te=te.sibling;return P}function d(te,P){return te=$a(te,P),te.index=0,te.sibling=null,te}function m(te,P,re){return te.index=re,e?(re=te.alternate,re!==null?(re=re.index,re<P?(te.flags|=33554434,P):re):(te.flags|=33554434,P)):(te.flags|=1048576,P)}function b(te){return e&&te.alternate===null&&(te.flags|=33554434),te}function B(te,P,re,_e){return P===null||P.tag!==6?(P=Tu(re,te.mode,_e),P.return=te,P):(P=d(P,re),P.return=te,P)}function J(te,P,re,_e){var Ke=re.type;return Ke===or?Me(te,P,re.props.children,_e,re.key):P!==null&&(P.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===tl&&ln(Ke)===P.type)?(P=d(P,re.props),Je(P,re),P.return=te,P):(P=Xi(re.type,re.key,re.props,null,te.mode,_e),Je(P,re),P.return=te,P)}function de(te,P,re,_e){return P===null||P.tag!==4||P.stateNode.containerInfo!==re.containerInfo||P.stateNode.implementation!==re.implementation?(P=Mu(re,te.mode,_e),P.return=te,P):(P=d(P,re.children||[]),P.return=te,P)}function Me(te,P,re,_e,Ke){return P===null||P.tag!==7?(P=Dl(re,te.mode,_e,Ke),P.return=te,P):(P=d(P,re),P.return=te,P)}function Oe(te,P,re){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Tu(""+P,te.mode,re),P.return=te,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Zi:return re=Xi(P.type,P.key,P.props,null,te.mode,re),Je(re,P),re.return=te,re;case ir:return P=Mu(P,te.mode,re),P.return=te,P;case tl:var _e=P._init;return P=_e(P._payload),Oe(te,P,re)}if(Qi(P)||l(P))return P=Dl(P,te.mode,re,null),P.return=te,P;if(typeof P.then=="function")return Oe(te,yt(P),re);if(P.$$typeof===el)return Oe(te,Hi(te,P),re);Dt(te,P)}return null}function ze(te,P,re,_e){var Ke=P!==null?P.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ke!==null?null:B(te,P,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Zi:return re.key===Ke?J(te,P,re,_e):null;case ir:return re.key===Ke?de(te,P,re,_e):null;case tl:return Ke=re._init,re=Ke(re._payload),ze(te,P,re,_e)}if(Qi(re)||l(re))return Ke!==null?null:Me(te,P,re,_e,null);if(typeof re.then=="function")return ze(te,P,yt(re),_e);if(re.$$typeof===el)return ze(te,P,Hi(te,re),_e);Dt(te,re)}return null}function st(te,P,re,_e,Ke){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return te=te.get(re)||null,B(P,te,""+_e,Ke);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Zi:return te=te.get(_e.key===null?re:_e.key)||null,J(P,te,_e,Ke);case ir:return te=te.get(_e.key===null?re:_e.key)||null,de(P,te,_e,Ke);case tl:var Vt=_e._init;return _e=Vt(_e._payload),st(te,P,re,_e,Ke)}if(Qi(_e)||l(_e))return te=te.get(re)||null,Me(P,te,_e,Ke,null);if(typeof _e.then=="function")return st(te,P,re,yt(_e),Ke);if(_e.$$typeof===el)return st(te,P,re,Hi(P,_e),Ke);Dt(P,_e)}return null}function oa(te,P,re,_e){for(var Ke=null,Vt=null,et=P,xt=P=0,vn=null;et!==null&&xt<re.length;xt++){et.index>xt?(vn=et,et=null):vn=et.sibling;var Rt=ze(te,et,re[xt],_e);if(Rt===null){et===null&&(et=vn);break}e&&et&&Rt.alternate===null&&t(te,et),P=m(Rt,P,xt),Vt===null?Ke=Rt:Vt.sibling=Rt,Vt=Rt,et=vn}if(xt===re.length)return a(te,et),At&&Y(te,xt),Ke;if(et===null){for(;xt<re.length;xt++)et=Oe(te,re[xt],_e),et!==null&&(P=m(et,P,xt),Vt===null?Ke=et:Vt.sibling=et,Vt=et);return At&&Y(te,xt),Ke}for(et=o(et);xt<re.length;xt++)vn=st(et,te,xt,re[xt],_e),vn!==null&&(e&&vn.alternate!==null&&et.delete(vn.key===null?xt:vn.key),P=m(vn,P,xt),Vt===null?Ke=vn:Vt.sibling=vn,Vt=vn);return e&&et.forEach(function(sl){return t(te,sl)}),At&&Y(te,xt),Ke}function Si(te,P,re,_e){if(re==null)throw Error(r(151));for(var Ke=null,Vt=null,et=P,xt=P=0,vn=null,Rt=re.next();et!==null&&!Rt.done;xt++,Rt=re.next()){et.index>xt?(vn=et,et=null):vn=et.sibling;var sl=ze(te,et,Rt.value,_e);if(sl===null){et===null&&(et=vn);break}e&&et&&sl.alternate===null&&t(te,et),P=m(sl,P,xt),Vt===null?Ke=sl:Vt.sibling=sl,Vt=sl,et=vn}if(Rt.done)return a(te,et),At&&Y(te,xt),Ke;if(et===null){for(;!Rt.done;xt++,Rt=re.next())Rt=Oe(te,Rt.value,_e),Rt!==null&&(P=m(Rt,P,xt),Vt===null?Ke=Rt:Vt.sibling=Rt,Vt=Rt);return At&&Y(te,xt),Ke}for(et=o(et);!Rt.done;xt++,Rt=re.next())Rt=st(et,te,xt,Rt.value,_e),Rt!==null&&(e&&Rt.alternate!==null&&et.delete(Rt.key===null?xt:Rt.key),P=m(Rt,P,xt),Vt===null?Ke=Rt:Vt.sibling=Rt,Vt=Rt);return e&&et.forEach(function(ym){return t(te,ym)}),At&&Y(te,xt),Ke}function Yl(te,P,re,_e){if(typeof re=="object"&&re!==null&&re.type===or&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case Zi:e:{for(var Ke=re.key;P!==null;){if(P.key===Ke){if(Ke=re.type,Ke===or){if(P.tag===7){a(te,P.sibling),_e=d(P,re.props.children),_e.return=te,te=_e;break e}}else if(P.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===tl&&ln(Ke)===P.type){a(te,P.sibling),_e=d(P,re.props),Je(_e,re),_e.return=te,te=_e;break e}a(te,P);break}else t(te,P);P=P.sibling}re.type===or?(_e=Dl(re.props.children,te.mode,_e,re.key),_e.return=te,te=_e):(_e=Xi(re.type,re.key,re.props,null,te.mode,_e),Je(_e,re),_e.return=te,te=_e)}return b(te);case ir:e:{for(Ke=re.key;P!==null;){if(P.key===Ke)if(P.tag===4&&P.stateNode.containerInfo===re.containerInfo&&P.stateNode.implementation===re.implementation){a(te,P.sibling),_e=d(P,re.children||[]),_e.return=te,te=_e;break e}else{a(te,P);break}else t(te,P);P=P.sibling}_e=Mu(re,te.mode,_e),_e.return=te,te=_e}return b(te);case tl:return Ke=re._init,re=Ke(re._payload),Yl(te,P,re,_e)}if(Qi(re))return oa(te,P,re,_e);if(l(re)){if(Ke=l(re),typeof Ke!="function")throw Error(r(150));return re=Ke.call(re),Si(te,P,re,_e)}if(typeof re.then=="function")return Yl(te,P,yt(re),_e);if(re.$$typeof===el)return Yl(te,P,Hi(te,re),_e);Dt(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,P!==null&&P.tag===6?(a(te,P.sibling),_e=d(P,re),_e.return=te,te=_e):(a(te,P),_e=Tu(re,te.mode,_e),_e.return=te,te=_e),b(te)):a(te,P)}return function(te,P,re,_e){try{di=0;var Ke=Yl(te,P,re,_e);return Sr=null,Ke}catch(et){if(et===fi)throw et;var Vt=s(29,et,null,te.mode);return Vt.lanes=_e,Vt.return=te,Vt}finally{}}}function qt(e,t){e=Va,M(ao,e),M(Er,t),Va=e|t.baseLanes}function mn(){M(ao,Va),M(Er,Er.current)}function gn(){Va=ao.current,A(Er),A(ao)}function rn(e){var t=e.alternate;M(cn,cn.current&1),M(ra,e),ba===null&&(t===null||Er.current!==null||t.memoizedState!==null)&&(ba=e)}function yn(e){if(e.tag===22){if(M(cn,cn.current),M(ra,e),ba===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ba=e)}}else It()}function It(){M(cn,cn.current),M(ra,ra.current)}function Qe(e){A(ra),ba===e&&(ba=null),A(cn)}function Kt(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gu(a)||ju(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ot(){throw Error(r(321))}function S(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Kn(e[a],t[a]))return!1;return!0}function _(e,t,a,o,d,m){return rl=m,ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lt.H=e===null||e.memoizedState===null?Gl:il,Bl=!1,m=a(o,d),Bl=!1,br&&(m=ne(t,a,o,d)),H(e),m}function H(e){lt.H=_a;var t=Gt!==null&&Gt.next!==null;if(rl=0,un=Gt=ft=null,lo=!1,vi=0,_r=null,t)throw Error(r(300));e===null||fn||(e=e.dependencies,e!==null&&ji(e)&&(fn=!0))}function ne(e,t,a,o){ft=e;var d=0;do{if(br&&(_r=null),vi=0,br=!1,25<=d)throw Error(r(301));if(d+=1,un=Gt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}lt.H=jl,m=t(a,o)}while(br);return m}function ue(){var e=lt.H,t=e.useState()[0];return t=typeof t.then=="function"?Te(t):t,e=e.useState()[0],(Gt!==null?Gt.memoizedState:null)!==e&&(ft.flags|=1024),t}function oe(){var e=ro!==0;return ro=0,e}function be(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ye(e){if(lo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}lo=!1}rl=0,un=Gt=ft=null,br=!1,vi=ro=0,_r=null}function Se(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?ft.memoizedState=un=e:un=un.next=e,un}function ge(){if(Gt===null){var e=ft.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var t=un===null?ft.memoizedState:un.next;if(t!==null)un=t,Gt=e;else{if(e===null)throw ft.alternate===null?Error(r(467)):Error(r(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},un===null?ft.memoizedState=un=e:un=un.next=e}return un}function Te(e){var t=vi;return vi+=1,_r===null&&(_r=[]),e=nt(_r,e,t),t=ft,(un===null?t.memoizedState:un.next)===null&&(t=t.alternate,lt.H=t===null||t.memoizedState===null?Gl:il),e}function le(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Te(e);if(e.$$typeof===el)return An(e)}throw Error(r(438,String(e)))}function Ct(e){var t=null,a=ft.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var o=ft.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Iu(),ft.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),o=0;o<e;o++)a[o]=Vh;return t.index++,a}function Ge(e,t){return typeof t=="function"?t(e):t}function Le(e){var t=ge();return Pe(t,Gt,e)}function Pe(e,t,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var d=e.baseQueue,m=o.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}t.baseQueue=d=m,o.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{t=d.next;var B=b=null,J=null,de=t,Me=!1;do{var Oe=de.lane&-536870913;if(Oe!==de.lane?(Tt&Oe)===Oe:(rl&Oe)===Oe){var ze=de.revertLane;if(ze===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Oe===mr&&(Me=!0);else if((rl&ze)===ze){de=de.next,ze===mr&&(Me=!0);continue}else Oe={lane:0,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},J===null?(B=J=Oe,b=m):J=J.next=Oe,ft.lanes|=ze,ol|=ze;Oe=de.action,Bl&&a(m,Oe),m=de.hasEagerState?de.eagerState:a(m,Oe)}else ze={lane:Oe,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},J===null?(B=J=ze,b=m):J=J.next=ze,ft.lanes|=Oe,ol|=Oe;de=de.next}while(de!==null&&de!==t);if(J===null?b=m:J.next=B,!Kn(m,e.memoizedState)&&(fn=!0,Me&&(a=gr,a!==null)))throw a;e.memoizedState=m,e.baseState=b,e.baseQueue=J,o.lastRenderedState=m}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function at(e){var t=ge(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,m=t.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do m=e(m,b.action),b=b.next;while(b!==d);Kn(m,t.memoizedState)||(fn=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),a.lastRenderedState=m}return[m,o]}function St(e,t,a){var o=ft,d=ge(),m=At;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=t();var b=!Kn((Gt||d).memoizedState,a);if(b&&(d.memoizedState=a,fn=!0),d=d.queue,Ca(an.bind(null,o,d,e),[e]),d.getSnapshot!==t||b||un!==null&&un.memoizedState.tag&1){if(o.flags|=2048,fa(9,Ht.bind(null,o,d,a,t),{destroy:void 0},null),Ft===null)throw Error(r(349));m||(rl&60)!==0||Et(o,t,a)}return a}function Et(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ft.updateQueue,t===null?(t=Iu(),ft.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ht(e,t,a,o){t.value=a,t.getSnapshot=o,bt(t)&&Cn(e)}function an(e,t,a){return a(function(){bt(t)&&Cn(e)})}function bt(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Kn(e,a)}catch{return!0}}function Cn(e){var t=Ne(e,2);t!==null&&Nn(t,e,2)}function Ut(e){var t=Se();if(typeof e=="function"){var a=e;if(e=a(),Bl){k(!0);try{a()}finally{k(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:e},t}function Xt(e,t,a,o){return e.baseState=a,Pe(e,Gt,typeof o=="function"?o:Ge)}function Sn(e,t,a,o,d){if(Ml(e))throw Error(r(485));if(e=t.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};lt.T!==null?a(!0):m.isTransition=!1,o(m),a=t.pending,a===null?(m.next=t.pending=m,Jn(t,m)):(m.next=a.next,t.pending=a.next=m)}}function Jn(e,t){var a=t.action,o=t.payload,d=e.state;if(t.isTransition){var m=lt.T,b={};lt.T=b;try{var B=a(d,o),J=lt.S;J!==null&&J(b,B),kt(e,t,B)}catch(de){Zt(e,t,de)}finally{lt.T=m}}else try{m=a(d,o),kt(e,t,m)}catch(de){Zt(e,t,de)}}function kt(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){_t(e,t,o)},function(o){return Zt(e,t,o)}):_t(e,t,a)}function _t(e,t,a){t.status="fulfilled",t.value=a,Nt(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Jn(e,a)))}function Zt(e,t,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=a,Nt(t),t=t.next;while(t!==o)}e.action=null}function Nt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function it(e,t){return t}function En(e,t){if(At){var a=Ft.formState;if(a!==null){e:{var o=ft;if(At){if(Dn){var d=Np(Dn,Ea);if(d){Dn=Nf(d),o=zp(d);break e}}se(o)}o=!1}o&&(t=a[0])}}a=Se(),a.memoizedState=a.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:t},a.queue=o,a=Pr.bind(null,ft,o),o.dispatch=a,o=Ut(!1);var m=$l.bind(null,ft,!1,o.queue);return o=Se(),d={state:t,dispatch:null,action:e,pending:null},o.queue=d,a=Sn.bind(null,ft,d,m,a),d.dispatch=a,o.memoizedState=e,[t,a,!1]}function On(e){var t=ge();return Jt(t,Gt,e)}function Jt(e,t,a){t=Pe(e,t,it)[0],e=Le(Ge)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Te(t):t;var o=ge(),d=o.queue,m=d.dispatch;return a!==o.memoizedState&&(ft.flags|=2048,fa(9,Fn.bind(null,d,a),{destroy:void 0},null)),[t,m,e]}function Fn(e,t){e.action=t}function gl(e){var t=ge(),a=Gt;if(a!==null)return Jt(t,a,e);ge(),t=t.memoizedState,a=ge();var o=a.queue.dispatch;return a.memoizedState=e,[t,o,!1]}function fa(e,t,a,o){return e={tag:e,create:t,inst:a,deps:o,next:null},t=ft.updateQueue,t===null&&(t=Iu(),ft.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,t.lastEffect=e),e}function kl(){return ge().memoizedState}function yl(e,t,a,o){var d=Se();ft.flags|=e,d.memoizedState=fa(1|t,a,{destroy:void 0},o===void 0?null:o)}function Sl(e,t,a,o){var d=ge();o=o===void 0?null:o;var m=d.memoizedState.inst;Gt!==null&&o!==null&&S(o,Gt.memoizedState.deps)?d.memoizedState=fa(t,a,m,o):(ft.flags|=e,d.memoizedState=fa(1|t,a,m,o))}function Jl(e,t){yl(8390656,8,e,t)}function Ca(e,t){Sl(2048,8,e,t)}function qr(e,t){return Sl(4,2,e,t)}function El(e,t){return Sl(4,4,e,t)}function Ua(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Aa(e,t,a){a=a!=null?a.concat([e]):null,Sl(4,4,Ua.bind(null,t,e),a)}function xa(){}function Xr(e,t){var a=ge();t=t===void 0?null:t;var o=a.memoizedState;return t!==null&&S(t,o[1])?o[0]:(a.memoizedState=[e,t],e)}function Qa(e,t){var a=ge();t=t===void 0?null:t;var o=a.memoizedState;if(t!==null&&S(t,o[1]))return o[0];if(o=e(),Bl){k(!0);try{e()}finally{k(!1)}}return a.memoizedState=[o,t],o}function bl(e,t,a){return a===void 0||(rl&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Qc(),ft.lanes|=e,ol|=e,a)}function Wl(e,t,a,o){return Kn(a,t)?a:Er.current!==null?(e=bl(e,a,o),Kn(e,t)||(fn=!0),e):(rl&42)===0?(fn=!0,e.memoizedState=a):(e=Qc(),ft.lanes|=e,ol|=e,t)}function Zr(e,t,a,o,d){var m=Ol();Hn(m!==0&&8>m?m:8);var b=lt.T,B={};lt.T=B,$l(e,!1,t,a);try{var J=d(),de=lt.S;if(de!==null&&de(B,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Me=ke(J,o);Ra(e,t,Me,qn(e))}else Ra(e,t,o,qn(e))}catch(Oe){Ra(e,t,{then:function(){},status:"rejected",reason:Oe},qn())}finally{Hn(m),lt.T=b}}function _l(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ur,baseState:ur,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:ur},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Tl(){return An(Nl)}function Qr(){return ge().memoizedState}function Bn(){return ge().memoizedState}function Kr(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=qn();e=Ze(a);var o=Fe(t,e,a);o!==null&&(Nn(o,t,a),He(o,t,a)),t={cache:nu()},e.payload=t;return}t=t.return}}function Bi(e,t,a){var o=qn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ml(e)?Ka(t,a):(a=Re(e,t,a,o),a!==null&&(Nn(a,e,o),Pa(a,t,o)))}function Pr(e,t,a){var o=qn();Ra(e,t,a,o)}function Ra(e,t,a,o){var d={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ml(e))Ka(t,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var b=t.lastRenderedState,B=m(b,a);if(d.hasEagerState=!0,d.eagerState=B,Kn(B,b))return Ue(e,t,d,0),Ft===null&&Be(),!1}catch{}finally{}if(a=Re(e,t,d,o),a!==null)return Nn(a,e,o),Pa(a,t,o),!0}return!1}function $l(e,t,a,o){if(o={lane:2,revertLane:je(),action:o,hasEagerState:!1,eagerState:null,next:null},Ml(e)){if(t)throw Error(r(479))}else t=Re(e,a,o,2),t!==null&&Nn(t,e,2)}function Ml(e){var t=e.alternate;return e===ft||t!==null&&t===ft}function Ka(e,t){br=lo=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Pa(e,t,a){if((a&4194176)!==0){var o=t.lanes;o&=e.pendingLanes,a|=o,t.lanes=a,F(e,a)}}function Wn(e,t,a,o){t=e.memoizedState,a=a(o,t),a=a==null?t:Uu({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}function Ir(e,t,a,o,d,m,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,b):t.prototype&&t.prototype.isPureReactComponent?!tt(a,o)||!tt(d,m):!0}function er(e,t,a,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,o),t.state!==e&&ku.enqueueReplaceState(t,t.state,null)}function da(e,t){var a=t;if("ref"in t){a={};for(var o in t)o!=="ref"&&(a[o]=t[o])}if(e=e.defaultProps){a===t&&(a=Uu({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Sa(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function kr(e,t,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Da(e,t,a){return a=Ze(a),a.tag=3,a.payload={element:null},a.callback=function(){Sa(e,t)},a}function tr(e){return e=Ze(e),e.tag=3,e}function Un(e,t,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;e.payload=function(){return d(m)},e.callback=function(){kr(t,a,o)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){kr(t,a,o),typeof d!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var B=o.stack;this.componentDidCatch(o.value,{componentStack:B!==null?B:""})})}function Qo(e,t,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=a.alternate,t!==null&&$r(t,a,d,!0),a=ra.current,a!==null){switch(a.tag){case 13:return ba===null?Su():a.alternate===null&&tn===0&&(tn=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===no?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([o]):t.add(o),bu(e,o,d)),!1;case 22:return a.flags|=65536,o===no?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([o]):a.add(o)),bu(e,o,d)),!1}throw Error(r(435,a.tag))}return bu(e,o,d),Su(),!1}if(At)return t=ra.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,o!==Yu&&(e=Error(r(422),{cause:o}),Xe(Z(e,a)))):(o!==Yu&&(t=Error(r(423),{cause:o}),Xe(Z(t,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Z(o,a),d=Da(e.stateNode,o,d),ht(e,d),tn!==4&&(tn=2)),!1;var m=Error(r(520),{cause:o});if(m=Z(m,a),pi===null?pi=[m]:pi.push(m),tn!==4&&(tn=2),t===null)return!0;o=Z(o,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Da(a.stateNode,o,e),ht(a,e),!1;case 1:if(t=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ul===null||!ul.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=tr(d),Un(d,e,a,o),ht(a,d),!1}a=a.return}while(a!==null);return!1}function Wt(e,t,a,o){t.child=e===null?Qf(t,null,a,o):wl(t,e.child,a,o)}function Cl(e,t,a,o,d){a=a.render;var m=t.ref;if("ref"in o){var b={};for(var B in o)B!=="ref"&&(b[B]=o[B])}else b=o;return Ul(t),o=_(e,t,a,b,m,d),B=oe(),e!==null&&!fn?(be(e,t,d),Oa(e,t,d)):(At&&B&&j(t),t.flags|=1,Wt(e,t,o,d),t.child)}function Jr(e,t,a,o,d){if(e===null){var m=a.type;return typeof m=="function"&&!_u(m)&&m.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=m,Gi(e,t,m,o,d)):(e=Xi(a.type,null,o,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!$o(e,d)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:tt,a(b,o)&&e.ref===t.ref)return Oa(e,t,d)}return t.flags|=1,e=$a(m,o),e.ref=t.ref,e.return=t,t.child=e}function Gi(e,t,a,o,d){if(e!==null){var m=e.memoizedProps;if(tt(m,o)&&e.ref===t.ref)if(fn=!1,t.pendingProps=o=m,$o(e,d))(e.flags&131072)!==0&&(fn=!0);else return t.lanes=e.lanes,Oa(e,t,d)}return $n(e,t,a,o,d)}function bn(e,t,a){var o=t.pendingProps,d=o.children,m=(t.stateNode._pendingVisibility&2)!==0,b=e!==null?e.memoizedState:null;if(on(e,t),o.mode==="hidden"||m){if((t.flags&128)!==0){if(o=b!==null?b.baseLanes|a:a,e!==null){for(d=t.child=e.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;t.childLanes=m&~o}else t.childLanes=0,t.child=null;return Gn(e,t,o,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Fi(t,b!==null?b.cachePool:null),b!==null?qt(t,b):mn(),yn(t);else return t.lanes=t.childLanes=536870912,Gn(e,t,b!==null?b.baseLanes|a:a,a)}else b!==null?(Fi(t,b.cachePool),qt(t,b),It(),t.memoizedState=null):(e!==null&&Fi(t,null),mn(),It());return Wt(e,t,d,a),t.child}function Gn(e,t,a,o){var d=au();return d=d===null?null:{parent:Ba?$t._currentValue:$t._currentValue2,pool:d},t.memoizedState={baseLanes:a,cachePool:d},e!==null&&Fi(t,null),mn(),yn(t),e!==null&&$r(e,t,o,!0),null}function on(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=2097664)}}function $n(e,t,a,o,d){return Ul(t),a=_(e,t,a,o,void 0,d),o=oe(),e!==null&&!fn?(be(e,t,d),Oa(e,t,d)):(At&&o&&j(t),t.flags|=1,Wt(e,t,a,d),t.child)}function Wr(e,t,a,o,d,m){return Ul(t),t.updateQueue=null,a=ne(t,o,a,d),H(e),o=oe(),e!==null&&!fn?(be(e,t,m),Oa(e,t,m)):(At&&o&&j(t),t.flags|=1,Wt(e,t,a,m),t.child)}function mc(e,t,a,o,d){if(Ul(t),t.stateNode===null){var m=cr,b=a.contextType;typeof b=="object"&&b!==null&&(m=An(b)),m=new a(o,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ku,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=o,m.state=t.memoizedState,m.refs={},vt(t),b=a.contextType,m.context=typeof b=="object"&&b!==null?An(b):cr,m.state=t.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Wn(t,a,b,o),m.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&ku.enqueueReplaceState(m,m.state,null),ut(t,o,m,d),$e(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){m=t.stateNode;var B=t.memoizedProps,J=da(a,B);m.props=J;var de=m.context,Me=a.contextType;b=cr,typeof Me=="object"&&Me!==null&&(b=An(Me));var Oe=a.getDerivedStateFromProps;Me=typeof Oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",B=t.pendingProps!==B,Me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(B||de!==b)&&er(t,m,o,b),ll=!1;var ze=t.memoizedState;m.state=ze,ut(t,o,m,d),$e(),de=t.memoizedState,B||ze!==de||ll?(typeof Oe=="function"&&(Wn(t,a,Oe,o),de=t.memoizedState),(J=ll||Ir(t,a,J,o,ze,de,b))?(Me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=de),m.props=o,m.state=de,m.context=b,o=J):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,Mt(e,t),b=t.memoizedProps,Me=da(a,b),m.props=Me,Oe=t.pendingProps,ze=m.context,de=a.contextType,J=cr,typeof de=="object"&&de!==null&&(J=An(de)),B=a.getDerivedStateFromProps,(de=typeof B=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Oe||ze!==J)&&er(t,m,o,J),ll=!1,ze=t.memoizedState,m.state=ze,ut(t,o,m,d),$e();var st=t.memoizedState;b!==Oe||ze!==st||ll||e!==null&&e.dependencies!==null&&ji(e.dependencies)?(typeof B=="function"&&(Wn(t,a,B,o),st=t.memoizedState),(Me=ll||Ir(t,a,Me,o,ze,st,J)||e!==null&&e.dependencies!==null&&ji(e.dependencies))?(de||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,st,J),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,st,J)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&ze===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&ze===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=st),m.props=o,m.state=st,m.context=J,o=Me):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&ze===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&ze===e.memoizedState||(t.flags|=1024),o=!1)}return m=o,on(e,t),o=(t.flags&128)!==0,m||o?(m=t.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&o?(t.child=wl(t,e.child,null,d),t.child=wl(t,null,a,d)):Wt(e,t,a,d),t.memoizedState=m.state,e=t.child):e=Oa(e,t,d),e}function gc(e,t,a,o){return ve(),t.flags|=256,Wt(e,t,a,o),t.child}function Ko(e){return{baseLanes:e,cachePool:Tc()}}function Po(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ia),e}function yc(e,t,a){var o=t.pendingProps,d=!1,m=(t.flags&128)!==0,b;if((b=m)||(b=e!==null&&e.memoizedState===null?!1:(cn.current&2)!==0),b&&(d=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(At){if(d?rn(t):It(),At){var B=Dn,J;(J=B)&&(B=Hp(B,Ea),B!==null?(t.memoizedState={dehydrated:B,treeContext:zl!==null?{id:Ga,overflow:ja}:null,retryLane:536870912},J=s(18,null,null,0),J.stateNode=B,J.return=t,t.child=J,zn=t,Dn=null,J=!0):J=!1),J||se(t)}if(B=t.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return ju(B)?t.lanes=16:t.lanes=536870912,null;Qe(t)}return B=o.children,o=o.fallback,d?(It(),d=t.mode,B=ko({mode:"hidden",children:B},d),o=Dl(o,d,a,null),B.return=t,o.return=t,B.sibling=o,t.child=B,d=t.child,d.memoizedState=Ko(a),d.childLanes=Po(e,b,a),t.memoizedState=Ju,o):(rn(t),Io(t,B))}if(J=e.memoizedState,J!==null&&(B=J.dehydrated,B!==null)){if(m)t.flags&256?(rn(t),t.flags&=-257,t=Jo(e,t,a)):t.memoizedState!==null?(It(),t.child=e.child,t.flags|=128,t=null):(It(),d=o.fallback,B=t.mode,o=ko({mode:"visible",children:o.children},B),d=Dl(d,B,a,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,wl(t,e.child,null,a),o=t.child,o.memoizedState=Ko(a),o.childLanes=Po(e,b,a),t.memoizedState=Ju,t=d);else if(rn(t),ju(B))b=Dp(B).digest,o=Error(r(419)),o.stack="",o.digest=b,Xe({value:o,source:null,stack:null}),t=Jo(e,t,a);else if(fn||$r(e,t,a,!1),b=(a&e.childLanes)!==0,fn||b){if(b=Ft,b!==null){if(o=a&-a,(o&42)!==0)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=(o&(b.suspendedLanes|a))!==0?0:o,o!==0&&o!==J.retryLane)throw J.retryLane=o,Ne(e,o),Nn(b,e,o),Pf}Gu(B)||Su(),t=Jo(e,t,a)}else Gu(B)?(t.flags|=128,t.child=e.child,t=zh.bind(null,e),Op(B,t),t=null):(e=J.treeContext,ea&&(Dn=Bp(B),zn=t,At=!0,pa=null,Ea=!1,e!==null&&(na[aa++]=Ga,na[aa++]=ja,na[aa++]=zl,Ga=e.id,ja=e.overflow,zl=t)),t=Io(t,o.children),t.flags|=4096);return t}return d?(It(),d=o.fallback,B=t.mode,J=e.child,m=J.sibling,o=$a(J,{mode:"hidden",children:o.children}),o.subtreeFlags=J.subtreeFlags&31457280,m!==null?d=$a(m,d):(d=Dl(d,B,a,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,B=e.child.memoizedState,B===null?B=Ko(a):(J=B.cachePool,J!==null?(m=Ba?$t._currentValue:$t._currentValue2,J=J.parent!==m?{parent:m,pool:m}:J):J=Tc(),B={baseLanes:B.baseLanes|a,cachePool:J}),d.memoizedState=B,d.childLanes=Po(e,b,a),t.memoizedState=Ju,o):(rn(t),a=e.child,e=a.sibling,a=$a(a,{mode:"visible",children:o.children}),a.return=t,a.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=a,t.memoizedState=null,a)}function Io(e,t){return t=ko({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ko(e,t){return sf(e,t,0,null)}function Jo(e,t,a){return wl(t,e.child,null,a),e=Io(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sc(e,t,a){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),eu(e.return,t,a)}function Wo(e,t,a,o,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=a,m.tailMode=d)}function Ec(e,t,a){var o=t.pendingProps,d=o.revealOrder,m=o.tail;if(Wt(e,t,o.children,a),o=cn.current,(o&2)!==0)o=o&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sc(e,a,t);else if(e.tag===19)Sc(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(M(cn,o),d){case"forwards":for(a=t.child,d=null;a!==null;)e=a.alternate,e!==null&&Kt(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=t.child,t.child=null):(d=a.sibling,a.sibling=null),Wo(t,!1,d,a,m);break;case"backwards":for(a=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Kt(e)===null){t.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Wo(t,!0,a,null,m);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),ol|=t.lanes,(a&t.childLanes)===0)if(e!==null){if($r(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=$a(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=$a(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function $o(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ji(e)))}function _h(e,t,a){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Ia(t,$t,e.memoizedState.cache),ve();break;case 27:case 5:K(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Ia(t,t.type,t.memoizedProps.value);break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(rn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?yc(e,t,a):(rn(t),e=Oa(e,t,a),e!==null?e.sibling:null);rn(t);break;case 19:var d=(e.flags&128)!==0;if(o=(a&t.childLanes)!==0,o||($r(e,t,a,!1),o=(a&t.childLanes)!==0),d){if(o)return Ec(e,t,a);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),M(cn,cn.current),o)break;return null;case 22:case 23:return t.lanes=0,bn(e,t,a);case 24:Ia(t,$t,e.memoizedState.cache)}return Oa(e,t,a)}function bc(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)fn=!0;else{if(!$o(e,a)&&(t.flags&128)===0)return fn=!1,_h(e,t,a);fn=(e.flags&131072)!==0}else fn=!1,At&&(t.flags&1048576)!==0&&R(t,Wi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var o=t.elementType,d=o._init;if(o=d(o._payload),t.type=o,typeof o=="function")_u(o)?(e=da(o,e),t.tag=1,t=mc(null,t,o,e,a)):(t.tag=0,t=$n(null,t,o,e,a));else{if(o!=null){if(d=o.$$typeof,d===xu){t.tag=11,t=Cl(null,t,o,e,a);break e}else if(d===Ou){t.tag=14,t=Jr(null,t,o,e,a);break e}}throw t=c(o)||o,Error(r(306,t,""))}}return t;case 0:return $n(e,t,t.type,t.pendingProps,a);case 1:return o=t.type,d=da(o,t.pendingProps),mc(e,t,o,d,a);case 3:e:{if(Q(t,t.stateNode.containerInfo),e===null)throw Error(r(387));var m=t.pendingProps;d=t.memoizedState,o=d.element,Mt(e,t),ut(t,m,null,a);var b=t.memoizedState;if(m=b.cache,Ia(t,$t,m),m!==d.cache&&tu(t,[$t],a,!0),$e(),m=b.element,ea&&d.isDehydrated)if(d={element:m,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=gc(e,t,m,a);break e}else if(m!==o){o=Z(Error(r(424)),t),Xe(o),t=gc(e,t,m,a);break e}else for(ea&&(Dn=wp(t.stateNode.containerInfo),zn=t,At=!0,pa=null,Ea=!0),a=Qf(t,null,m,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ve(),m===o){t=Oa(e,t,a);break e}Wt(e,t,m,a)}t=t.child}return t;case 26:if(ta)return on(e,t),e===null?(a=Gf(t.type,null,t.pendingProps,null))?t.memoizedState=a:At||(t.stateNode=kp(t.type,t.pendingProps,al.current,t)):t.memoizedState=Gf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Rn)return K(t),e===null&&Rn&&At&&(o=t.stateNode=Yf(t.type,t.pendingProps,al.current,_n.current,!1),zn=t,Ea=!0,Dn=zf(o)),o=t.pendingProps.children,e!==null||At?Wt(e,t,o,a):t.child=wl(t,null,o,a),on(e,t),t.child;case 5:return e===null&&At&&(Kp(t.type,t.pendingProps,_n.current),(d=o=Dn)&&(o=Gp(o,t.type,t.pendingProps,Ea),o!==null?(t.stateNode=o,zn=t,Dn=zf(o),Ea=!1,d=!0):d=!1),d||se(t)),K(t),d=t.type,m=t.pendingProps,b=e!==null?e.memoizedProps:null,o=m.children,Ki(d,m)?o=null:b!==null&&Ki(d,b)&&(t.flags|=32),t.memoizedState!==null&&(d=_(e,t,ue,null,null,a),Ba?Nl._currentValue=d:Nl._currentValue2=d),on(e,t),Wt(e,t,o,a),t.child;case 6:return e===null&&At&&(Pp(t.pendingProps,_n.current),(e=a=Dn)&&(a=jp(a,t.pendingProps,Ea),a!==null?(t.stateNode=a,zn=t,Dn=null,e=!0):e=!1),e||se(t)),null;case 13:return yc(e,t,a);case 4:return Q(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=wl(t,null,o,a):Wt(e,t,o,a),t.child;case 11:return Cl(e,t,t.type,t.pendingProps,a);case 7:return Wt(e,t,t.pendingProps,a),t.child;case 8:return Wt(e,t,t.pendingProps.children,a),t.child;case 12:return Wt(e,t,t.pendingProps.children,a),t.child;case 10:return o=t.pendingProps,Ia(t,t.type,o.value),Wt(e,t,o.children,a),t.child;case 9:return d=t.type._context,o=t.pendingProps.children,Ul(t),d=An(d),o=o(d),t.flags|=1,Wt(e,t,o,a),t.child;case 14:return Jr(e,t,t.type,t.pendingProps,a);case 15:return Gi(e,t,t.type,t.pendingProps,a);case 19:return Ec(e,t,a);case 22:return bn(e,t,a);case 24:return Ul(t),o=An($t),e===null?(d=au(),d===null&&(d=Ft,m=nu(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),t.memoizedState={parent:o,cache:d},vt(t),Ia(t,$t,d)):((e.lanes&a)!==0&&(Mt(e,t),ut(t,null,null,a),$e()),d=e.memoizedState,m=t.memoizedState,d.parent!==o?(d={parent:o,cache:o},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ia(t,$t,o)):(o=m.cache,Ia(t,$t,o),o!==d.cache&&tu(t,[$t],a,!0))),Wt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Ia(e,t,a){Ba?(M(io,t._currentValue),t._currentValue=a):(M(io,t._currentValue2),t._currentValue2=a)}function Na(e){var t=io.current;Ba?e._currentValue=t:e._currentValue2=t,A(io)}function eu(e,t,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===a)break;e=e.return}}function tu(e,t,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var B=m;m=d;for(var J=0;J<t.length;J++)if(B.context===t[J]){m.lanes|=a,B=m.alternate,B!==null&&(B.lanes|=a),eu(m.return,a,e),o||(b=null);break e}m=B.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),eu(b,a,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function $r(e,t,a,o){e=null;for(var d=t,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var B=d.type;Kn(d.pendingProps.value,b.value)||(e!==null?e.push(B):e=[B])}}else if(d===$i.current){if(b=d.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Nl):e=[Nl])}d=d.return}e!==null&&tu(t,e,a,o),t.flags|=262144}function ji(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!Kn(Ba?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Ul(e){Hl=e,Ha=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return _c(Hl,e)}function Hi(e,t){return Hl===null&&Ul(e),_c(e,t)}function _c(e,t){var a=Ba?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:a,next:null},Ha===null){if(e===null)throw Error(r(308));Ha=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ha=Ha.next=t;return a}function nu(){return{controller:new vm,data:new Map,refCount:0}}function ei(e){e.refCount--,e.refCount===0&&hm(pm,function(){e.controller.abort()})}function au(){var e=Fl.current;return e!==null?e:Ft.pooledCache}function Fi(e,t){t===null?M(Fl,Fl.current):M(Fl,t.pool)}function Tc(){var e=au();return e===null?null:{parent:Ba?$t._currentValue:$t._currentValue2,pool:e}}function Ln(e){e.flags|=4}function Mc(e,t){if(e!==null&&e.child===t.child)return!1;if((t.flags&16)!==0)return!0;for(e=t.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function lu(e,t,a,o){if(xn)for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)wu(e,a.stateNode);else if(!(a.tag===4||Rn&&a.tag===27)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}else if(nl)for(var d=t.child;d!==null;){if(d.tag===5){var m=d.stateNode;a&&o&&(m=Df(m,d.type,d.memoizedProps)),wu(e,m)}else if(d.tag===6)m=d.stateNode,a&&o&&(m=Of(m,d.memoizedProps)),wu(e,m);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)m=d.child,m!==null&&(m.return=d),lu(e,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===t)break;for(;d.sibling===null;){if(d.return===null||d.return===t)return;d=d.return}d.sibling.return=d.return,d=d.sibling}}function Cc(e,t,a,o){if(nl)for(var d=t.child;d!==null;){if(d.tag===5){var m=d.stateNode;a&&o&&(m=Df(m,d.type,d.memoizedProps)),xf(e,m)}else if(d.tag===6)m=d.stateNode,a&&o&&(m=Of(m,d.memoizedProps)),xf(e,m);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)m=d.child,m!==null&&(m.return=d),Cc(e,d,!(d.memoizedProps!==null&&d.memoizedProps.mode==="manual"),!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===t)break;for(;d.sibling===null;){if(d.return===null||d.return===t)return;d=d.return}d.sibling.return=d.return,d=d.sibling}}function Uc(e,t){if(nl&&Mc(e,t)){e=t.stateNode;var a=e.containerInfo,o=Af();Cc(o,t,!1,!1),e.pendingChildren=o,Ln(t),Rp(a,o)}}function ru(e,t,a,o){if(xn)e.memoizedProps!==o&&Ln(t);else if(nl){var d=e.stateNode,m=e.memoizedProps;if((e=Mc(e,t))||m!==o){var b=_n.current;m=xp(d,a,m,o,!e,null),m===d?t.stateNode=d:(bf(m,a,o,b)&&Ln(t),t.stateNode=m,e?lu(m,t,!1,!1):Ln(t))}else t.stateNode=d}}function iu(e,t,a){if(np(t,a)){if(e.flags|=16777216,!Mf(t,a))if(Jc())e.flags|=8192;else throw yr=no,Pu}else e.flags&=-16777217}function Ac(e,t){if(Wp(t)){if(e.flags|=16777216,!Vf(t))if(Jc())e.flags|=8192;else throw yr=no,Pu}else e.flags&=-16777217}function Li(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?L():536870912,e.lanes|=t,Cr|=t)}function ti(e,t){if(!At)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(t)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&31457280,o|=d.flags&31457280,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,t}function Th(e,t,a){var o=t.pendingProps;switch(I(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return Pt(t),null;case 3:return a=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Na($t),W(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(me(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pa!==null&&(gu(pa),pa=null))),Uc(e,t),Pt(t),null;case 26:if(ta){a=t.type;var d=t.memoizedState;return e===null?(Ln(t),d!==null?(Pt(t),Ac(t,d)):(Pt(t),iu(t,a,o))):d?d!==e.memoizedState?(Ln(t),Pt(t),Ac(t,d)):(Pt(t),t.flags&=-16777217):(xn?e.memoizedProps!==o&&Ln(t):ru(e,t,a,o),Pt(t),iu(t,a,o)),null}case 27:if(Rn){if(ae(t),a=al.current,d=t.type,e!==null&&t.stateNode!=null)xn?e.memoizedProps!==o&&Ln(t):ru(e,t,d,o);else{if(!o){if(t.stateNode===null)throw Error(r(166));return Pt(t),null}e=_n.current,me(t)?pe(t,e):(e=Yf(d,o,a,e,!0),t.stateNode=e,Ln(t))}return Pt(t),null}case 5:if(ae(t),a=t.type,e!==null&&t.stateNode!=null)ru(e,t,a,o);else{if(!o){if(t.stateNode===null)throw Error(r(166));return Pt(t),null}e=_n.current,me(t)?pe(t,e):(d=Ih(a,o,al.current,e,t),lu(d,t,!1,!1),t.stateNode=d,bf(d,a,o,e)&&Ln(t))}return Pt(t),iu(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)a=e.memoizedProps,xn?a!==o&&Ln(t):nl&&(a!==o?(t.stateNode=_f(o,al.current,_n.current,t),Ln(t)):t.stateNode=e.stateNode);else{if(typeof o!="string"&&t.stateNode===null)throw Error(r(166));if(e=al.current,a=_n.current,me(t)){if(!ea)throw Error(r(176));if(e=t.stateNode,a=t.memoizedProps,o=null,d=zn,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}Lp(e,a,t,o)||se(t)}else t.stateNode=_f(o,e,a,t)}return Pt(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=me(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(!ea)throw Error(r(344));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Vp(d,t)}else ve(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Pt(t),d=!1}else pa!==null&&(gu(pa),pa=null),d=!0;if(!d)return t.flags&256?(Qe(t),t):(Qe(t),null)}if(Qe(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=t.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var m=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Li(t,t.updateQueue),Pt(t),null;case 4:return W(),Uc(e,t),e===null&&Wh(t.stateNode.containerInfo),Pt(t),null;case 10:return Na(t.type),Pt(t),null;case 19:if(A(cn),d=t.memoizedState,d===null)return Pt(t),null;if(o=(t.flags&128)!==0,m=d.rendering,m===null)if(o)ti(d,!1);else{if(tn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Kt(e),m!==null){for(t.flags|=128,ti(d,!1),e=m.updateQueue,t.updateQueue=e,Li(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)uf(a,e),a=a.sibling;return M(cn,cn.current&1|2),t.child}e=e.sibling}d.tail!==null&&ha()>mi&&(t.flags|=128,o=!0,ti(d,!1),t.lanes=4194304)}else{if(!o)if(e=Kt(m),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Li(t,e),ti(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!At)return Pt(t),null}else 2*ha()-d.renderingStartTime>mi&&a!==536870912&&(t.flags|=128,o=!0,ti(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(e=d.last,e!==null?e.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=ha(),t.sibling=null,e=cn.current,M(cn,o?e&1|2:e&1),t):(Pt(t),null);case 22:case 23:return Qe(t),gn(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(a&536870912)!==0&&(t.flags&128)===0&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),a=t.updateQueue,a!==null&&Li(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==a&&(t.flags|=2048),e!==null&&A(Fl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Na($t),Pt(t),null;case 25:return null}throw Error(r(156,t.tag))}function Mh(e,t){switch(I(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Na($t),W(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ae(t),null;case 13:if(Qe(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));ve()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(cn),null;case 4:return W(),null;case 10:return Na(t.type),null;case 22:case 23:return Qe(t),gn(),e!==null&&A(Fl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Na($t),null;case 25:return null;default:return null}}function xc(e,t){switch(I(t),t.tag){case 3:Na($t),W();break;case 26:case 27:case 5:ae(t);break;case 4:W();break;case 13:Qe(t);break;case 19:A(cn);break;case 10:Na(t.type);break;case 22:case 23:Qe(t),gn(),e!==null&&A(Fl);break;case 24:Na($t)}}function ni(e,t){try{var a=t.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var m=a.create,b=a.inst;o=m(),b.destroy=o}a=a.next}while(a!==d)}}catch(B){Bt(t,t.return,B)}}function ka(e,t,a){try{var o=t.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&e)===e){var b=o.inst,B=b.destroy;if(B!==void 0){b.destroy=void 0,d=t;var J=a;try{B()}catch(de){Bt(d,J,de)}}}o=o.next}while(o!==m)}}catch(de){Bt(t,t.return,de)}}function Rc(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{fe(t,a)}catch(o){Bt(e,e.return,o)}}}function Dc(e,t,a){a.props=da(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Bt(e,t,o)}}function Al(e,t){try{var a=e.ref;if(a!==null){var o=e.stateNode;switch(e.tag){case 26:case 27:case 5:var d=ri(o);break;default:d=o}typeof a=="function"?e.refCleanup=a(d):a.current=d}}catch(m){Bt(e,t,m)}}function Vn(e,t){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){Bt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Bt(e,t,d)}else a.current=null}function Oc(e){var t=e.type,a=e.memoizedProps,o=e.stateNode;try{gp(o,t,a,e)}catch(d){Bt(e,e.return,d)}}function Nc(e,t,a){try{yp(e.stateNode,e.type,a,t,e)}catch(o){Bt(e,e.return,o)}}function zc(e){return e.tag===5||e.tag===3||(ta?e.tag===26:!1)||(Rn?e.tag===27:!1)||e.tag===4}function ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!Rn||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uu(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?Ep(a,e,t):pp(a,e);else if(!(o===4||Rn&&o===27)&&(e=e.child,e!==null))for(uu(e,t,a),e=e.sibling;e!==null;)uu(e,t,a),e=e.sibling}function Vi(e,t,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?Sp(a,e,t):hp(a,e);else if(!(o===4||Rn&&o===27)&&(e=e.child,e!==null))for(Vi(e,t,a),e=e.sibling;e!==null;)Vi(e,t,a),e=e.sibling}function wc(e,t,a){e=e.containerInfo;try{Rf(e,a)}catch(o){Bt(t,t.return,o)}}function Ch(e,t){for(Kh(e.containerInfo),dn=t;dn!==null;)if(e=dn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,dn=t;else for(;dn!==null;){e=dn;var a=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&a!==null){t=void 0;var o=e,d=a.memoizedProps;a=a.memoizedState;var m=o.stateNode;try{var b=da(o.type,d,o.elementType===o.type);t=m.getSnapshotBeforeUpdate(b,a),m.__reactInternalSnapshotBeforeUpdate=t}catch(B){Bt(o,o.return,B)}}break;case 3:(t&1024)!==0&&xn&&Ap(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,dn=t;break}dn=e.return}return b=Jf,Jf=!1,b}function Bc(e,t,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:za(e,a),o&4&&ni(5,a);break;case 1:if(za(e,a),o&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(B){Bt(a,a.return,B)}else{var d=da(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(B){Bt(a,a.return,B)}}o&64&&Rc(a),o&512&&Al(a,a.return);break;case 3:if(za(e,a),o&64&&(o=a.updateQueue,o!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=ri(a.child.stateNode);break;case 1:e=a.child.stateNode}try{fe(o,e)}catch(B){Bt(a,a.return,B)}}break;case 26:if(ta){za(e,a),o&512&&Al(a,a.return);break}case 27:case 5:za(e,a),t===null&&o&4&&Oc(a),o&512&&Al(a,a.return);break;case 12:za(e,a);break;case 13:za(e,a),o&4&&jc(e,a);break;case 22:if(d=a.memoizedState!==null||Fa,!d){t=t!==null&&t.memoizedState!==null||en;var m=Fa,b=en;Fa=d,(en=t)&&!b?Ja(e,a,(a.subtreeFlags&8772)!==0):za(e,a),Fa=m,en=b}o&512&&(a.memoizedProps.mode==="manual"?Al(a,a.return):Vn(a,a.return));break;default:za(e,a)}}function Gc(e){var t=e.alternate;t!==null&&(e.alternate=null,Gc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&tp(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function va(e,t,a){for(a=a.child;a!==null;)su(e,t,a),a=a.sibling}function su(e,t,a){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(ui,a)}catch{}switch(a.tag){case 26:if(ta){en||Vn(a,t),va(e,t,a),a.memoizedState?Hf(a.memoizedState):a.stateNode&&Lf(a.stateNode);break}case 27:if(Rn){en||Vn(a,t);var o=sn,d=Pn;sn=a.stateNode,va(e,t,a),nm(a.stateNode),sn=o,Pn=d;break}case 5:en||Vn(a,t);case 6:if(xn){if(o=sn,d=Pn,sn=null,va(e,t,a),sn=o,Pn=d,sn!==null)if(Pn)try{_p(sn,a.stateNode)}catch(m){Bt(a,t,m)}else try{bp(sn,a.stateNode)}catch(m){Bt(a,t,m)}}else va(e,t,a);break;case 18:xn&&sn!==null&&(Pn?Qp(sn,a.stateNode):Zp(sn,a.stateNode));break;case 4:xn?(o=sn,d=Pn,sn=a.stateNode.containerInfo,Pn=!0,va(e,t,a),sn=o,Pn=d):(nl&&wc(a.stateNode,a,Af()),va(e,t,a));break;case 0:case 11:case 14:case 15:en||ka(2,a,t),en||ka(4,a,t),va(e,t,a);break;case 1:en||(Vn(a,t),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Dc(a,t,o)),va(e,t,a);break;case 21:va(e,t,a);break;case 22:en||Vn(a,t),en=(o=en)||a.memoizedState!==null,va(e,t,a),en=o;break;default:va(e,t,a)}}function jc(e,t){if(ea&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xp(e)}catch(a){Bt(t,t.return,a)}}function Uh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new kf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new kf),t;default:throw Error(r(435,e.tag))}}function cu(e,t){var a=Uh(e);t.forEach(function(o){var d=wh.bind(null,e,o);a.has(o)||(a.add(o),o.then(d,d))})}function jn(e,t){var a=t.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],m=e,b=t;if(xn){var B=b;e:for(;B!==null;){switch(B.tag){case 27:case 5:sn=B.stateNode,Pn=!1;break e;case 3:sn=B.stateNode.containerInfo,Pn=!0;break e;case 4:sn=B.stateNode.containerInfo,Pn=!0;break e}B=B.return}if(sn===null)throw Error(r(160));su(m,b,d),sn=null,Pn=!1}else su(m,b,d);m=d.alternate,m!==null&&(m.return=null),d.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Hc(t,e),t=t.sibling}function Hc(e,t){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jn(t,e),Yn(e),o&4&&(ka(3,e,e.return),ni(3,e),ka(5,e,e.return));break;case 1:jn(t,e),Yn(e),o&512&&(en||a===null||Vn(a,a.return)),o&64&&Fa&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:if(ta){var d=ma;jn(t,e),Yn(e),o&512&&(en||a===null||Vn(a,a.return)),o&4&&(o=a!==null?a.memoizedState:null,t=e.memoizedState,a===null?t===null?e.stateNode===null?e.stateNode=Ip(d,e.type,e.memoizedProps,e):Ff(d,e.type,e.stateNode):e.stateNode=jf(d,t,e.memoizedProps):o!==t?(o===null?a.stateNode!==null&&Lf(a.stateNode):Hf(o),t===null?Ff(d,e.type,e.stateNode):jf(d,t,e.memoizedProps)):t===null&&e.stateNode!==null&&Nc(e,e.memoizedProps,a.memoizedProps));break}case 27:if(Rn&&o&4&&e.alternate===null){d=e.stateNode;var m=e.memoizedProps;try{em(d),tm(e.type,m,d,e)}catch(Me){Bt(e,e.return,Me)}}case 5:if(jn(t,e),Yn(e),o&512&&(en||a===null||Vn(a,a.return)),xn){if(e.flags&32){t=e.stateNode;try{Uf(t)}catch(Me){Bt(e,e.return,Me)}}o&4&&e.stateNode!=null&&(t=e.memoizedProps,Nc(e,t,a!==null?a.memoizedProps:t)),o&1024&&(Wu=!0)}break;case 6:if(jn(t,e),Yn(e),o&4&&xn){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=a!==null?a.memoizedProps:o,t=e.stateNode;try{mp(t,a,o)}catch(Me){Bt(e,e.return,Me)}}break;case 3:if(ta?(Jp(),d=ma,ma=Hu(t.containerInfo),jn(t,e),ma=d):jn(t,e),Yn(e),o&4){if(xn&&ea&&a!==null&&a.memoizedState.isDehydrated)try{qp(t.containerInfo)}catch(Me){Bt(e,e.return,Me)}if(nl){o=t.containerInfo,a=t.pendingChildren;try{Rf(o,a)}catch(Me){Bt(e,e.return,Me)}}}Wu&&(Wu=!1,Fc(e));break;case 4:ta?(a=ma,ma=Hu(e.stateNode.containerInfo),jn(t,e),Yn(e),ma=a):(jn(t,e),Yn(e)),o&4&&nl&&wc(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:jn(t,e),Yn(e);break;case 13:jn(t,e),Yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ns=ha()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,cu(e,o)));break;case 22:o&512&&(en||a===null||Vn(a,a.return)),d=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,B=Fa,J=en;if(Fa=B||d,en=J||b,jn(t,e),en=J,Fa=B,Yn(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,o&8192&&(t._visibility=d?t._visibility&-2:t._visibility|1,d&&(t=Fa||en,a===null||b||t||nr(e)),xn&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){e:if(a=null,xn)for(t=e;;){if(t.tag===5||ta&&t.tag===26||Rn&&t.tag===27){if(a===null){b=a=t;try{m=b.stateNode,d?Tp(m):Cp(b.stateNode,b.memoizedProps)}catch(Me){Bt(b,b.return,Me)}}}else if(t.tag===6){if(a===null){b=t;try{var de=b.stateNode;d?Mp(de):Up(de,b.memoizedProps)}catch(Me){Bt(b,b.return,Me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,cu(e,a))));break;case 19:jn(t,e),Yn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,cu(e,o)));break;case 21:break;default:jn(t,e),Yn(e)}}function Yn(e){var t=e.flags;if(t&2){try{if(xn&&(!Rn||e.tag!==27)){e:{for(var a=e.return;a!==null;){if(zc(a)){var o=a;break e}a=a.return}throw Error(r(160))}switch(o.tag){case 27:if(Rn){var d=o.stateNode,m=ou(e);Vi(e,m,d);break}case 5:var b=o.stateNode;o.flags&32&&(Uf(b),o.flags&=-33);var B=ou(e);Vi(e,B,b);break;case 3:case 4:var J=o.stateNode.containerInfo,de=ou(e);uu(e,de,J);break;default:throw Error(r(161))}}}catch(Me){Bt(e,e.return,Me)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fc(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fc(t),t.tag===5&&t.flags&1024&&rp(t.stateNode),e=e.sibling}}function za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Bc(e,t.alternate,t),t=t.sibling}function nr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ka(4,t,t.return),nr(t);break;case 1:Vn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Dc(t,t.return,a),nr(t);break;case 26:case 27:case 5:Vn(t,t.return),nr(t);break;case 22:Vn(t,t.return),t.memoizedState===null&&nr(t);break;default:nr(t)}e=e.sibling}}function Ja(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,d=e,m=t,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ja(d,m,a),ni(4,m);break;case 1:if(Ja(d,m,a),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(de){Bt(o,o.return,de)}if(o=m,d=o.updateQueue,d!==null){var B=o.stateNode;try{var J=d.shared.hiddenCallbacks;if(J!==null)for(d.shared.hiddenCallbacks=null,d=0;d<J.length;d++)gt(J[d],B)}catch(de){Bt(o,o.return,de)}}a&&b&64&&Rc(m),Al(m,m.return);break;case 26:case 27:case 5:Ja(d,m,a),a&&o===null&&b&4&&Oc(m),Al(m,m.return);break;case 12:Ja(d,m,a);break;case 13:Ja(d,m,a),a&&b&4&&jc(d,m);break;case 22:m.memoizedState===null&&Ja(d,m,a),Al(m,m.return);break;default:Ja(d,m,a)}t=t.sibling}}function fu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ei(a))}function du(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e))}function Wa(e,t,a,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lc(e,t,a,o),t=t.sibling}function Lc(e,t,a,o){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Wa(e,t,a,o),d&2048&&ni(9,t);break;case 3:Wa(e,t,a,o),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ei(e)));break;case 12:if(d&2048){Wa(e,t,a,o),e=t.stateNode;try{var m=t.memoizedProps,b=m.id,B=m.onPostCommit;typeof B=="function"&&B(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(J){Bt(t,t.return,J)}}else Wa(e,t,a,o);break;case 23:break;case 22:m=t.stateNode,t.memoizedState!==null?m._visibility&4?Wa(e,t,a,o):ai(e,t):m._visibility&4?Wa(e,t,a,o):(m._visibility|=4,ar(e,t,a,o,(t.subtreeFlags&10256)!==0)),d&2048&&fu(t.alternate,t);break;case 24:Wa(e,t,a,o),d&2048&&du(t.alternate,t);break;default:Wa(e,t,a,o)}}function ar(e,t,a,o,d){for(d=d&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var m=e,b=t,B=a,J=o,de=b.flags;switch(b.tag){case 0:case 11:case 15:ar(m,b,B,J,d),ni(8,b);break;case 23:break;case 22:var Me=b.stateNode;b.memoizedState!==null?Me._visibility&4?ar(m,b,B,J,d):ai(m,b):(Me._visibility|=4,ar(m,b,B,J,d)),d&&de&2048&&fu(b.alternate,b);break;case 24:ar(m,b,B,J,d),d&&de&2048&&du(b.alternate,b);break;default:ar(m,b,B,J,d)}t=t.sibling}}function ai(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,o=t,d=o.flags;switch(o.tag){case 22:ai(a,o),d&2048&&fu(o.alternate,o);break;case 24:ai(a,o),d&2048&&du(o.alternate,o);break;default:ai(a,o)}t=t.sibling}}function xl(e){if(e.subtreeFlags&Tr)for(e=e.child;e!==null;)Vc(e),e=e.sibling}function Vc(e){switch(e.tag){case 26:xl(e),e.flags&Tr&&(e.memoizedState!==null?$p(ma,e.memoizedState,e.memoizedProps):Cf(e.type,e.memoizedProps));break;case 5:xl(e),e.flags&Tr&&Cf(e.type,e.memoizedProps);break;case 3:case 4:if(ta){var t=ma;ma=Hu(e.stateNode.containerInfo),xl(e),ma=t}else xl(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Tr,Tr=16777216,xl(e),Tr=t):xl(e));break;default:xl(e)}}function Yc(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function li(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];dn=o,Xc(o,e)}Yc(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qc(e),e=e.sibling}function qc(e){switch(e.tag){case 0:case 11:case 15:li(e),e.flags&2048&&ka(9,e,e.return);break;case 3:li(e);break;case 12:li(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,Yi(e)):li(e);break;default:li(e)}}function Yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var o=t[a];dn=o,Xc(o,e)}Yc(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ka(8,t,t.return),Yi(t);break;case 22:a=t.stateNode,a._visibility&4&&(a._visibility&=-5,Yi(t));break;default:Yi(t)}e=e.sibling}}function Xc(e,t){for(;dn!==null;){var a=dn;switch(a.tag){case 0:case 11:case 15:ka(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ei(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,dn=o;else e:for(a=e;dn!==null;){o=dn;var d=o.sibling,m=o.return;if(Gc(o),o===a){dn=null;break e}if(d!==null){d.return=m,dn=d;break e}dn=m}}}function vu(e){var t=Tf(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(r(364));return t}if(e=up(e),e===null)throw Error(r(362));return e.stateNode.current}function hu(e,t){var a=e.tag;switch(t.$$typeof){case oo:if(e.type===t.value)return!0;break;case uo:e:{for(t=t.value,e=[e,0],a=0;a<e.length;){var o=e[a++],d=o.tag,m=e[a++],b=t[m];if(d!==5&&d!==26&&d!==27||!oi(o)){for(;b!=null&&hu(o,b);)m++,b=t[m];if(m===t.length){t=!0;break e}else for(o=o.child;o!==null;)e.push(o,m),o=o.sibling}}t=!1}return t;case so:if((a===5||a===26||a===27)&&fp(e.stateNode,t.value))return!0;break;case fo:if((a===5||a===6||a===26||a===27)&&(e=cp(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case co:if((a===5||a===26||a===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function pu(e){switch(e.$$typeof){case oo:return"<"+(c(e.value)||"Unknown")+">";case uo:return":has("+(pu(e)||"")+")";case so:return'[role="'+e.value+'"]';case fo:return'"'+e.value+'"';case co:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function Zc(e,t){var a=[];e=[e,0];for(var o=0;o<e.length;){var d=e[o++],m=d.tag,b=e[o++],B=t[b];if(m!==5&&m!==26&&m!==27||!oi(d)){for(;B!=null&&hu(d,B);)b++,B=t[b];if(b===t.length)a.push(d);else for(d=d.child;d!==null;)e.push(d,b),d=d.sibling}}return a}function mu(e,t){if(!ii)throw Error(r(363));e=vu(e),e=Zc(e,t),t=[],e=Array.from(e);for(var a=0;a<e.length;){var o=e[a++],d=o.tag;if(d===5||d===26||d===27)oi(o)||t.push(o.stateNode);else for(o=o.child;o!==null;)e.push(o),o=o.sibling}return t}function qn(){if((jt&2)!==0&&Tt!==0)return Tt&-Tt;if(lt.T!==null){var e=mr;return e!==0?e:je()}return $h()}function Qc(){ia===0&&(ia=(Tt&536870912)===0||At?D():536870912);var e=ra.current;return e!==null&&(e.flags|=32),ia}function Nn(e,t,a){(e===Ft&&Lt===2||e.cancelPendingCommit!==null)&&(lr(e,0),wa(e,Tt,ia,!1)),ie(e,a),((jt&2)===0||e!==Ft)&&(e===Ft&&((jt&2)===0&&(Ll|=a),tn===4&&wa(e,Tt,ia,!1)),xe(e))}function Kc(e,t,a){if((jt&6)!==0)throw Error(r(327));var o=!a&&(t&60)===0&&(t&e.expiredLanes)===0||G(e,t),d=o?Rh(e,t):Eu(e,t,!0),m=o;do{if(d===0){Mr&&!o&&wa(e,t,0,!1);break}else if(d===6)wa(e,t,0,!La);else{if(a=e.current.alternate,m&&!Ah(a)){d=Eu(e,t,!1),m=!1;continue}if(d===2){if(m=t,e.errorRecoveryDisabledLanes&m)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var B=e;d=pi;var J=ea&&B.current.memoizedState.isDehydrated;if(J&&(lr(B,b).flags|=256),b=Eu(B,b,!1),b!==2){if($u&&!J){B.errorRecoveryDisabledLanes|=m,Ll|=m,d=4;break e}m=Ta,Ta=d,m!==null&&gu(m)}d=b}if(m=!1,d!==2)continue}}if(d===1){lr(e,0),wa(e,t,0,!0);break}e:{switch(o=e,d){case 0:case 1:throw Error(r(345));case 4:if((t&4194176)===t){wa(o,t,ia,!La);break e}break;case 2:Ta=null;break;case 3:case 5:break;default:throw Error(r(329))}if(o.finishedWork=a,o.finishedLanes=t,(t&62914560)===t&&(m=ns+300-ha(),10<m)){if(wa(o,t,ia,!La),O(o,0)!==0)break e;o.timeoutHandle=kh(Pc.bind(null,o,a,Ta,vo,ts,t,ia,Ll,Cr,La,2,-0,0),m);break e}Pc(o,a,Ta,vo,ts,t,ia,Ll,Cr,La,0,-0,0)}}break}while(!0);xe(e)}function gu(e){Ta===null?Ta=e:Ta.push.apply(Ta,e)}function Pc(e,t,a,o,d,m,b,B,J,de,Me,Oe,ze){var st=t.subtreeFlags;if((st&8192||(st&16785408)===16785408)&&(ap(),Vc(t),t=lp(),t!==null)){e.cancelPendingCommit=t(af.bind(null,e,a,o,d,b,B,J,1,Oe,ze)),wa(e,m,b,!de);return}af(e,a,o,d,b,B,J,Me,Oe,ze)}function Ah(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],m=d.getSnapshot;d=d.value;try{if(!Kn(m(),d))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wa(e,t,a,o){t&=~es,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var d=t;0<d;){var m=31-Zn(d),b=1<<m;o[m]=-1,d&=~b}a!==0&&X(e,a,t)}function Ic(){return(jt&6)===0?(he(0),!1):!0}function yu(){if(mt!==null){if(Lt===0)var e=mt.return;else e=mt,Ha=Hl=null,ye(e),Sr=null,di=0,e=mt;for(;e!==null;)xc(e.alternate,e),e=e.return;mt=null}}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==Bu&&(e.timeoutHandle=Bu,Jh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),yu(),Ft=e,mt=a=$a(e.current,null),Tt=t,Lt=0,In=null,La=!1,Mr=G(e,t),$u=!1,Cr=ia=es=Ll=ol=tn=0,Ta=pi=null,ts=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var d=31-Zn(o),m=1<<d;t|=e[d],o&=~m}return Va=t,Be(),a}function kc(e,t){ft=null,lt.H=_a,t===fi?(t=zt(),Lt=3):t===Pu?(t=zt(),Lt=4):Lt=t===Pf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,In=t,mt===null&&(tn=1,Sa(e,Z(t,e.current)))}function Jc(){var e=ra.current;return e===null?!0:(Tt&4194176)===Tt?ba===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?e===ba:!1}function Wc(){var e=lt.H;return lt.H=_a,e===null?_a:e}function $c(){var e=lt.A;return lt.A=mm,e}function Su(){tn=4,La||(Tt&4194176)!==Tt&&ra.current!==null||(Mr=!0),(ol&134217727)===0&&(Ll&134217727)===0||Ft===null||wa(Ft,Tt,ia,!1)}function Eu(e,t,a){var o=jt;jt|=2;var d=Wc(),m=$c();(Ft!==e||Tt!==t)&&(vo=null,lr(e,t)),t=!1;var b=tn;e:do try{if(Lt!==0&&mt!==null){var B=mt,J=In;switch(Lt){case 8:yu(),b=6;break e;case 3:case 2:case 6:ra.current===null&&(t=!0);var de=Lt;if(Lt=0,In=null,rr(e,B,J,de),a&&Mr){b=0;break e}break;default:de=Lt,Lt=0,In=null,rr(e,B,J,de)}}xh(),b=tn;break}catch(Me){kc(e,Me)}while(!0);return t&&e.shellSuspendCounter++,Ha=Hl=null,jt=o,lt.H=d,lt.A=m,mt===null&&(Ft=null,Tt=0,Be()),b}function xh(){for(;mt!==null;)ef(mt)}function Rh(e,t){var a=jt;jt|=2;var o=Wc(),d=$c();Ft!==e||Tt!==t?(vo=null,mi=ha()+500,lr(e,t)):Mr=G(e,t);e:do try{if(Lt!==0&&mt!==null){t=mt;var m=In;t:switch(Lt){case 1:Lt=0,In=null,rr(e,t,m,1);break;case 2:if(pn(m)){Lt=0,In=null,tf(t);break}t=function(){Lt===2&&Ft===e&&(Lt=7),xe(e)},m.then(t,t);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:pn(m)?(Lt=0,In=null,tf(t)):(Lt=0,In=null,rr(e,t,m,7));break;case 5:var b=null;switch(mt.tag){case 26:b=mt.memoizedState;case 5:case 27:var B=mt,J=B.type,de=B.pendingProps;if(b?Vf(b):Mf(J,de)){Lt=0,In=null;var Me=B.sibling;if(Me!==null)mt=Me;else{var Oe=B.return;Oe!==null?(mt=Oe,qi(Oe)):mt=null}break t}}Lt=0,In=null,rr(e,t,m,5);break;case 6:Lt=0,In=null,rr(e,t,m,6);break;case 8:yu(),tn=6;break e;default:throw Error(r(462))}}Dh();break}catch(ze){kc(e,ze)}while(!0);return Ha=Hl=null,lt.H=o,lt.A=d,jt=a,mt!==null?0:(Ft=null,Tt=0,Be(),tn)}function Dh(){for(;mt!==null&&!rm();)ef(mt)}function ef(e){var t=bc(e.alternate,e,Va);e.memoizedProps=e.pendingProps,t===null?qi(e):mt=t}function tf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Wr(a,t,t.pendingProps,t.type,void 0,Tt);break;case 11:t=Wr(a,t,t.pendingProps,t.type.render,t.ref,Tt);break;case 5:ye(t);default:xc(a,t),t=mt=uf(t,Va),t=bc(a,t,Va)}e.memoizedProps=e.pendingProps,t===null?qi(e):mt=t}function rr(e,t,a,o){Ha=Hl=null,ye(t),Sr=null,di=0;var d=t.return;try{if(Qo(e,d,t,a,Tt)){tn=1,Sa(e,Z(a,e.current)),mt=null;return}}catch(m){if(d!==null)throw mt=d,m;tn=1,Sa(e,Z(a,e.current)),mt=null;return}t.flags&32768?(At||o===1?e=!0:Mr||(Tt&536870912)!==0?e=!1:(La=e=!0,(o===2||o===3||o===6)&&(o=ra.current,o!==null&&o.tag===13&&(o.flags|=16384))),nf(t,e)):qi(t)}function qi(e){var t=e;do{if((t.flags&32768)!==0){nf(t,La);return}e=t.return;var a=Th(t.alternate,t,Va);if(a!==null){mt=a;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);tn===0&&(tn=5)}function nf(e,t){do{var a=Mh(e.alternate,e);if(a!==null){a.flags&=32767,mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){mt=e;return}mt=e=a}while(e!==null);tn=6,mt=null}function af(e,t,a,o,d,m,b,B,J,de){var Me=lt.T,Oe=Ol();try{Hn(2),lt.T=null,Oh(e,t,a,o,Oe,d,m,b,B,J,de)}finally{lt.T=Me,Hn(Oe)}}function Oh(e,t,a,o,d,m,b,B){do Rl();while(Vl!==null);if((jt&6)!==0)throw Error(r(327));var J=e.finishedWork;if(o=e.finishedLanes,J===null)return null;if(e.finishedWork=null,e.finishedLanes=0,J===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var de=J.lanes|J.childLanes;if(de|=qu,w(e,o,de,m,b,B),e===Ft&&(mt=Ft=null,Tt=0),(J.subtreeFlags&10256)===0&&(J.flags&10256)===0||ho||(ho=!0,as=de,ls=a,Bh(Vu,function(){return Rl(),null})),a=(J.flags&15990)!==0,(J.subtreeFlags&15990)!==0||a?(a=lt.T,lt.T=null,m=Ol(),Hn(2),b=jt,jt|=4,Ch(e,J),Hc(J,e),Ph(e.containerInfo),e.current=J,Bc(e,J.alternate,J),im(),jt=b,Hn(m),lt.T=a):e.current=J,ho?(ho=!1,Vl=e,gi=o):lf(e,de),de=e.pendingLanes,de===0&&(ul=null),C(J.stateNode),xe(e),t!==null)for(d=e.onRecoverableError,J=0;J<t.length;J++)de=t[J],d(de.value,{componentStack:de.stack});return(gi&3)!==0&&Rl(),de=e.pendingLanes,(o&4194218)!==0&&(de&42)!==0?e===rs?yi++:(yi=0,rs=e):yi=0,he(0),null}function lf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ei(t)))}function Rl(){if(Vl!==null){var e=Vl,t=as;as=0;var a=ce(gi),o=32>a?32:a;a=lt.T;var d=Ol();try{if(Hn(o),lt.T=null,Vl===null)var m=!1;else{o=ls,ls=null;var b=Vl,B=gi;if(Vl=null,gi=0,(jt&6)!==0)throw Error(r(331));var J=jt;if(jt|=4,qc(b.current),Lc(b,b.current,B,o),jt=J,he(0,!1),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(ui,b)}catch{}m=!0}return m}finally{Hn(d),lt.T=a,lf(e,t)}}return!1}function rf(e,t,a){t=Z(a,t),t=Da(e.stateNode,t,2),e=Fe(e,t,2),e!==null&&(ie(e,2),xe(e))}function Bt(e,t,a){if(e.tag===3)rf(e,e,a);else for(;t!==null;){if(t.tag===3){rf(t,e,a);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ul===null||!ul.has(o))){e=Z(a,e),a=tr(2),o=Fe(t,a,2),o!==null&&(Un(a,o,t,e),ie(o,2),xe(o));break}}t=t.return}}function bu(e,t,a){var o=e.pingCache;if(o===null){o=e.pingCache=new gm;var d=new Set;o.set(t,d)}else d=o.get(t),d===void 0&&(d=new Set,o.set(t,d));d.has(a)||($u=!0,d.add(a),e=Nh.bind(null,e,t,a),t.then(e,e))}function Nh(e,t,a){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ft===e&&(Tt&a)===a&&(tn===4||tn===3&&(Tt&62914560)===Tt&&300>ha()-ns?(jt&2)===0&&lr(e,0):es|=a,Cr===Tt&&(Cr=0)),xe(e)}function of(e,t){t===0&&(t=L()),e=Ne(e,t),e!==null&&(ie(e,t),xe(e))}function zh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),of(e,a)}function wh(e,t){var a=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(t),of(e,a)}function Bh(e,t){return ki(e,t)}function Gh(e,t,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $a(e,t){var a=e.alternate;return a===null?(a=s(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function uf(e,t){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xi(e,t,a,o,d,m){var b=0;if(o=e,typeof e=="function")_u(e)&&(b=1);else if(typeof e=="string")b=ta&&Rn?Bf(e,a,_n.current)?26:qf(e)?27:5:ta?Bf(e,a,_n.current)?26:5:Rn&&qf(e)?27:5;else e:switch(e){case or:return Dl(a.children,d,m,t);case pf:b=8,d|=24;break;case Au:return e=s(12,a,t,d|2),e.elementType=Au,e.lanes=m,e;case Ru:return e=s(13,a,t,d),e.elementType=Ru,e.lanes=m,e;case Du:return e=s(19,a,t,d),e.elementType=Du,e.lanes=m,e;case gf:return sf(a,d,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lh:case el:b=10;break e;case mf:b=9;break e;case xu:b=11;break e;case Ou:b=14;break e;case tl:b=16,o=null;break e}b=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return t=s(b,a,t,d),t.elementType=e,t.type=o,t.lanes=m,t}function Dl(e,t,a,o){return e=s(7,e,o,t),e.lanes=a,e}function sf(e,t,a,o){e=s(22,e,o,t),e.elementType=gf,e.lanes=a;var d={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var m=d._current;if(m===null)throw Error(r(456));if((d._pendingVisibility&2)===0){var b=Ne(m,2);b!==null&&(d._pendingVisibility|=2,Nn(b,m,2))}},attach:function(){var m=d._current;if(m===null)throw Error(r(456));if((d._pendingVisibility&2)!==0){var b=Ne(m,2);b!==null&&(d._pendingVisibility&=-3,Nn(b,m,2))}}};return e.stateNode=d,e}function Tu(e,t,a){return e=s(6,e,null,t),e.lanes=a,e}function Mu(e,t,a){return t=s(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jh(e,t,a,o,d,m,b,B){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Bu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q(0),this.hiddenUpdates=q(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function cf(e,t,a,o,d,m,b,B,J,de,Me,Oe){return e=new jh(e,t,a,b,B,J,de,Oe),t=1,m===!0&&(t|=24),m=s(3,null,null,t),e.current=m,m.stateNode=e,t=nu(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:t},vt(m),e}function ff(e){return e?(e=cr,e):cr}function df(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=E(t),e=e!==null?T(e):null,e===null?null:ri(e.stateNode)}function vf(e,t,a,o,d,m){d=ff(d),o.context===null?o.context=d:o.pendingContext=d,o=Ze(t),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=Fe(e,o,t),a!==null&&(Nn(a,e,t),He(a,e,t))}function hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cu(e,t){hf(e,t),(e=e.alternate)&&hf(e,t)}var pt={},Hh=Ps(),Xn=S0(),Uu=Object.assign,Fh=Symbol.for("react.element"),Zi=Symbol.for("react.transitional.element"),ir=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),pf=Symbol.for("react.strict_mode"),Au=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),mf=Symbol.for("react.consumer"),el=Symbol.for("react.context"),xu=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Du=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),tl=Symbol.for("react.lazy"),gf=Symbol.for("react.offscreen"),Vh=Symbol.for("react.memo_cache_sentinel"),yf=Symbol.iterator,Yh=Symbol.for("react.client.reference"),lt=Hh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Nu,Sf,zu=!1,Qi=Array.isArray,qh=n.rendererVersion,Xh=n.rendererPackageName,Ef=n.extraDevToolsConfig,ri=n.getPublicInstance,Zh=n.getRootHostContext,Qh=n.getChildHostContext,Kh=n.prepareForCommit,Ph=n.resetAfterCommit,Ih=n.createInstance,wu=n.appendInitialChild,bf=n.finalizeInitialChildren,Ki=n.shouldSetTextContent,_f=n.createTextInstance,kh=n.scheduleTimeout,Jh=n.cancelTimeout,Bu=n.noTimeout,Ba=n.isPrimaryRenderer;n.warnsIfNotActing;var xn=n.supportsMutation,nl=n.supportsPersistence,ea=n.supportsHydration,Tf=n.getInstanceFromNode;n.beforeActiveInstanceBlur,n.afterActiveInstanceBlur;var Wh=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var Hn=n.setCurrentUpdatePriority,Ol=n.getCurrentUpdatePriority,$h=n.resolveUpdatePriority;n.resolveEventType,n.resolveEventTimeStamp;var ep=n.shouldAttemptEagerTransition,tp=n.detachDeletedInstance;n.requestPostPaintCallback;var np=n.maySuspendCommit,Mf=n.preloadInstance,ap=n.startSuspendingCommit,Cf=n.suspendInstance,lp=n.waitForCommitToBeReady,ur=n.NotPendingTransition,Nl=n.HostTransitionContext,rp=n.resetFormInstance;n.bindToConsole;var ip=n.supportsMicrotasks,op=n.scheduleMicrotask,ii=n.supportsTestSelectors,up=n.findFiberRoot,sp=n.getBoundingRect,cp=n.getTextContent,oi=n.isHiddenSubtree,fp=n.matchAccessibilityRole,dp=n.setFocusIfFocusable,vp=n.setupIntersectionObserver,hp=n.appendChild,pp=n.appendChildToContainer,mp=n.commitTextUpdate,gp=n.commitMount,yp=n.commitUpdate,Sp=n.insertBefore,Ep=n.insertInContainerBefore,bp=n.removeChild,_p=n.removeChildFromContainer,Uf=n.resetTextContent,Tp=n.hideInstance,Mp=n.hideTextInstance,Cp=n.unhideInstance,Up=n.unhideTextInstance,Ap=n.clearContainer,xp=n.cloneInstance,Af=n.createContainerChildSet,xf=n.appendChildToContainerChildSet,Rp=n.finalizeContainerChildren,Rf=n.replaceContainerChildren,Df=n.cloneHiddenInstance,Of=n.cloneHiddenTextInstance,Gu=n.isSuspenseInstancePending,ju=n.isSuspenseInstanceFallback,Dp=n.getSuspenseInstanceFallbackErrorDetails,Op=n.registerSuspenseInstanceRetry,Np=n.canHydrateFormStateMarker,zp=n.isFormStateMarkerMatching,Nf=n.getNextHydratableSibling,zf=n.getFirstHydratableChild,wp=n.getFirstHydratableChildWithinContainer,Bp=n.getFirstHydratableChildWithinSuspenseInstance,Gp=n.canHydrateInstance,jp=n.canHydrateTextInstance,Hp=n.canHydrateSuspenseInstance,Fp=n.hydrateInstance,Lp=n.hydrateTextInstance,Vp=n.hydrateSuspenseInstance,Yp=n.getNextHydratableInstanceAfterSuspenseInstance,qp=n.commitHydratedContainer,Xp=n.commitHydratedSuspenseInstance,Zp=n.clearSuspenseBoundary,Qp=n.clearSuspenseBoundaryFromContainer,wf=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var Kp=n.validateHydratableInstance,Pp=n.validateHydratableTextInstance,ta=n.supportsResources,Bf=n.isHostHoistableType,Hu=n.getHoistableRoot,Gf=n.getResource,jf=n.acquireResource,Hf=n.releaseResource,Ip=n.hydrateHoistable,Ff=n.mountHoistable,Lf=n.unmountHoistable,kp=n.createHoistableInstance,Jp=n.prepareToCommitHoistables,Wp=n.mayResourceSuspendCommit,Vf=n.preloadResource,$p=n.suspendResource,Rn=n.supportsSingletons,Yf=n.resolveSingletonInstance,em=n.clearSingleton,tm=n.acquireSingletonInstance,nm=n.releaseSingletonInstance,qf=n.isHostSingletonType,Fu=[],sr=-1,cr={},Zn=Math.clz32?Math.clz32:z,am=Math.log,lm=Math.LN2,Pi=128,Ii=4194304,ki=Xn.unstable_scheduleCallback,Lu=Xn.unstable_cancelCallback,rm=Xn.unstable_shouldYield,im=Xn.unstable_requestPaint,ha=Xn.unstable_now,Xf=Xn.unstable_ImmediatePriority,om=Xn.unstable_UserBlockingPriority,Vu=Xn.unstable_NormalPriority,um=Xn.unstable_IdlePriority,sm=Xn.log,cm=Xn.unstable_setDisableYieldValue,ui=null,Qn=null,Kn=typeof Object.is=="function"?Object.is:ee,Zf=new WeakMap,fr=[],dr=0,Ji=null,Wi=0,na=[],aa=0,zl=null,Ga=1,ja="",_n=U(null),si=U(null),al=U(null),$i=U(null),zn=null,Dn=null,At=!1,pa=null,Ea=!1,Yu=Error(r(519)),la=[],vr=0,qu=0,eo=null,hr=null,Xu=!1,to=!1,Zu=!1,pr=0,ci=null,Qu=0,mr=0,gr=null,ll=!1,Ku=!1,fm=Object.prototype.hasOwnProperty,fi=Error(r(460)),Pu=Error(r(474)),no={then:function(){}},yr=null,Sr=null,di=0,wl=nn(!0),Qf=nn(!1),Er=U(null),ao=U(0),ra=U(null),ba=null,cn=U(0),rl=0,ft=null,Gt=null,un=null,lo=!1,br=!1,Bl=!1,ro=0,vi=0,_r=null,dm=0,Iu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},_a={readContext:An,use:le,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot};_a.useCacheRefresh=Ot,_a.useMemoCache=Ot,_a.useHostTransitionStatus=Ot,_a.useFormState=Ot,_a.useActionState=Ot,_a.useOptimistic=Ot;var Gl={readContext:An,use:le,useCallback:function(e,t){return Se().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:Jl,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,yl(4194308,4,Ua.bind(null,t,e),a)},useLayoutEffect:function(e,t){return yl(4194308,4,e,t)},useInsertionEffect:function(e,t){yl(4,2,e,t)},useMemo:function(e,t){var a=Se();t=t===void 0?null:t;var o=e();if(Bl){k(!0);try{e()}finally{k(!1)}}return a.memoizedState=[o,t],o},useReducer:function(e,t,a){var o=Se();if(a!==void 0){var d=a(t);if(Bl){k(!0);try{a(t)}finally{k(!1)}}}else d=t;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=Bi.bind(null,ft,e),[o.memoizedState,e]},useRef:function(e){var t=Se();return e={current:e},t.memoizedState=e},useState:function(e){e=Ut(e);var t=e.queue,a=Pr.bind(null,ft,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:xa,useDeferredValue:function(e,t){var a=Se();return bl(a,e,t)},useTransition:function(){var e=Ut(!1);return e=Zr.bind(null,ft,e.queue,!0,!1),Se().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var o=ft,d=Se();if(At){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),Ft===null)throw Error(r(349));(Tt&60)!==0||Et(o,t,a)}d.memoizedState=a;var m={value:a,getSnapshot:t};return d.queue=m,Jl(an.bind(null,o,m,e),[e]),o.flags|=2048,fa(9,Ht.bind(null,o,m,a,t),{destroy:void 0},null),a},useId:function(){var e=Se(),t=Ft.identifierPrefix;if(At){var a=ja,o=Ga;a=(o&~(1<<32-Zn(o)-1)).toString(32)+a,t=":"+t+"R"+a,a=ro++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=dm++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Se().memoizedState=Kr.bind(null,ft)}};Gl.useMemoCache=Ct,Gl.useHostTransitionStatus=Tl,Gl.useFormState=En,Gl.useActionState=En,Gl.useOptimistic=function(e){var t=Se();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=$l.bind(null,ft,!0,a),a.dispatch=t,[e,t]};var il={readContext:An,use:le,useCallback:Xr,useContext:An,useEffect:Ca,useImperativeHandle:Aa,useInsertionEffect:qr,useLayoutEffect:El,useMemo:Qa,useReducer:Le,useRef:kl,useState:function(){return Le(Ge)},useDebugValue:xa,useDeferredValue:function(e,t){var a=ge();return Wl(a,Gt.memoizedState,e,t)},useTransition:function(){var e=Le(Ge)[0],t=ge().memoizedState;return[typeof e=="boolean"?e:Te(e),t]},useSyncExternalStore:St,useId:Qr};il.useCacheRefresh=Bn,il.useMemoCache=Ct,il.useHostTransitionStatus=Tl,il.useFormState=On,il.useActionState=On,il.useOptimistic=function(e,t){var a=ge();return Xt(a,Gt,e,t)};var jl={readContext:An,use:le,useCallback:Xr,useContext:An,useEffect:Ca,useImperativeHandle:Aa,useInsertionEffect:qr,useLayoutEffect:El,useMemo:Qa,useReducer:at,useRef:kl,useState:function(){return at(Ge)},useDebugValue:xa,useDeferredValue:function(e,t){var a=ge();return Gt===null?bl(a,e,t):Wl(a,Gt.memoizedState,e,t)},useTransition:function(){var e=at(Ge)[0],t=ge().memoizedState;return[typeof e=="boolean"?e:Te(e),t]},useSyncExternalStore:St,useId:Qr};jl.useCacheRefresh=Bn,jl.useMemoCache=Ct,jl.useHostTransitionStatus=Tl,jl.useFormState=gl,jl.useActionState=gl,jl.useOptimistic=function(e,t){var a=ge();return Gt!==null?Xt(a,Gt,e,t):(a.baseState=e,[e,a.queue.dispatch])};var ku={isMounted:function(e){return(e=e._reactInternals)?g(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var o=qn(),d=Ze(o);d.payload=t,a!=null&&(d.callback=a),t=Fe(e,d,o),t!==null&&(Nn(t,e,o),He(t,e,o))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var o=qn(),d=Ze(o);d.tag=1,d.payload=t,a!=null&&(d.callback=a),t=Fe(e,d,o),t!==null&&(Nn(t,e,o),He(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=qn(),o=Ze(a);o.tag=2,t!=null&&(o.callback=t),t=Fe(e,o,a),t!==null&&(Nn(t,e,a),He(t,e,a))}},Kf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pf=Error(r(461)),fn=!1,Ju={dehydrated:null,treeContext:null,retryLane:0},io=U(null),Hl=null,Ha=null,vm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},hm=Xn.unstable_scheduleCallback,pm=Xn.unstable_NormalPriority,$t={$$typeof:el,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},If=lt.S;lt.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ye(e,t),If!==null&&If(e,t)};var Fl=U(null),Fa=!1,en=!1,Wu=!1,kf=typeof WeakSet=="function"?WeakSet:Set,dn=null,Jf=!1,sn=null,Pn=!1,ma=null,Tr=8192,mm={getCacheForType:function(e){var t=An($t),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},oo=0,uo=1,so=2,co=3,fo=4;if(typeof Symbol=="function"&&Symbol.for){var hi=Symbol.for;oo=hi("selector.component"),uo=hi("selector.has_pseudo_class"),so=hi("selector.role"),co=hi("selector.test_id"),fo=hi("selector.text")}var gm=typeof WeakMap=="function"?WeakMap:Map,jt=0,Ft=null,mt=null,Tt=0,Lt=0,In=null,La=!1,Mr=!1,$u=!1,Va=0,tn=0,ol=0,Ll=0,es=0,ia=0,Cr=0,pi=null,Ta=null,ts=!1,ns=0,mi=1/0,vo=null,ul=null,ho=!1,Vl=null,gi=0,as=0,ls=null,yi=0,rs=null;return pt.attemptContinuousHydration=function(e){if(e.tag===13){var t=Ne(e,67108864);t!==null&&Nn(t,e,67108864),Cu(e,67108864)}},pt.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=qn(),a=Ne(e,t);a!==null&&Nn(a,e,t),Cu(e,t)}},pt.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=N(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var a=1<<31-Zn(t);e.entanglements[1]|=a,t&=~a}xe(e),(jt&6)===0&&(mi=ha()+500,he(0))}}break;case 13:t=Ne(e,2),t!==null&&Nn(t,e,2),Ic(),Cu(e,2)}},pt.batchedUpdates=function(e,t){return e(t)},pt.createComponentSelector=function(e){return{$$typeof:oo,value:e}},pt.createContainer=function(e,t,a,o,d,m,b,B,J,de){return cf(e,t,!1,null,a,o,m,b,B,J,de,null)},pt.createHasPseudoClassSelector=function(e){return{$$typeof:uo,value:e}},pt.createHydrationContainer=function(e,t,a,o,d,m,b,B,J,de,Me,Oe,ze){return e=cf(a,o,!0,e,d,m,B,J,de,Me,Oe,ze),e.context=ff(null),a=e.current,o=qn(),d=Ze(o),d.callback=t??null,Fe(a,d,o),e.current.lanes=o,ie(e,o),xe(e),e},pt.createPortal=function(e,t,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:o==null?null:""+o,children:e,containerInfo:t,implementation:a}},pt.createRoleSelector=function(e){return{$$typeof:so,value:e}},pt.createTestNameSelector=function(e){return{$$typeof:co,value:e}},pt.createTextSelector=function(e){return{$$typeof:fo,value:e}},pt.defaultOnCaughtError=function(e){console.error(e)},pt.defaultOnRecoverableError=function(e){Kf(e)},pt.defaultOnUncaughtError=function(e){Kf(e)},pt.deferredUpdates=function(e){var t=lt.T,a=Ol();try{return Hn(32),lt.T=null,e()}finally{Hn(a),lt.T=t}},pt.discreteUpdates=function(e,t,a,o,d){var m=lt.T,b=Ol();try{return Hn(2),lt.T=null,e(t,a,o,d)}finally{Hn(b),lt.T=m,jt===0&&(mi=ha()+500)}},pt.findAllNodes=mu,pt.findBoundingRects=function(e,t){if(!ii)throw Error(r(363));t=mu(e,t),e=[];for(var a=0;a<t.length;a++)e.push(sp(t[a]));for(t=e.length-1;0<t;t--){a=e[t];for(var o=a.x,d=o+a.width,m=a.y,b=m+a.height,B=t-1;0<=B;B--)if(t!==B){var J=e[B],de=J.x,Me=de+J.width,Oe=J.y,ze=Oe+J.height;if(o>=de&&m>=Oe&&d<=Me&&b<=ze){e.splice(t,1);break}else if(o!==de||a.width!==J.width||ze<m||Oe>b){if(!(m!==Oe||a.height!==J.height||Me<o||de>d)){de>o&&(J.width+=de-o,J.x=o),Me<d&&(J.width=d-de),e.splice(t,1);break}}else{Oe>m&&(J.height+=Oe-m,J.y=m),ze<b&&(J.height=b-Oe),e.splice(t,1);break}}}return e},pt.findHostInstance=df,pt.findHostInstanceWithNoPortals=function(e){return e=E(e),e=e!==null?x(e):null,e===null?null:ri(e.stateNode)},pt.findHostInstanceWithWarning=function(e){return df(e)},pt.flushPassiveEffects=Rl,pt.flushSyncFromReconciler=function(e){var t=jt;jt|=1;var a=lt.T,o=Ol();try{if(Hn(2),lt.T=null,e)return e()}finally{Hn(o),lt.T=a,jt=t,(jt&6)===0&&he(0)}},pt.flushSyncWork=Ic,pt.focusWithin=function(e,t){if(!ii)throw Error(r(363));for(e=vu(e),t=Zc(e,t),t=Array.from(t),e=0;e<t.length;){var a=t[e++],o=a.tag;if(!oi(a)){if((o===5||o===26||o===27)&&dp(a.stateNode))return!0;for(a=a.child;a!==null;)t.push(a),a=a.sibling}}return!1},pt.getFindAllNodesFailureDescription=function(e,t){if(!ii)throw Error(r(363));var a=0,o=[];e=[vu(e),0];for(var d=0;d<e.length;){var m=e[d++],b=m.tag,B=e[d++],J=t[B];if((b!==5&&b!==26&&b!==27||!oi(m))&&(hu(m,J)&&(o.push(pu(J)),B++,B>a&&(a=B)),B<t.length))for(m=m.child;m!==null;)e.push(m,B),m=m.sibling}if(a<t.length){for(e=[];a<t.length;a++)e.push(pu(t[a]));return`findAllNodes was able to match part of the selector:
  `+(o.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},pt.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return ri(e.child.stateNode);default:return e.child.stateNode}},pt.injectIntoDevTools=function(){var e={bundleType:0,version:qh,rendererPackageName:Xh,currentDispatcherRef:lt,findFiberByHostInstance:Tf,reconcilerVersion:"19.0.0"};if(Ef!==null&&(e.rendererConfig=Ef),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ui=t.inject(e),Qn=t}catch{}e=!!t.checkDCE}}return e},pt.isAlreadyRendering=function(){return!1},pt.observeVisibleRects=function(e,t,a,o){if(!ii)throw Error(r(363));e=mu(e,t);var d=vp(e,a,o).disconnect;return{disconnect:function(){d()}}},pt.shouldError=function(){return null},pt.shouldSuspend=function(){return!1},pt.startHostTransition=function(e,t,a,o){if(e.tag!==5)throw Error(r(476));var d=_l(e).queue;Zr(e,d,t,ur,a===null?h:function(){var m=_l(e).next.queue;return Ra(e,m,{},qn()),a(o)})},pt.updateContainer=function(e,t,a,o){var d=t.current,m=qn();return vf(d,m,e,t,a,o),m},pt.updateContainerSync=function(e,t,a,o){return t.tag===0&&Rl(),vf(t.current,2,e,t,a,o),2},pt},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(hs)),hs.exports}var dd;function b0(){return dd||(dd=1,vs.exports=E0()),vs.exports}var _0=b0();const T0=av(_0);var gs={exports:{}},ys={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd;function M0(){return vd||(vd=1,function(i){function n(C,k){var ee=C.length;C.push(k);e:for(;0<ee;){var Z=ee-1>>>1,Y=C[Z];if(0<r(Y,k))C[Z]=k,C[ee]=Y,ee=Z;else break e}}function s(C){return C.length===0?null:C[0]}function h(C){if(C.length===0)return null;var k=C[0],ee=C.pop();if(ee!==k){C[0]=ee;e:for(var Z=0,Y=C.length,R=Y>>>1;Z<R;){var j=2*(Z+1)-1,I=C[j],Q=j+1,W=C[Q];if(0>r(I,ee))Q<Y&&0>r(W,I)?(C[Z]=W,C[Q]=ee,Z=Q):(C[Z]=I,C[j]=ee,Z=j);else if(Q<Y&&0>r(W,ee))C[Z]=W,C[Q]=ee,Z=Q;else break e}}return k}function r(C,k){var ee=C.sortIndex-k.sortIndex;return ee!==0?ee:C.id-k.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var u=[],v=[],p=1,g=null,y=3,E=!1,T=!1,x=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function z(C){for(var k=s(v);k!==null;){if(k.callback===null)h(v);else if(k.startTime<=C)h(v),k.sortIndex=k.expirationTime,n(u,k);else break;k=s(v)}}function N(C){if(x=!1,z(C),!T)if(s(u)!==null)T=!0,F();else{var k=s(v);k!==null&&ce(N,k.startTime-C)}}var O=!1,G=-1,V=5,D=-1;function L(){return!(i.unstable_now()-D<V)}function q(){if(O){var C=i.unstable_now();D=C;var k=!0;try{e:{T=!1,x&&(x=!1,A(G),G=-1),E=!0;var ee=y;try{t:{for(z(C),g=s(u);g!==null&&!(g.expirationTime>C&&L());){var Z=g.callback;if(typeof Z=="function"){g.callback=null,y=g.priorityLevel;var Y=Z(g.expirationTime<=C);if(C=i.unstable_now(),typeof Y=="function"){g.callback=Y,z(C),k=!0;break t}g===s(u)&&h(u),z(C)}else h(u);g=s(u)}if(g!==null)k=!0;else{var R=s(v);R!==null&&ce(N,R.startTime-C),k=!1}}break e}finally{g=null,y=ee,E=!1}k=void 0}}finally{k?ie():O=!1}}}var ie;if(typeof M=="function")ie=function(){M(q)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,X=w.port2;w.port1.onmessage=q,ie=function(){X.postMessage(null)}}else ie=function(){U(q,0)};function F(){O||(O=!0,ie())}function ce(C,k){G=U(function(){C(i.unstable_now())},k)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(C){C.callback=null},i.unstable_continueExecution=function(){T||E||(T=!0,F())},i.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<C?Math.floor(1e3/C):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return s(u)},i.unstable_next=function(C){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var ee=y;y=k;try{return C()}finally{y=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(C,k){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var ee=y;y=C;try{return k()}finally{y=ee}},i.unstable_scheduleCallback=function(C,k,ee){var Z=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Z+ee:Z):ee=Z,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,C={id:p++,callback:k,priorityLevel:C,startTime:ee,expirationTime:Y,sortIndex:-1},ee>Z?(C.sortIndex=ee,n(v,C),s(u)===null&&C===s(v)&&(x?(A(G),G=-1):x=!0,ce(N,ee-Z))):(C.sortIndex=Y,n(u,C),T||E||(T=!0,F())),C},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(C){var k=y;return function(){var ee=y;y=k;try{return C.apply(this,arguments)}finally{y=ee}}}}(ys)),ys}var hd;function C0(){return hd||(hd=1,gs.exports=M0()),gs.exports}var pd=C0();const U0=i=>typeof i=="object"&&typeof i.then=="function",Zl=[];function vv(i,n,s=(h,r)=>h===r){if(i===n)return!0;if(!i||!n)return!1;const h=i.length;if(n.length!==h)return!1;for(let r=0;r<h;r++)if(!s(i[r],n[r]))return!1;return!0}function hv(i,n=null,s=!1,h={}){n===null&&(n=[i]);for(const l of Zl)if(vv(n,l.keys,l.equal)){if(s)return;if(Object.prototype.hasOwnProperty.call(l,"error"))throw l.error;if(Object.prototype.hasOwnProperty.call(l,"response"))return h.lifespan&&h.lifespan>0&&(l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout(l.remove,h.lifespan)),l.response;if(!s)throw l.promise}const r={keys:n,equal:h.equal,remove:()=>{const l=Zl.indexOf(r);l!==-1&&Zl.splice(l,1)},promise:(U0(i)?i:i(...n)).then(l=>{r.response=l,h.lifespan&&h.lifespan>0&&(r.timeout=setTimeout(r.remove,h.lifespan))}).catch(l=>r.error=l)};if(Zl.push(r),!s)throw r.promise}const Ws=(i,n,s)=>hv(i,n,!1,s),A0=(i,n,s)=>void hv(i,n,!0,s),x0=i=>{if(i===void 0||i.length===0)Zl.splice(0,Zl.length);else{const n=Zl.find(s=>vv(i,s.keys,s.equal));n&&n.remove()}};function $s(i,n,s){if(!i)return;if(s(i)===!0)return i;let h=n?i.return:i.child;for(;h;){const r=$s(h,n,s);if(r)return r;h=n?null:h.sibling}}function pv(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const ec=pv($.createContext(null));class mv extends $.Component{render(){return $.createElement(ec.Provider,{value:this._reactInternals},this.props.children)}}function gv(){const i=$.useContext(ec);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=$.useId();return $.useMemo(()=>{for(const s of[i,i==null?void 0:i.alternate]){if(!s)continue;const h=$s(s,!1,r=>{let l=r.memoizedState;for(;l;){if(l.memoizedState===n)return!0;l=l.next}});if(h)return h}},[i,n])}const R0=Symbol.for("react.context"),D0=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===R0;function O0(){const i=gv(),[n]=$.useState(()=>new Map);n.clear();let s=i;for(;s;){const h=s.type;D0(h)&&h!==ec&&!n.has(h)&&n.set(h,$.use(pv(h))),s=s.return}return n}function N0(){const i=O0();return $.useMemo(()=>Array.from(i.keys()).reduce((n,s)=>h=>$.createElement(n,null,$.createElement(s.Provider,{...h,value:i.get(s)})),n=>$.createElement(mv,{...n})),[i])}function yv(i){let n=i.root;for(;n.getState().previousRoot;)n=n.getState().previousRoot;return n}const Sv=i=>i&&i.isOrthographicCamera,z0=i=>i&&i.hasOwnProperty("current"),w0=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),Ni=((i,n)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((n=window.navigator)==null?void 0:n.product)==="ReactNative"))()?$.useLayoutEffect:$.useEffect;function tc(i){const n=$.useRef(i);return Ni(()=>void(n.current=i),[i]),n}function B0(){const i=gv(),n=N0();return $.useMemo(()=>({children:s})=>{const r=!!$s(i,!0,l=>l.type===$.StrictMode)?$.StrictMode:$.Fragment;return We.jsx(r,{children:We.jsx(n,{children:s})})},[i,n])}function G0({set:i}){return Ni(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const j0=(i=>(i=class extends $.Component{constructor(...s){super(...s),this.state={error:!1}}componentDidCatch(s){this.props.set(s)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function Ev(i){var n;const s=typeof window<"u"?(n=window.devicePixelRatio)!=null?n:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],s),i[1]):i}function Ur(i){var n;return(n=i.__r3f)==null?void 0:n.root.getState()}const Qt={obj:i=>i===Object(i)&&!Qt.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,n,{arrays:s="shallow",objects:h="reference",strict:r=!0}={}){if(typeof i!=typeof n||!!i!=!!n)return!1;if(Qt.str(i)||Qt.num(i)||Qt.boo(i))return i===n;const l=Qt.obj(i);if(l&&h==="reference")return i===n;const c=Qt.arr(i);if(c&&s==="reference")return i===n;if((c||l)&&i===n)return!0;let f;for(f in i)if(!(f in n))return!1;if(l&&s==="shallow"&&h==="shallow"){for(f in r?n:i)if(!Qt.equ(i[f],n[f],{strict:r,objects:"reference"}))return!1}else for(f in r?n:i)if(i[f]!==n[f])return!1;if(Qt.und(f)){if(c&&i.length===0&&n.length===0||l&&Object.keys(i).length===0&&Object.keys(n).length===0)return!0;if(i!==n)return!1}return!0}};function H0(i){const n={nodes:{},materials:{},meshes:{}};return i&&i.traverse(s=>{s.name&&(n.nodes[s.name]=s),s.material&&!n.materials[s.material.name]&&(n.materials[s.material.name]=s.material),s.isMesh&&!n.meshes[s.name]&&(n.meshes[s.name]=s)}),n}function F0(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const n in i){const s=i[n];(s==null?void 0:s.type)!=="Scene"&&(s==null||s.dispose==null||s.dispose())}}const bv=["children","key","ref"];function L0(i){const n={};for(const s in i)bv.includes(s)||(n[s]=i[s]);return n}function zo(i,n,s,h){const r=i;let l=r==null?void 0:r.__r3f;return l||(l={root:n,type:s,parent:null,children:[],props:L0(h),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=l)),l}function Ri(i,n){let s=i[n];if(!n.includes("-"))return{root:i,key:n,target:s};s=i;for(const r of n.split("-")){var h;n=r,i=s,s=(h=s)==null?void 0:h[n]}return{root:i,key:n,target:s}}const md=/-\d+$/;function wo(i,n){if(Qt.str(n.props.attach)){if(md.test(n.props.attach)){const r=n.props.attach.replace(md,""),{root:l,key:c}=Ri(i.object,r);Array.isArray(l[c])||(l[c]=[])}const{root:s,key:h}=Ri(i.object,n.props.attach);n.previousAttach=s[h],s[h]=n.object}else Qt.fun(n.props.attach)&&(n.previousAttach=n.props.attach(i.object,n.object))}function Bo(i,n){if(Qt.str(n.props.attach)){const{root:s,key:h}=Ri(i.object,n.props.attach),r=n.previousAttach;r===void 0?delete s[h]:s[h]=r}else n.previousAttach==null||n.previousAttach(i.object,n.object);delete n.previousAttach}const Gs=[...bv,"args","dispose","attach","object","onUpdate","dispose"],gd=new Map;function V0(i){let n=gd.get(i.constructor);try{n||(n=new i.constructor,gd.set(i.constructor,n))}catch{}return n}function Y0(i,n){const s={};for(const h in n)if(!Gs.includes(h)&&!Qt.equ(n[h],i.props[h])){s[h]=n[h];for(const r in n)r.startsWith(`${h}-`)&&(s[r]=n[r])}for(const h in i.props){if(Gs.includes(h)||n.hasOwnProperty(h))continue;const{root:r,key:l}=Ri(i.object,h);if(r.constructor&&r.constructor.length===0){const c=V0(r);Qt.und(c)||(s[l]=c[l])}else s[l]=0}return s}const q0=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],X0=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Ma(i,n){var s;const h=i.__r3f,r=h&&yv(h).getState(),l=h==null?void 0:h.eventCount;for(const f in n){let u=n[f];if(Gs.includes(f))continue;if(h&&X0.test(f)){typeof u=="function"?h.handlers[f]=u:delete h.handlers[f],h.eventCount=Object.keys(h.handlers).length;continue}if(u===void 0)continue;let{root:v,key:p,target:g}=Ri(i,f);if(g instanceof Wf&&u instanceof Wf)g.mask=u.mask;else if(g instanceof Fr&&w0(u))g.set(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&u!=null&&u.constructor&&g.constructor===u.constructor)g.copy(u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(u))typeof g.fromArray=="function"?g.fromArray(u):g.set(...u);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof u=="number")typeof g.setScalar=="function"?g.setScalar(u):g.set(u);else{var c;v[p]=u,r&&!r.linear&&q0.includes(p)&&(c=v[p])!=null&&c.isTexture&&v[p].format===wr&&v[p].type===Do&&(v[p].colorSpace=ks)}}if(h!=null&&h.parent&&r!=null&&r.internal&&(s=h.object)!=null&&s.isObject3D&&l!==h.eventCount){const f=h.object,u=r.internal.interaction.indexOf(f);u>-1&&r.internal.interaction.splice(u,1),h.eventCount&&f.raycast!==null&&r.internal.interaction.push(f)}return h&&h.props.attach===void 0&&(h.object.isBufferGeometry?h.props.attach="geometry":h.object.isMaterial&&(h.props.attach="material")),h&&Vr(h),i}function Vr(i){var n;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const s=(n=i.root)==null||n.getState==null?void 0:n.getState();s&&s.internal.frames===0&&s.invalidate()}function _v(i,n){i.manual||(Sv(i)?(i.left=n.width/-2,i.right=n.width/2,i.top=n.height/2,i.bottom=n.height/-2):i.aspect=n.width/n.height,i.updateProjectionMatrix())}const wn=i=>i==null?void 0:i.isObject3D;function mo(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function Tv(i,n,s,h){const r=s.get(n);r&&(s.delete(n),s.size===0&&(i.delete(h),r.target.releasePointerCapture(h)))}function Z0(i,n){const{internal:s}=i.getState();s.interaction=s.interaction.filter(h=>h!==n),s.initialHits=s.initialHits.filter(h=>h!==n),s.hovered.forEach((h,r)=>{(h.eventObject===n||h.object===n)&&s.hovered.delete(r)}),s.capturedMap.forEach((h,r)=>{Tv(s.capturedMap,n,h,r)})}function Q0(i){function n(u){const{internal:v}=i.getState(),p=u.offsetX-v.initialClick[0],g=u.offsetY-v.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function s(u){return u.filter(v=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=v.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function h(u,v){const p=i.getState(),g=new Set,y=[],E=v?v(p.internal.interaction):p.internal.interaction;for(let A=0;A<E.length;A++){const M=Ur(E[A]);M&&(M.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(u,p);function T(A){const M=Ur(A);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var z;M.events.compute==null||M.events.compute(u,M,(z=M.previousRoot)==null?void 0:z.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(A,!0):[]}let x=E.flatMap(T).sort((A,M)=>{const z=Ur(A.object),N=Ur(M.object);return!z||!N?A.distance-M.distance:N.events.priority-z.events.priority||A.distance-M.distance}).filter(A=>{const M=mo(A);return g.has(M)?!1:(g.add(M),!0)});p.events.filter&&(x=p.events.filter(x,p));for(const A of x){let M=A.object;for(;M;){var U;(U=M.__r3f)!=null&&U.eventCount&&y.push({...A,eventObject:M}),M=M.parent}}if("pointerId"in u&&p.internal.capturedMap.has(u.pointerId))for(let A of p.internal.capturedMap.get(u.pointerId).values())g.has(mo(A.intersection))||y.push(A.intersection);return y}function r(u,v,p,g){if(u.length){const y={stopped:!1};for(const E of u){let T=Ur(E.object);if(T||E.object.traverseAncestors(x=>{const U=Ur(x);if(U)return T=U,!1}),T){const{raycaster:x,pointer:U,camera:A,internal:M}=T,z=new rt(U.x,U.y,0).unproject(A),N=L=>{var q,ie;return(q=(ie=M.capturedMap.get(L))==null?void 0:ie.has(E.eventObject))!=null?q:!1},O=L=>{const q={intersection:E,target:v.target};M.capturedMap.has(L)?M.capturedMap.get(L).set(E.eventObject,q):M.capturedMap.set(L,new Map([[E.eventObject,q]])),v.target.setPointerCapture(L)},G=L=>{const q=M.capturedMap.get(L);q&&Tv(M.capturedMap,E.eventObject,q,L)};let V={};for(let L in v){let q=v[L];typeof q!="function"&&(V[L]=q)}let D={...E,...V,pointer:U,intersections:u,stopped:y.stopped,delta:p,unprojectedPoint:z,ray:x.ray,camera:A,stopPropagation(){const L="pointerId"in v&&M.capturedMap.get(v.pointerId);if((!L||L.has(E.eventObject))&&(D.stopped=y.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(q=>q.eventObject===E.eventObject))){const q=u.slice(0,u.indexOf(E));l([...q,E])}},target:{hasPointerCapture:N,setPointerCapture:O,releasePointerCapture:G},currentTarget:{hasPointerCapture:N,setPointerCapture:O,releasePointerCapture:G},nativeEvent:v};if(g(D),y.stopped===!0)break}}}return u}function l(u){const{internal:v}=i.getState();for(const p of v.hovered.values())if(!u.length||!u.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const y=p.eventObject.__r3f;if(v.hovered.delete(mo(p)),y!=null&&y.eventCount){const E=y.handlers,T={...p,intersections:u};E.onPointerOut==null||E.onPointerOut(T),E.onPointerLeave==null||E.onPointerLeave(T)}}}function c(u,v){for(let p=0;p<v.length;p++){const g=v[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(u)}}function f(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>l([]);case"onLostPointerCapture":return v=>{const{internal:p}=i.getState();"pointerId"in v&&p.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(v.pointerId)&&(p.capturedMap.delete(v.pointerId),l([]))})}}return function(p){const{onPointerMissed:g,internal:y}=i.getState();y.lastEvent.current=p;const E=u==="onPointerMove",T=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",U=h(p,E?s:void 0),A=T?n(p):0;u==="onPointerDown"&&(y.initialClick=[p.offsetX,p.offsetY],y.initialHits=U.map(z=>z.eventObject)),T&&!U.length&&A<=2&&(c(p,y.interaction),g&&g(p)),E&&l(U);function M(z){const N=z.eventObject,O=N.__r3f;if(!(O!=null&&O.eventCount))return;const G=O.handlers;if(E){if(G.onPointerOver||G.onPointerEnter||G.onPointerOut||G.onPointerLeave){const V=mo(z),D=y.hovered.get(V);D?D.stopped&&z.stopPropagation():(y.hovered.set(V,z),G.onPointerOver==null||G.onPointerOver(z),G.onPointerEnter==null||G.onPointerEnter(z))}G.onPointerMove==null||G.onPointerMove(z)}else{const V=G[u];V?(!T||y.initialHits.includes(N))&&(c(p,y.interaction.filter(D=>!y.initialHits.includes(D))),V(z)):T&&y.initialHits.includes(N)&&c(p,y.interaction.filter(D=>!y.initialHits.includes(D)))}}r(U,p,A,M)}}return{handlePointer:f}}const yd=i=>!!(i!=null&&i.render),nc=$.createContext(null),K0=(i,n)=>{const s=dv((f,u)=>{const v=new rt,p=new rt,g=new rt;function y(A=u().camera,M=p,z=u().size){const{width:N,height:O,top:G,left:V}=z,D=N/O;M.isVector3?g.copy(M):g.set(...M);const L=A.getWorldPosition(v).distanceTo(g);if(Sv(A))return{width:N/A.zoom,height:O/A.zoom,top:G,left:V,factor:1,distance:L,aspect:D};{const q=A.fov*Math.PI/180,ie=2*Math.tan(q/2)*L,w=ie*(N/O);return{width:w,height:ie,top:G,left:V,factor:N/w,distance:L,aspect:D}}}let E;const T=A=>f(M=>({performance:{...M.performance,current:A}})),x=new Br;return{set:f,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(A=1)=>i(u(),A),advance:(A,M)=>n(A,M,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Um,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=u();E&&clearTimeout(E),A.performance.current!==A.performance.min&&T(A.performance.min),E=setTimeout(()=>T(u().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:A=>f(M=>({...M,events:{...M.events,...A}})),setSize:(A,M,z=0,N=0)=>{const O=u().camera,G={width:A,height:M,top:z,left:N};f(V=>({size:G,viewport:{...V.viewport,...y(O,p,G)}}))},setDpr:A=>f(M=>{const z=Ev(A);return{viewport:{...M.viewport,dpr:z,initialDpr:M.viewport.initialDpr||z}}}),setFrameloop:(A="always")=>{const M=u().clock;M.stop(),M.elapsedTime=0,A!=="never"&&(M.start(),M.elapsedTime=0),f(()=>({frameloop:A}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:$.createRef(),active:!1,frames:0,priority:0,subscribe:(A,M,z)=>{const N=u().internal;return N.priority=N.priority+(M>0?1:0),N.subscribers.push({ref:A,priority:M,store:z}),N.subscribers=N.subscribers.sort((O,G)=>O.priority-G.priority),()=>{const O=u().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(M>0?1:0),O.subscribers=O.subscribers.filter(G=>G.ref!==A))}}}}}),h=s.getState();let r=h.size,l=h.viewport.dpr,c=h.camera;return s.subscribe(()=>{const{camera:f,size:u,viewport:v,gl:p,set:g}=s.getState();if(u.width!==r.width||u.height!==r.height||v.dpr!==l){r=u,l=v.dpr,_v(f,u),v.dpr>0&&p.setPixelRatio(v.dpr);const y=typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(u.width,u.height,y)}f!==c&&(c=f,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(f)}})))}),s.subscribe(f=>i(f)),s};function ac(){const i=$.useContext(nc);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Za(i=s=>s,n){return ac()(i,n)}function zi(i,n=0){const s=ac(),h=s.getState().internal.subscribe,r=tc(i);return Ni(()=>h(r,n,s),[n,h,s]),null}const Sd=new WeakMap,P0=i=>{var n;return typeof i=="function"&&(i==null||(n=i.prototype)==null?void 0:n.constructor)===i};function Mv(i,n){return function(s,...h){let r;return P0(s)?(r=Sd.get(s),r||(r=new s,Sd.set(s,r))):r=s,i&&i(r),Promise.all(h.map(l=>new Promise((c,f)=>r.load(l,u=>{wn(u==null?void 0:u.scene)&&Object.assign(u,H0(u.scene)),c(u)},n,u=>f(new Error(`Could not load ${l}: ${u==null?void 0:u.message}`))))))}}function Gr(i,n,s,h){const r=Array.isArray(n)?n:[n],l=Ws(Mv(s,h),[i,...r],{equal:Qt.equ});return Array.isArray(n)?l:l[0]}Gr.preload=function(i,n,s){const h=Array.isArray(n)?n:[n];return A0(Mv(s),[i,...h])};Gr.clear=function(i,n){const s=Array.isArray(n)?n:[n];return x0([i,...s])};function I0(i){const n=T0(i);return n.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:$.version}),n}const Cv=0,jr={},k0=/^three(?=[A-Z])/,Vo=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let J0=0;const W0=i=>typeof i=="function";function Uv(i){if(W0(i)){const n=`${J0++}`;return jr[n]=i,n}else Object.assign(jr,i)}function Av(i,n){const s=Vo(i),h=jr[s];if(i!=="primitive"&&!h)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!n.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(n.args!==void 0&&!Array.isArray(n.args))throw new Error("R3F: The args prop must be an array!")}function $0(i,n,s){var h;return i=Vo(i)in jr?i:i.replace(k0,""),Av(i,n),i==="primitive"&&(h=n.object)!=null&&h.__r3f&&delete n.object.__r3f,zo(n.object,s,i,n)}function e1(i){if(!i.isHidden){var n;i.props.attach&&(n=i.parent)!=null&&n.object?Bo(i.parent,i):wn(i.object)&&(i.object.visible=!1),i.isHidden=!0,Vr(i)}}function xv(i){if(i.isHidden){var n;i.props.attach&&(n=i.parent)!=null&&n.object?wo(i.parent,i):wn(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Vr(i)}}function lc(i,n,s){const h=n.root.getState();if(!(!i.parent&&i.object!==h.scene)){if(!n.object){var r,l;const c=jr[Vo(n.type)];n.object=(r=n.props.object)!=null?r:new c(...(l=n.props.args)!=null?l:[]),n.object.__r3f=n}if(Ma(n.object,n.props),n.props.attach)wo(i,n);else if(wn(n.object)&&wn(i.object)){const c=i.object.children.indexOf(s==null?void 0:s.object);if(s&&c!==-1){const f=i.object.children.indexOf(n.object);if(f!==-1){i.object.children.splice(f,1);const u=f<c?c-1:c;i.object.children.splice(u,0,n.object)}else n.object.parent=i.object,i.object.children.splice(c,0,n.object),n.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:n.object})}else i.object.add(n.object)}for(const c of n.children)lc(n,c);Vr(n)}}function Ss(i,n){n&&(n.parent=i,i.children.push(n),lc(i,n))}function Ed(i,n,s){if(!n||!s)return;n.parent=i;const h=i.children.indexOf(s);h!==-1?i.children.splice(h,0,n):i.children.push(n),lc(i,n,s)}function Rv(i){if(typeof i.dispose=="function"){const n=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?n():pd.unstable_scheduleCallback(pd.unstable_IdlePriority,n)}}function js(i,n,s){if(!n)return;n.parent=null;const h=i.children.indexOf(n);h!==-1&&i.children.splice(h,1),n.props.attach?Bo(i,n):wn(n.object)&&wn(i.object)&&(i.object.remove(n.object),Z0(yv(n),n.object));const r=n.props.dispose!==null&&s!==!1;for(let l=n.children.length-1;l>=0;l--){const c=n.children[l];js(n,c,r)}n.children.length=0,delete n.object.__r3f,r&&n.type!=="primitive"&&n.object.type!=="Scene"&&Rv(n.object),s===void 0&&Vr(n)}function t1(i,n){for(const s of[i,i.alternate])if(s!==null)if(typeof s.ref=="function"){s.refCleanup==null||s.refCleanup();const h=s.ref(n);typeof h=="function"&&(s.refCleanup=h)}else s.ref&&(s.ref.current=n)}const Co=[];function n1(){for(const[s]of Co){const h=s.parent;if(h){s.props.attach?Bo(h,s):wn(s.object)&&wn(h.object)&&h.object.remove(s.object);for(const r of s.children)r.props.attach?Bo(s,r):wn(r.object)&&wn(s.object)&&s.object.remove(r.object)}s.isHidden&&xv(s),s.object.__r3f&&delete s.object.__r3f,s.type!=="primitive"&&Rv(s.object)}for(const[s,h,r]of Co){s.props=h;const l=s.parent;if(l){var i,n;const c=jr[Vo(s.type)];s.object=(i=s.props.object)!=null?i:new c(...(n=s.props.args)!=null?n:[]),s.object.__r3f=s,t1(r,s.object),Ma(s.object,s.props),s.props.attach?wo(l,s):wn(s.object)&&wn(l.object)&&l.object.add(s.object);for(const f of s.children)f.props.attach?wo(s,f):wn(f.object)&&wn(s.object)&&s.object.add(f.object);Vr(s)}}Co.length=0}const Es=()=>{},bd={};let go=Cv;const a1=0,l1=4,Go=I0({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:$0,removeChild:js,appendChild:Ss,appendInitialChild:Ss,insertBefore:Ed,appendChildToContainer(i,n){const s=i.getState().scene.__r3f;!n||!s||Ss(s,n)},removeChildFromContainer(i,n){const s=i.getState().scene.__r3f;!n||!s||js(s,n)},insertInContainerBefore(i,n,s){const h=i.getState().scene.__r3f;!n||!s||!h||Ed(h,n,s)},getRootHostContext:()=>bd,getChildHostContext:()=>bd,commitUpdate(i,n,s,h,r){var l,c,f;Av(n,h);let u=!1;if((i.type==="primitive"&&s.object!==h.object||((l=h.args)==null?void 0:l.length)!==((c=s.args)==null?void 0:c.length)||(f=h.args)!=null&&f.some((p,g)=>{var y;return p!==((y=s.args)==null?void 0:y[g])}))&&(u=!0),u)Co.push([i,{...h},r]);else{const p=Y0(i,h);Object.keys(p).length&&(Object.assign(i.props,p),Ma(i.object,p))}(r.sibling===null||(r.flags&l1)===a1)&&n1()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>zo(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:e1,unhideInstance:xv,createTextInstance:Es,hideTextInstance:Es,unhideTextInstance:Es,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:$.createContext(null),setCurrentUpdatePriority(i){go=i},getCurrentUpdatePriority(){return go},resolveUpdatePriority(){var i;if(go!==Cv)return go;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Mo.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Mo.ContinuousEventPriority;default:return Mo.DefaultEventPriority}},resetFormInstance(){}}),Kl=new Map,Ar={objects:"shallow",strict:!1};function r1(i,n){if(!n&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:s,height:h,top:r,left:l}=i.parentElement.getBoundingClientRect();return{width:s,height:h,top:r,left:l}}else if(!n&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...n}}function i1(i){const n=Kl.get(i),s=n==null?void 0:n.fiber,h=n==null?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,l=h||K0(Ls,Td),c=s||Go.createContainer(l,Mo.ConcurrentRoot,null,!1,null,"",r,r,r,null);n||Kl.set(i,{fiber:c,store:l});let f,u,v=!1,p=null;return{async configure(g={}){let y;p=new Promise(R=>y=R);let{gl:E,size:T,scene:x,events:U,onCreated:A,shadows:M=!1,linear:z=!1,flat:N=!1,legacy:O=!1,orthographic:G=!1,frameloop:V="always",dpr:D=[1,2],performance:L,raycaster:q,camera:ie,onPointerMissed:w}=g,X=l.getState(),F=X.gl;if(!X.gl){const R={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},j=typeof E=="function"?await E(R):E;yd(j)?F=j:F=new lv({...R,...E}),X.set({gl:F})}let ce=X.raycaster;ce||X.set({raycaster:ce=new rv});const{params:C,...k}=q||{};if(Qt.equ(k,ce,Ar)||Ma(ce,{...k}),Qt.equ(C,ce.params,Ar)||Ma(ce,{params:{...ce.params,...C}}),!X.camera||X.camera===u&&!Qt.equ(u,ie,Ar)){u=ie;const R=ie==null?void 0:ie.isCamera,j=R?ie:G?new iv(0,0,0,0,.1,1e3):new Em(75,0,.1,1e3);R||(j.position.z=5,ie&&(Ma(j,ie),j.manual||("aspect"in ie||"left"in ie||"right"in ie||"bottom"in ie||"top"in ie)&&(j.manual=!0,j.updateProjectionMatrix())),!X.camera&&!(ie!=null&&ie.rotation)&&j.lookAt(0,0,0)),X.set({camera:j}),ce.camera=j}if(!X.scene){let R;x!=null&&x.isScene?(R=x,zo(R,l,"",{})):(R=new Is,zo(R,l,"",{}),x&&Ma(R,x)),X.set({scene:R})}U&&!X.events.handlers&&X.set({events:U(l)});const ee=r1(i,T);if(Qt.equ(ee,X.size,Ar)||X.setSize(ee.width,ee.height,ee.top,ee.left),D&&X.viewport.dpr!==Ev(D)&&X.setDpr(D),X.frameloop!==V&&X.setFrameloop(V),X.onPointerMissed||X.set({onPointerMissed:w}),L&&!Qt.equ(L,X.performance,Ar)&&X.set(R=>({performance:{...R.performance,...L}})),!X.xr){var Z;const R=(Q,W)=>{const K=l.getState();K.frameloop!=="never"&&Td(Q,!0,K,W)},j=()=>{const Q=l.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?R:null),Q.gl.xr.isPresenting||Ls(Q)},I={connect(){const Q=l.getState().gl;Q.xr.addEventListener("sessionstart",j),Q.xr.addEventListener("sessionend",j)},disconnect(){const Q=l.getState().gl;Q.xr.removeEventListener("sessionstart",j),Q.xr.removeEventListener("sessionend",j)}};typeof((Z=F.xr)==null?void 0:Z.addEventListener)=="function"&&I.connect(),X.set({xr:I})}if(F.shadowMap){const R=F.shadowMap.enabled,j=F.shadowMap.type;if(F.shadowMap.enabled=!!M,Qt.boo(M))F.shadowMap.type=is;else if(Qt.str(M)){var Y;const I={basic:Tm,percentage:_m,soft:is,variance:bm};F.shadowMap.type=(Y=I[M])!=null?Y:is}else Qt.obj(M)&&Object.assign(F.shadowMap,M);(R!==F.shadowMap.enabled||j!==F.shadowMap.type)&&(F.shadowMap.needsUpdate=!0)}return Am.enabled=!O,v||(F.outputColorSpace=z?Ro:ks,F.toneMapping=N?Mm:Cm),X.legacy!==O&&X.set(()=>({legacy:O})),X.linear!==z&&X.set(()=>({linear:z})),X.flat!==N&&X.set(()=>({flat:N})),E&&!Qt.fun(E)&&!yd(E)&&!Qt.equ(E,F,Ar)&&Ma(F,E),f=A,v=!0,y(),this},render(g){return!v&&!p&&this.configure(),p.then(()=>{Go.updateContainer(We.jsx(o1,{store:l,children:g,onCreated:f,rootElement:i}),c,null,()=>{})}),l},unmount(){Dv(i)}}}function o1({store:i,children:n,onCreated:s,rootElement:h}){return Ni(()=>{const r=i.getState();r.set(l=>({internal:{...l.internal,active:!0}})),s&&s(r),i.getState().events.connected||r.events.connect==null||r.events.connect(h)},[]),We.jsx(nc.Provider,{value:i,children:n})}function Dv(i,n){const s=Kl.get(i),h=s==null?void 0:s.fiber;if(h){const r=s==null?void 0:s.store.getState();r&&(r.internal.active=!1),Go.updateContainer(null,h,null,()=>{r&&setTimeout(()=>{try{var l,c,f,u;r.events.disconnect==null||r.events.disconnect(),(l=r.gl)==null||(c=l.renderLists)==null||c.dispose==null||c.dispose(),(f=r.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),F0(r.scene),Kl.delete(i)}catch{}},500)})}}function u1(i,n,s){return We.jsx(s1,{children:i,container:n,state:s})}function s1({state:i={},children:n,container:s}){const{events:h,size:r,...l}=i,c=ac(),[f]=$.useState(()=>new rv),[u]=$.useState(()=>new Br),v=tc((g,y)=>{let E;if(y.camera&&r){const T=y.camera;E=g.viewport.getCurrentViewport(T,new rt,r),T!==g.camera&&_v(T,r)}return{...g,...y,scene:s,raycaster:f,pointer:u,mouse:u,previousRoot:c,events:{...g.events,...y.events,...h},size:{...g.size,...r},viewport:{...g.viewport,...E},setEvents:T=>y.set(x=>({...x,events:{...x.events,...T}}))}}),p=$.useMemo(()=>{const g=dv((E,T)=>({...l,set:E,get:T})),y=E=>g.setState(T=>v.current(E,T));return y(c.getState()),c.subscribe(y),g},[c,s]);return We.jsx(We.Fragment,{children:Go.createPortal(We.jsx(nc.Provider,{value:p,children:n}),p,null)})}const c1=new Set,f1=new Set,d1=new Set;function bs(i,n){if(i.size)for(const{callback:s}of i.values())s(n)}function Ci(i,n){switch(i){case"before":return bs(c1,n);case"after":return bs(f1,n);case"tail":return bs(d1,n)}}let _s,Ts;function Hs(i,n,s){let h=n.clock.getDelta();n.frameloop==="never"&&typeof i=="number"&&(h=i-n.clock.elapsedTime,n.clock.oldTime=n.clock.elapsedTime,n.clock.elapsedTime=i),_s=n.internal.subscribers;for(let r=0;r<_s.length;r++)Ts=_s[r],Ts.ref.current(Ts.store.getState(),h,s);return!n.internal.priority&&n.gl.render&&n.gl.render(n.scene,n.camera),n.internal.frames=Math.max(0,n.internal.frames-1),n.frameloop==="always"?1:n.internal.frames}let jo=!1,Fs=!1,Ms,_d,xr;function Ov(i){_d=requestAnimationFrame(Ov),jo=!0,Ms=0,Ci("before",i),Fs=!0;for(const s of Kl.values()){var n;xr=s.store.getState(),xr.internal.active&&(xr.frameloop==="always"||xr.internal.frames>0)&&!((n=xr.gl.xr)!=null&&n.isPresenting)&&(Ms+=Hs(i,xr))}if(Fs=!1,Ci("after",i),Ms===0)return Ci("tail",i),jo=!1,cancelAnimationFrame(_d)}function Ls(i,n=1){var s;if(!i)return Kl.forEach(h=>Ls(h.store.getState(),n));(s=i.gl.xr)!=null&&s.isPresenting||!i.internal.active||i.frameloop==="never"||(n>1?i.internal.frames=Math.min(60,i.internal.frames+n):Fs?i.internal.frames=2:i.internal.frames=1,jo||(jo=!0,requestAnimationFrame(Ov)))}function Td(i,n=!0,s,h){if(n&&Ci("before",i),s)Hs(i,s,h);else for(const r of Kl.values())Hs(i,r.store.getState());n&&Ci("after",i)}const Cs={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function v1(i){const{handlePointer:n}=Q0(i);return{priority:1,enabled:!0,compute(s,h,r){h.pointer.set(s.offsetX/h.size.width*2-1,-(s.offsetY/h.size.height)*2+1),h.raycaster.setFromCamera(h.pointer,h.camera)},connected:void 0,handlers:Object.keys(Cs).reduce((s,h)=>({...s,[h]:n(h)}),{}),update:()=>{var s;const{events:h,internal:r}=i.getState();(s=r.lastEvent)!=null&&s.current&&h.handlers&&h.handlers.onPointerMove(r.lastEvent.current)},connect:s=>{const{set:h,events:r}=i.getState();if(r.disconnect==null||r.disconnect(),h(l=>({events:{...l.events,connected:s}})),r.handlers)for(const l in r.handlers){const c=r.handlers[l],[f,u]=Cs[l];s.addEventListener(f,c,{passive:u})}},disconnect:()=>{const{set:s,events:h}=i.getState();if(h.connected){if(h.handlers)for(const r in h.handlers){const l=h.handlers[r],[c]=Cs[r];h.connected.removeEventListener(c,l)}s(r=>({events:{...r.events,connected:void 0}}))}}}}function Md(i,n){let s;return(...h)=>{window.clearTimeout(s),s=window.setTimeout(()=>i(...h),n)}}function h1({debounce:i,scroll:n,polyfill:s,offsetSize:h}={debounce:0,scroll:!1,offsetSize:!1}){const r=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,c]=$.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=$.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),u=i?typeof i=="number"?i:i.scroll:null,v=i?typeof i=="number"?i:i.resize:null,p=$.useRef(!1);$.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,y,E]=$.useMemo(()=>{const A=()=>{if(!f.current.element)return;const{left:M,top:z,width:N,height:O,bottom:G,right:V,x:D,y:L}=f.current.element.getBoundingClientRect(),q={left:M,top:z,width:N,height:O,bottom:G,right:V,x:D,y:L};f.current.element instanceof HTMLElement&&h&&(q.height=f.current.element.offsetHeight,q.width=f.current.element.offsetWidth),Object.freeze(q),p.current&&!y1(f.current.lastBounds,q)&&c(f.current.lastBounds=q)};return[A,v?Md(A,v):A,u?Md(A,u):A]},[c,h,u,v]);function T(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",E,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function x(){f.current.element&&(f.current.resizeObserver=new r(E),f.current.resizeObserver.observe(f.current.element),n&&f.current.scrollContainers&&f.current.scrollContainers.forEach(A=>A.addEventListener("scroll",E,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{E()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}const U=A=>{!A||A===f.current.element||(T(),f.current.element=A,f.current.scrollContainers=Nv(A),x())};return m1(E,!!n),p1(y),$.useEffect(()=>{T(),x()},[n,E,y]),$.useEffect(()=>T,[]),[U,l,g]}function p1(i){$.useEffect(()=>{const n=i;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[i])}function m1(i,n){$.useEffect(()=>{if(n){const s=i;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[i,n])}function Nv(i){const n=[];if(!i||i===document.body)return n;const{overflow:s,overflowX:h,overflowY:r}=window.getComputedStyle(i);return[s,h,r].some(l=>l==="auto"||l==="scroll")&&n.push(i),[...n,...Nv(i.parentElement)]}const g1=["x","y","top","bottom","left","right","width","height"],y1=(i,n)=>g1.every(s=>i[s]===n[s]);function S1({ref:i,children:n,fallback:s,resize:h,style:r,gl:l,events:c=v1,eventSource:f,eventPrefix:u,shadows:v,linear:p,flat:g,legacy:y,orthographic:E,frameloop:T,dpr:x,performance:U,raycaster:A,camera:M,scene:z,onPointerMissed:N,onCreated:O,...G}){$.useMemo(()=>Uv(xm),[]);const V=B0(),[D,L]=h1({scroll:!0,debounce:{scroll:50,resize:0},...h}),q=$.useRef(null),ie=$.useRef(null);$.useImperativeHandle(i,()=>q.current);const w=tc(N),[X,F]=$.useState(!1),[ce,C]=$.useState(!1);if(X)throw X;if(ce)throw ce;const k=$.useRef(null);Ni(()=>{const Z=q.current;if(L.width>0&&L.height>0&&Z){k.current||(k.current=i1(Z));async function Y(){await k.current.configure({gl:l,scene:z,events:c,shadows:v,linear:p,flat:g,legacy:y,orthographic:E,frameloop:T,dpr:x,performance:U,raycaster:A,camera:M,size:L,onPointerMissed:(...R)=>w.current==null?void 0:w.current(...R),onCreated:R=>{R.events.connect==null||R.events.connect(f?z0(f)?f.current:f:ie.current),u&&R.setEvents({compute:(j,I)=>{const Q=j[u+"X"],W=j[u+"Y"];I.pointer.set(Q/I.size.width*2-1,-(W/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),O==null||O(R)}}),k.current.render(We.jsx(V,{children:We.jsx(j0,{set:C,children:We.jsx($.Suspense,{fallback:We.jsx(G0,{set:F}),children:n??null})})}))}Y()}}),$.useEffect(()=>{const Z=q.current;if(Z)return()=>Dv(Z)},[]);const ee=f?"none":"auto";return We.jsx("div",{ref:ie,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...r},...G,children:We.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:We.jsx("canvas",{ref:q,style:{display:"block"},children:s})})})}function E1(i){return We.jsx(mv,{children:We.jsx(S1,{...i})})}const zv=parseInt(Rm.replace(/\D+/g,""));function b1(i,n=1e-4){n=Math.max(n,Number.EPSILON);const s={},h=i.getIndex(),r=i.getAttribute("position"),l=h?h.count:r.count;let c=0;const f=Object.keys(i.attributes),u={},v={},p=[],g=["getX","getY","getZ","getW"];for(let x=0,U=f.length;x<U;x++){const A=f[x];u[A]=[];const M=i.morphAttributes[A];M&&(v[A]=new Array(M.length).fill(0).map(()=>[]))}const y=Math.log10(1/n),E=Math.pow(10,y);for(let x=0;x<l;x++){const U=h?h.getX(x):x;let A="";for(let M=0,z=f.length;M<z;M++){const N=f[M],O=i.getAttribute(N),G=O.itemSize;for(let V=0;V<G;V++)A+=`${~~(O[g[V]](U)*E)},`}if(A in s)p.push(s[A]);else{for(let M=0,z=f.length;M<z;M++){const N=f[M],O=i.getAttribute(N),G=i.morphAttributes[N],V=O.itemSize,D=u[N],L=v[N];for(let q=0;q<V;q++){const ie=g[q];if(D.push(O[ie](U)),G)for(let w=0,X=G.length;w<X;w++)L[w].push(G[w][ie](U))}}s[A]=c,p.push(c),c++}}const T=i.clone();for(let x=0,U=f.length;x<U;x++){const A=f[x],M=i.getAttribute(A),z=new M.array.constructor(u[A]),N=new Oo(z,M.itemSize,M.normalized);if(T.setAttribute(A,N),A in v)for(let O=0;O<v[A].length;O++){const G=i.morphAttributes[A][O],V=new G.array.constructor(v[A][O]),D=new Oo(V,G.itemSize,G.normalized);T.morphAttributes[A][O]=D}}return T.setIndex(p),T}var ua=Uint8Array,hl=Uint16Array,Vs=Uint32Array,wv=new ua([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bv=new ua([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_1=new ua([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gv=function(i,n){for(var s=new hl(31),h=0;h<31;++h)s[h]=n+=1<<i[h-1];for(var r=new Vs(s[30]),h=1;h<30;++h)for(var l=s[h];l<s[h+1];++l)r[l]=l-s[h]<<5|h;return[s,r]},jv=Gv(wv,2),Hv=jv[0],T1=jv[1];Hv[28]=258,T1[258]=28;var M1=Gv(Bv,0),C1=M1[0],Ys=new hl(32768);for(var Yt=0;Yt<32768;++Yt){var cl=(Yt&43690)>>>1|(Yt&21845)<<1;cl=(cl&52428)>>>2|(cl&13107)<<2,cl=(cl&61680)>>>4|(cl&3855)<<4,Ys[Yt]=((cl&65280)>>>8|(cl&255)<<8)>>>1}var Ui=function(i,n,s){for(var h=i.length,r=0,l=new hl(n);r<h;++r)++l[i[r]-1];var c=new hl(n);for(r=0;r<n;++r)c[r]=c[r-1]+l[r-1]<<1;var f;if(s){f=new hl(1<<n);var u=15-n;for(r=0;r<h;++r)if(i[r])for(var v=r<<4|i[r],p=n-i[r],g=c[i[r]-1]++<<p,y=g|(1<<p)-1;g<=y;++g)f[Ys[g]>>>u]=v}else for(f=new hl(h),r=0;r<h;++r)i[r]&&(f[r]=Ys[c[i[r]-1]++]>>>15-i[r]);return f},wi=new ua(288);for(var Yt=0;Yt<144;++Yt)wi[Yt]=8;for(var Yt=144;Yt<256;++Yt)wi[Yt]=9;for(var Yt=256;Yt<280;++Yt)wi[Yt]=7;for(var Yt=280;Yt<288;++Yt)wi[Yt]=8;var Fv=new ua(32);for(var Yt=0;Yt<32;++Yt)Fv[Yt]=5;var U1=Ui(wi,9,1),A1=Ui(Fv,5,1),Us=function(i){for(var n=i[0],s=1;s<i.length;++s)i[s]>n&&(n=i[s]);return n},ga=function(i,n,s){var h=n/8|0;return(i[h]|i[h+1]<<8)>>(n&7)&s},As=function(i,n){var s=n/8|0;return(i[s]|i[s+1]<<8|i[s+2]<<16)>>(n&7)},x1=function(i){return(i/8|0)+(i&7&&1)},R1=function(i,n,s){(s==null||s>i.length)&&(s=i.length);var h=new(i instanceof hl?hl:i instanceof Vs?Vs:ua)(s-n);return h.set(i.subarray(n,s)),h},D1=function(i,n,s){var h=i.length;if(!h||s&&!s.l&&h<5)return n||new ua(0);var r=!n||s,l=!s||s.i;s||(s={}),n||(n=new ua(h*3));var c=function(K){var ae=n.length;if(K>ae){var se=new ua(Math.max(ae*2,K));se.set(n),n=se}},f=s.f||0,u=s.p||0,v=s.b||0,p=s.l,g=s.d,y=s.m,E=s.n,T=h*8;do{if(!p){s.f=f=ga(i,u,1);var x=ga(i,u+1,3);if(u+=3,x)if(x==1)p=U1,g=A1,y=9,E=5;else if(x==2){var z=ga(i,u,31)+257,N=ga(i,u+10,15)+4,O=z+ga(i,u+5,31)+1;u+=14;for(var G=new ua(O),V=new ua(19),D=0;D<N;++D)V[_1[D]]=ga(i,u+D*3,7);u+=N*3;for(var L=Us(V),q=(1<<L)-1,ie=Ui(V,L,1),D=0;D<O;){var w=ie[ga(i,u,q)];u+=w&15;var U=w>>>4;if(U<16)G[D++]=U;else{var X=0,F=0;for(U==16?(F=3+ga(i,u,3),u+=2,X=G[D-1]):U==17?(F=3+ga(i,u,7),u+=3):U==18&&(F=11+ga(i,u,127),u+=7);F--;)G[D++]=X}}var ce=G.subarray(0,z),C=G.subarray(z);y=Us(ce),E=Us(C),p=Ui(ce,y,1),g=Ui(C,E,1)}else throw"invalid block type";else{var U=x1(u)+4,A=i[U-4]|i[U-3]<<8,M=U+A;if(M>h){if(l)throw"unexpected EOF";break}r&&c(v+A),n.set(i.subarray(U,M),v),s.b=v+=A,s.p=u=M*8;continue}if(u>T){if(l)throw"unexpected EOF";break}}r&&c(v+131072);for(var k=(1<<y)-1,ee=(1<<E)-1,Z=u;;Z=u){var X=p[As(i,u)&k],Y=X>>>4;if(u+=X&15,u>T){if(l)throw"unexpected EOF";break}if(!X)throw"invalid length/literal";if(Y<256)n[v++]=Y;else if(Y==256){Z=u,p=null;break}else{var R=Y-254;if(Y>264){var D=Y-257,j=wv[D];R=ga(i,u,(1<<j)-1)+Hv[D],u+=j}var I=g[As(i,u)&ee],Q=I>>>4;if(!I)throw"invalid distance";u+=I&15;var C=C1[Q];if(Q>3){var j=Bv[Q];C+=As(i,u)&(1<<j)-1,u+=j}if(u>T){if(l)throw"unexpected EOF";break}r&&c(v+131072);for(var W=v+R;v<W;v+=4)n[v]=n[v-C],n[v+1]=n[v+1-C],n[v+2]=n[v+2-C],n[v+3]=n[v+3-C];v=W}}s.l=p,s.p=Z,s.b=v,p&&(f=1,s.m=y,s.d=g,s.n=E)}while(!f);return v==n.length?n:R1(n,0,v)},O1=new ua(0),N1=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function yo(i,n){return D1((N1(i),i.subarray(2,-4)),n)}var z1=typeof TextDecoder<"u"&&new TextDecoder,w1=0;try{z1.decode(O1,{stream:!0}),w1=1}catch{}const B1=i=>i&&i.isCubeTexture;class G1 extends Il{constructor(n,s){var h,r;const l=B1(n),f=((r=l?(h=n.image[0])==null?void 0:h.width:n.image.width)!=null?r:1024)/4,u=Math.floor(Math.log2(f)),v=Math.pow(2,u),p=3*Math.max(v,16*7),g=4*v,y=[l?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/g}`,`#define CUBEUV_MAX_MIP ${u}.0`],E=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,T=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${zv>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:n},height:{value:(s==null?void 0:s.height)||15},radius:{value:(s==null?void 0:s.radius)||100}},U=new Dm(1,16),A=new Fo({uniforms:x,fragmentShader:T,vertexShader:E,side:Lo});super(U,A)}set radius(n){this.material.uniforms.radius.value=n}get radius(){return this.material.uniforms.radius.value}set height(n){this.material.uniforms.height.value=n}get height(){return this.material.uniforms.height.value}}class j1 extends ov{constructor(n){super(n),this.type=sa}parse(n){const c=function(D,L){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},p=`
`,g=function(D,L,q){L=L||1024;let w=D.pos,X=-1,F=0,ce="",C=String.fromCharCode.apply(null,new Uint16Array(D.subarray(w,w+128)));for(;0>(X=C.indexOf(p))&&F<L&&w<D.byteLength;)ce+=C,F+=C.length,w+=128,C+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(w,w+128)));return-1<X?(D.pos+=F+X+1,ce+C.slice(0,X)):!1},y=function(D){const L=/^#\?(\S+)/,q=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ie=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*FORMAT=(\S+)\s*$/,X=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ce,C;for((D.pos>=D.byteLength||!(ce=g(D)))&&c(1,"no header found"),(C=ce.match(L))||c(3,"bad initial token"),F.valid|=1,F.programtype=C[1],F.string+=ce+`
`;ce=g(D),ce!==!1;){if(F.string+=ce+`
`,ce.charAt(0)==="#"){F.comments+=ce+`
`;continue}if((C=ce.match(q))&&(F.gamma=parseFloat(C[1])),(C=ce.match(ie))&&(F.exposure=parseFloat(C[1])),(C=ce.match(w))&&(F.valid|=2,F.format=C[1]),(C=ce.match(X))&&(F.valid|=4,F.height=parseInt(C[1],10),F.width=parseInt(C[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||c(3,"missing format specifier"),F.valid&4||c(3,"missing image size specifier"),F},E=function(D,L,q){const ie=L;if(ie<8||ie>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);ie!==(D[2]<<8|D[3])&&c(3,"wrong scanline width");const w=new Uint8Array(4*L*q);w.length||c(4,"unable to allocate buffer space");let X=0,F=0;const ce=4*ie,C=new Uint8Array(4),k=new Uint8Array(ce);let ee=q;for(;ee>0&&F<D.byteLength;){F+4>D.byteLength&&c(1),C[0]=D[F++],C[1]=D[F++],C[2]=D[F++],C[3]=D[F++],(C[0]!=2||C[1]!=2||(C[2]<<8|C[3])!=ie)&&c(3,"bad rgbe scanline format");let Z=0,Y;for(;Z<ce&&F<D.byteLength;){Y=D[F++];const j=Y>128;if(j&&(Y-=128),(Y===0||Z+Y>ce)&&c(3,"bad scanline data"),j){const I=D[F++];for(let Q=0;Q<Y;Q++)k[Z++]=I}else k.set(D.subarray(F,F+Y),Z),Z+=Y,F+=Y}const R=ie;for(let j=0;j<R;j++){let I=0;w[X]=k[j+I],I+=ie,w[X+1]=k[j+I],I+=ie,w[X+2]=k[j+I],I+=ie,w[X+3]=k[j+I],X+=4}ee--}return w},T=function(D,L,q,ie){const w=D[L+3],X=Math.pow(2,w-128)/255;q[ie+0]=D[L+0]*X,q[ie+1]=D[L+1]*X,q[ie+2]=D[L+2]*X,q[ie+3]=1},x=function(D,L,q,ie){const w=D[L+3],X=Math.pow(2,w-128)/255;q[ie+0]=Nr.toHalfFloat(Math.min(D[L+0]*X,65504)),q[ie+1]=Nr.toHalfFloat(Math.min(D[L+1]*X,65504)),q[ie+2]=Nr.toHalfFloat(Math.min(D[L+2]*X,65504)),q[ie+3]=Nr.toHalfFloat(1)},U=new Uint8Array(n);U.pos=0;const A=y(U),M=A.width,z=A.height,N=E(U.subarray(U.pos),M,z);let O,G,V;switch(this.type){case Xa:V=N.length/4;const D=new Float32Array(V*4);for(let q=0;q<V;q++)T(N,q*4,D,q*4);O=D,G=Xa;break;case sa:V=N.length/4;const L=new Uint16Array(V*4);for(let q=0;q<V;q++)x(N,q*4,L,q*4);O=L,G=sa;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:z,data:O,header:A.string,gamma:A.gamma,exposure:A.exposure,type:G}}setDataType(n){return this.type=n,this}load(n,s,h,r){function l(c,f){switch(c.type){case Xa:case sa:"colorSpace"in c?c.colorSpace="srgb-linear":c.encoding=3e3,c.minFilter=ca,c.magFilter=ca,c.generateMipmaps=!1,c.flipY=!0;break}s&&s(c,f)}return super.load(n,l,h,r)}}const Ei=zv>=152;class H1 extends ov{constructor(n){super(n),this.type=sa}parse(n){const L=Math.pow(2.7182818,2.2);function q(S,_){for(var H=0,ne=0;ne<65536;++ne)(ne==0||S[ne>>3]&1<<(ne&7))&&(_[H++]=ne);for(var ue=H-1;H<65536;)_[H++]=0;return ue}function ie(S){for(var _=0;_<16384;_++)S[_]={},S[_].len=0,S[_].lit=0,S[_].p=null}const w={l:0,c:0,lc:0};function X(S,_,H,ne,ue){for(;H<S;)_=_<<8|He(ne,ue),H+=8;H-=S,w.l=_>>H&(1<<S)-1,w.c=_,w.lc=H}const F=new Array(59);function ce(S){for(var _=0;_<=58;++_)F[_]=0;for(var _=0;_<65537;++_)F[S[_]]+=1;for(var H=0,_=58;_>0;--_){var ne=H+F[_]>>1;F[_]=H,H=ne}for(var _=0;_<65537;++_){var ue=S[_];ue>0&&(S[_]=ue|F[ue]++<<6)}}function C(S,_,H,ne,ue,oe,be){for(var ye=H,Se=0,ge=0;ue<=oe;ue++){if(ye.value-H.value>ne)return!1;X(6,Se,ge,S,ye);var Te=w.l;if(Se=w.c,ge=w.lc,be[ue]=Te,Te==63){if(ye.value-H.value>ne)throw"Something wrong with hufUnpackEncTable";X(8,Se,ge,S,ye);var le=w.l+6;if(Se=w.c,ge=w.lc,ue+le>oe+1)throw"Something wrong with hufUnpackEncTable";for(;le--;)be[ue++]=0;ue--}else if(Te>=59){var le=Te-59+2;if(ue+le>oe+1)throw"Something wrong with hufUnpackEncTable";for(;le--;)be[ue++]=0;ue--}}ce(be)}function k(S){return S&63}function ee(S){return S>>6}function Z(S,_,H,ne){for(;_<=H;_++){var ue=ee(S[_]),oe=k(S[_]);if(ue>>oe)throw"Invalid table entry";if(oe>14){var be=ne[ue>>oe-14];if(be.len)throw"Invalid table entry";if(be.lit++,be.p){var ye=be.p;be.p=new Array(be.lit);for(var Se=0;Se<be.lit-1;++Se)be.p[Se]=ye[Se]}else be.p=new Array(1);be.p[be.lit-1]=_}else if(oe)for(var ge=0,Se=1<<14-oe;Se>0;Se--){var be=ne[(ue<<14-oe)+ge];if(be.len||be.p)throw"Invalid table entry";be.len=oe,be.lit=_,ge++}}return!0}const Y={c:0,lc:0};function R(S,_,H,ne){S=S<<8|He(H,ne),_+=8,Y.c=S,Y.lc=_}const j={c:0,lc:0};function I(S,_,H,ne,ue,oe,be,ye,Se,ge){if(S==_){ne<8&&(R(H,ne,ue,be),H=Y.c,ne=Y.lc),ne-=8;var Te=H>>ne,Te=new Uint8Array([Te])[0];if(Se.value+Te>ge)return!1;for(var le=ye[Se.value-1];Te-- >0;)ye[Se.value++]=le}else if(Se.value<ge)ye[Se.value++]=S;else return!1;j.c=H,j.lc=ne}function Q(S){return S&65535}function W(S){var _=Q(S);return _>32767?_-65536:_}const K={a:0,b:0};function ae(S,_){var H=W(S),ne=W(_),ue=ne,oe=H+(ue&1)+(ue>>1),be=oe,ye=oe-ue;K.a=be,K.b=ye}function se(S,_){var H=Q(S),ne=Q(_),ue=H-(ne>>1)&65535,oe=ne+ue-32768&65535;K.a=oe,K.b=ue}function pe(S,_,H,ne,ue,oe,be){for(var ye=be<16384,Se=H>ue?ue:H,ge=1,Te;ge<=Se;)ge<<=1;for(ge>>=1,Te=ge,ge>>=1;ge>=1;){for(var le=0,Ct=le+oe*(ue-Te),Ge=oe*ge,Le=oe*Te,Pe=ne*ge,at=ne*Te,St,Et,Ht,an;le<=Ct;le+=Le){for(var bt=le,Cn=le+ne*(H-Te);bt<=Cn;bt+=at){var Ut=bt+Pe,Xt=bt+Ge,Sn=Xt+Pe;ye?(ae(S[bt+_],S[Xt+_]),St=K.a,Ht=K.b,ae(S[Ut+_],S[Sn+_]),Et=K.a,an=K.b,ae(St,Et),S[bt+_]=K.a,S[Ut+_]=K.b,ae(Ht,an),S[Xt+_]=K.a,S[Sn+_]=K.b):(se(S[bt+_],S[Xt+_]),St=K.a,Ht=K.b,se(S[Ut+_],S[Sn+_]),Et=K.a,an=K.b,se(St,Et),S[bt+_]=K.a,S[Ut+_]=K.b,se(Ht,an),S[Xt+_]=K.a,S[Sn+_]=K.b)}if(H&ge){var Xt=bt+Ge;ye?ae(S[bt+_],S[Xt+_]):se(S[bt+_],S[Xt+_]),St=K.a,S[Xt+_]=K.b,S[bt+_]=St}}if(ue&ge)for(var bt=le,Cn=le+ne*(H-Te);bt<=Cn;bt+=at){var Ut=bt+Pe;ye?ae(S[bt+_],S[Ut+_]):se(S[bt+_],S[Ut+_]),St=K.a,S[Ut+_]=K.b,S[bt+_]=St}Te=ge,ge>>=1}return le}function Ce(S,_,H,ne,ue,oe,be,ye,Se,ge){for(var Te=0,le=0,Ct=ye,Ge=Math.trunc(ue.value+(oe+7)/8);ue.value<Ge;)for(R(Te,le,H,ue),Te=Y.c,le=Y.lc;le>=14;){var Le=Te>>le-14&16383,Pe=_[Le];if(Pe.len)le-=Pe.len,I(Pe.lit,be,Te,le,H,ne,ue,Se,ge,Ct),Te=j.c,le=j.lc;else{if(!Pe.p)throw"hufDecode issues";var at;for(at=0;at<Pe.lit;at++){for(var St=k(S[Pe.p[at]]);le<St&&ue.value<Ge;)R(Te,le,H,ue),Te=Y.c,le=Y.lc;if(le>=St&&ee(S[Pe.p[at]])==(Te>>le-St&(1<<St)-1)){le-=St,I(Pe.p[at],be,Te,le,H,ne,ue,Se,ge,Ct),Te=j.c,le=j.lc;break}}if(at==Pe.lit)throw"hufDecode issues"}}var Et=8-oe&7;for(Te>>=Et,le-=Et;le>0;){var Pe=_[Te<<14-le&16383];if(Pe.len)le-=Pe.len,I(Pe.lit,be,Te,le,H,ne,ue,Se,ge,Ct),Te=j.c,le=j.lc;else throw"hufDecode issues"}return!0}function me(S,_,H,ne,ue,oe){var be={value:0},ye=H.value,Se=Fe(_,H),ge=Fe(_,H);H.value+=4;var Te=Fe(_,H);if(H.value+=4,Se<0||Se>=65537||ge<0||ge>=65537)throw"Something wrong with HUF_ENCSIZE";var le=new Array(65537),Ct=new Array(16384);ie(Ct);var Ge=ne-(H.value-ye);if(C(S,_,H,Ge,Se,ge,le),Te>8*(ne-(H.value-ye)))throw"Something wrong with hufUncompress";Z(le,Se,ge,Ct),Ce(le,Ct,S,_,H,Te,ge,oe,ue,be)}function ve(S,_,H){for(var ne=0;ne<H;++ne)_[ne]=S[_[ne]]}function Xe(S){for(var _=1;_<S.length;_++){var H=S[_-1]+S[_]-128;S[_]=H}}function Be(S,_){for(var H=0,ne=Math.floor((S.length+1)/2),ue=0,oe=S.length-1;!(ue>oe||(_[ue++]=S[H++],ue>oe));)_[ue++]=S[ne++]}function Ue(S){for(var _=S.byteLength,H=new Array,ne=0,ue=new DataView(S);_>0;){var oe=ue.getInt8(ne++);if(oe<0){var be=-oe;_-=be+1;for(var ye=0;ye<be;ye++)H.push(ue.getUint8(ne++))}else{var be=oe;_-=2;for(var Se=ue.getUint8(ne++),ye=0;ye<be+1;ye++)H.push(Se)}}return H}function Re(S,_,H,ne,ue,oe){var Ut=new DataView(oe.buffer),be=H[S.idx[0]].width,ye=H[S.idx[0]].height,Se=3,ge=Math.floor(be/8),Te=Math.ceil(be/8),le=Math.ceil(ye/8),Ct=be-(Te-1)*8,Ge=ye-(le-1)*8,Le={value:0},Pe=new Array(Se),at=new Array(Se),St=new Array(Se),Et=new Array(Se),Ht=new Array(Se);for(let _t=0;_t<Se;++_t)Ht[_t]=_[S.idx[_t]],Pe[_t]=_t<1?0:Pe[_t-1]+Te*le,at[_t]=new Float32Array(64),St[_t]=new Uint16Array(64),Et[_t]=new Uint16Array(Te*64);for(let _t=0;_t<le;++_t){var an=8;_t==le-1&&(an=Ge);var bt=8;for(let Nt=0;Nt<Te;++Nt){Nt==Te-1&&(bt=Ct);for(let it=0;it<Se;++it)St[it].fill(0),St[it][0]=ue[Pe[it]++],Ne(Le,ne,St[it]),Ee(St[it],at[it]),we(at[it]);xe(at);for(let it=0;it<Se;++it)he(at[it],Et[it],Nt*64)}let Zt=0;for(let Nt=0;Nt<Se;++Nt){const it=H[S.idx[Nt]].type;for(let En=8*_t;En<8*_t+an;++En){Zt=Ht[Nt][En];for(let On=0;On<ge;++On){const Jt=On*64+(En&7)*8;Ut.setUint16(Zt+0*2*it,Et[Nt][Jt+0],!0),Ut.setUint16(Zt+1*2*it,Et[Nt][Jt+1],!0),Ut.setUint16(Zt+2*2*it,Et[Nt][Jt+2],!0),Ut.setUint16(Zt+3*2*it,Et[Nt][Jt+3],!0),Ut.setUint16(Zt+4*2*it,Et[Nt][Jt+4],!0),Ut.setUint16(Zt+5*2*it,Et[Nt][Jt+5],!0),Ut.setUint16(Zt+6*2*it,Et[Nt][Jt+6],!0),Ut.setUint16(Zt+7*2*it,Et[Nt][Jt+7],!0),Zt+=8*2*it}}if(ge!=Te)for(let En=8*_t;En<8*_t+an;++En){const On=Ht[Nt][En]+8*ge*2*it,Jt=ge*64+(En&7)*8;for(let Fn=0;Fn<bt;++Fn)Ut.setUint16(On+Fn*2*it,Et[Nt][Jt+Fn],!0)}}}for(var Cn=new Uint16Array(be),Ut=new DataView(oe.buffer),Xt=0;Xt<Se;++Xt){H[S.idx[Xt]].decoded=!0;var Sn=H[S.idx[Xt]].type;if(H[Xt].type==2)for(var Jn=0;Jn<ye;++Jn){const _t=Ht[Xt][Jn];for(var kt=0;kt<be;++kt)Cn[kt]=Ut.getUint16(_t+kt*2*Sn,!0);for(var kt=0;kt<be;++kt)Ut.setFloat32(_t+kt*2*Sn,fe(Cn[kt]),!0)}}}function Ne(S,_,H){for(var ne,ue=1;ue<64;)ne=_[S.value],ne==65280?ue=64:ne>>8==255?ue+=ne&255:(H[ue]=ne,ue++),S.value++}function Ee(S,_){_[0]=fe(S[0]),_[1]=fe(S[1]),_[2]=fe(S[5]),_[3]=fe(S[6]),_[4]=fe(S[14]),_[5]=fe(S[15]),_[6]=fe(S[27]),_[7]=fe(S[28]),_[8]=fe(S[2]),_[9]=fe(S[4]),_[10]=fe(S[7]),_[11]=fe(S[13]),_[12]=fe(S[16]),_[13]=fe(S[26]),_[14]=fe(S[29]),_[15]=fe(S[42]),_[16]=fe(S[3]),_[17]=fe(S[8]),_[18]=fe(S[12]),_[19]=fe(S[17]),_[20]=fe(S[25]),_[21]=fe(S[30]),_[22]=fe(S[41]),_[23]=fe(S[43]),_[24]=fe(S[9]),_[25]=fe(S[11]),_[26]=fe(S[18]),_[27]=fe(S[24]),_[28]=fe(S[31]),_[29]=fe(S[40]),_[30]=fe(S[44]),_[31]=fe(S[53]),_[32]=fe(S[10]),_[33]=fe(S[19]),_[34]=fe(S[23]),_[35]=fe(S[32]),_[36]=fe(S[39]),_[37]=fe(S[45]),_[38]=fe(S[52]),_[39]=fe(S[54]),_[40]=fe(S[20]),_[41]=fe(S[22]),_[42]=fe(S[33]),_[43]=fe(S[38]),_[44]=fe(S[46]),_[45]=fe(S[51]),_[46]=fe(S[55]),_[47]=fe(S[60]),_[48]=fe(S[21]),_[49]=fe(S[34]),_[50]=fe(S[37]),_[51]=fe(S[47]),_[52]=fe(S[50]),_[53]=fe(S[56]),_[54]=fe(S[59]),_[55]=fe(S[61]),_[56]=fe(S[35]),_[57]=fe(S[36]),_[58]=fe(S[48]),_[59]=fe(S[49]),_[60]=fe(S[57]),_[61]=fe(S[58]),_[62]=fe(S[62]),_[63]=fe(S[63])}function we(S){const _=.5*Math.cos(.7853975),H=.5*Math.cos(3.14159/16),ne=.5*Math.cos(3.14159/8),ue=.5*Math.cos(3*3.14159/16),oe=.5*Math.cos(5*3.14159/16),be=.5*Math.cos(3*3.14159/8),ye=.5*Math.cos(7*3.14159/16);for(var Se=new Array(4),ge=new Array(4),Te=new Array(4),le=new Array(4),Ct=0;Ct<8;++Ct){var Ge=Ct*8;Se[0]=ne*S[Ge+2],Se[1]=be*S[Ge+2],Se[2]=ne*S[Ge+6],Se[3]=be*S[Ge+6],ge[0]=H*S[Ge+1]+ue*S[Ge+3]+oe*S[Ge+5]+ye*S[Ge+7],ge[1]=ue*S[Ge+1]-ye*S[Ge+3]-H*S[Ge+5]-oe*S[Ge+7],ge[2]=oe*S[Ge+1]-H*S[Ge+3]+ye*S[Ge+5]+ue*S[Ge+7],ge[3]=ye*S[Ge+1]-oe*S[Ge+3]+ue*S[Ge+5]-H*S[Ge+7],Te[0]=_*(S[Ge+0]+S[Ge+4]),Te[3]=_*(S[Ge+0]-S[Ge+4]),Te[1]=Se[0]+Se[3],Te[2]=Se[1]-Se[2],le[0]=Te[0]+Te[1],le[1]=Te[3]+Te[2],le[2]=Te[3]-Te[2],le[3]=Te[0]-Te[1],S[Ge+0]=le[0]+ge[0],S[Ge+1]=le[1]+ge[1],S[Ge+2]=le[2]+ge[2],S[Ge+3]=le[3]+ge[3],S[Ge+4]=le[3]-ge[3],S[Ge+5]=le[2]-ge[2],S[Ge+6]=le[1]-ge[1],S[Ge+7]=le[0]-ge[0]}for(var Le=0;Le<8;++Le)Se[0]=ne*S[16+Le],Se[1]=be*S[16+Le],Se[2]=ne*S[48+Le],Se[3]=be*S[48+Le],ge[0]=H*S[8+Le]+ue*S[24+Le]+oe*S[40+Le]+ye*S[56+Le],ge[1]=ue*S[8+Le]-ye*S[24+Le]-H*S[40+Le]-oe*S[56+Le],ge[2]=oe*S[8+Le]-H*S[24+Le]+ye*S[40+Le]+ue*S[56+Le],ge[3]=ye*S[8+Le]-oe*S[24+Le]+ue*S[40+Le]-H*S[56+Le],Te[0]=_*(S[Le]+S[32+Le]),Te[3]=_*(S[Le]-S[32+Le]),Te[1]=Se[0]+Se[3],Te[2]=Se[1]-Se[2],le[0]=Te[0]+Te[1],le[1]=Te[3]+Te[2],le[2]=Te[3]-Te[2],le[3]=Te[0]-Te[1],S[0+Le]=le[0]+ge[0],S[8+Le]=le[1]+ge[1],S[16+Le]=le[2]+ge[2],S[24+Le]=le[3]+ge[3],S[32+Le]=le[3]-ge[3],S[40+Le]=le[2]-ge[2],S[48+Le]=le[1]-ge[1],S[56+Le]=le[0]-ge[0]}function xe(S){for(var _=0;_<64;++_){var H=S[0][_],ne=S[1][_],ue=S[2][_];S[0][_]=H+1.5747*ue,S[1][_]=H-.1873*ne-.4682*ue,S[2][_]=H+1.8556*ne}}function he(S,_,H){for(var ne=0;ne<64;++ne)_[H+ne]=Nr.toHalfFloat(Ie(S[ne]))}function Ie(S){return S<=1?Math.sign(S)*Math.pow(Math.abs(S),2.2):Math.sign(S)*Math.pow(L,Math.abs(S)-1)}function De(S){return new DataView(S.array.buffer,S.offset.value,S.size)}function Ve(S){var _=S.viewer.buffer.slice(S.offset.value,S.offset.value+S.size),H=new Uint8Array(Ue(_)),ne=new Uint8Array(H.length);return Xe(H),Be(H,ne),new DataView(ne.buffer)}function Ae(S){var _=S.array.slice(S.offset.value,S.offset.value+S.size),H=yo(_),ne=new Uint8Array(H.length);return Xe(H),Be(H,ne),new DataView(ne.buffer)}function dt(S){for(var _=S.viewer,H={value:S.offset.value},ne=new Uint16Array(S.width*S.scanlineBlockSize*(S.channels*S.type)),ue=new Uint8Array(8192),oe=0,be=new Array(S.channels),ye=0;ye<S.channels;ye++)be[ye]={},be[ye].start=oe,be[ye].end=be[ye].start,be[ye].nx=S.width,be[ye].ny=S.lines,be[ye].size=S.type,oe+=be[ye].nx*be[ye].ny*be[ye].size;var Se=tt(_,H),ge=tt(_,H);if(ge>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Se<=ge)for(var ye=0;ye<ge-Se+1;ye++)ue[ye+Se]=ht(_,H);var Te=new Uint16Array(65536),le=q(ue,Te),Ct=Fe(_,H);me(S.array,_,H,Ct,ne,oe);for(var ye=0;ye<S.channels;++ye)for(var Ge=be[ye],Le=0;Le<be[ye].size;++Le)pe(ne,Ge.start+Le,Ge.nx,Ge.size,Ge.ny,Ge.nx*Ge.size,le);ve(Te,ne,oe);for(var Pe=0,at=new Uint8Array(ne.buffer.byteLength),St=0;St<S.lines;St++)for(var Et=0;Et<S.channels;Et++){var Ge=be[Et],Ht=Ge.nx*Ge.size,an=new Uint8Array(ne.buffer,Ge.end*2,Ht*2);at.set(an,Pe),Pe+=Ht*2,Ge.end+=Ht}return new DataView(at.buffer)}function je(S){var _=S.array.slice(S.offset.value,S.offset.value+S.size),H=yo(_);const ne=S.lines*S.channels*S.width,ue=S.type==1?new Uint16Array(ne):new Uint32Array(ne);let oe=0,be=0;const ye=new Array(4);for(let Se=0;Se<S.lines;Se++)for(let ge=0;ge<S.channels;ge++){let Te=0;switch(S.type){case 1:ye[0]=oe,ye[1]=ye[0]+S.width,oe=ye[1]+S.width;for(let le=0;le<S.width;++le){const Ct=H[ye[0]++]<<8|H[ye[1]++];Te+=Ct,ue[be]=Te,be++}break;case 2:ye[0]=oe,ye[1]=ye[0]+S.width,ye[2]=ye[1]+S.width,oe=ye[2]+S.width;for(let le=0;le<S.width;++le){const Ct=H[ye[0]++]<<24|H[ye[1]++]<<16|H[ye[2]++]<<8;Te+=Ct,ue[be]=Te,be++}break}}return new DataView(ue.buffer)}function Ye(S){var _=S.viewer,H={value:S.offset.value},ne=new Uint8Array(S.width*S.lines*(S.channels*S.type*2)),ue={version:$e(_,H),unknownUncompressedSize:$e(_,H),unknownCompressedSize:$e(_,H),acCompressedSize:$e(_,H),dcCompressedSize:$e(_,H),rleCompressedSize:$e(_,H),rleUncompressedSize:$e(_,H),rleRawSize:$e(_,H),totalAcUncompressedCount:$e(_,H),totalDcUncompressedCount:$e(_,H),acCompression:$e(_,H)};if(ue.version<2)throw"EXRLoader.parse: "+It.compression+" version "+ue.version+" is unsupported";for(var oe=new Array,be=tt(_,H)-2;be>0;){var ye=qe(_.buffer,H),Se=ht(_,H),ge=Se>>2&3,Te=(Se>>4)-1,le=new Int8Array([Te])[0],Ct=ht(_,H);oe.push({name:ye,index:le,type:Ct,compression:ge}),be-=ye.length+3}for(var Ge=It.channels,Le=new Array(S.channels),Pe=0;Pe<S.channels;++Pe){var at=Le[Pe]={},St=Ge[Pe];at.name=St.name,at.compression=0,at.decoded=!1,at.type=St.pixelType,at.pLinear=St.pLinear,at.width=S.width,at.height=S.lines}for(var Et={idx:new Array(3)},Ht=0;Ht<S.channels;++Ht)for(var at=Le[Ht],Pe=0;Pe<oe.length;++Pe){var an=oe[Pe];at.name==an.name&&(at.compression=an.compression,an.index>=0&&(Et.idx[an.index]=Ht),at.offset=Ht)}if(ue.acCompressedSize>0)switch(ue.acCompression){case 0:var Ut=new Uint16Array(ue.totalAcUncompressedCount);me(S.array,_,H,ue.acCompressedSize,Ut,ue.totalAcUncompressedCount);break;case 1:var bt=S.array.slice(H.value,H.value+ue.totalAcUncompressedCount),Cn=yo(bt),Ut=new Uint16Array(Cn.buffer);H.value+=ue.totalAcUncompressedCount;break}if(ue.dcCompressedSize>0){var Xt={array:S.array,offset:H,size:ue.dcCompressedSize},Sn=new Uint16Array(Ae(Xt).buffer);H.value+=ue.dcCompressedSize}if(ue.rleRawSize>0){var bt=S.array.slice(H.value,H.value+ue.rleCompressedSize),Cn=yo(bt),Jn=Ue(Cn.buffer);H.value+=ue.rleCompressedSize}for(var kt=0,_t=new Array(Le.length),Pe=0;Pe<_t.length;++Pe)_t[Pe]=new Array;for(var Zt=0;Zt<S.lines;++Zt)for(var Nt=0;Nt<Le.length;++Nt)_t[Nt].push(kt),kt+=Le[Nt].width*S.type*2;Re(Et,_t,Le,Ut,Sn,ne);for(var Pe=0;Pe<Le.length;++Pe){var at=Le[Pe];if(!at.decoded)switch(at.compression){case 2:for(var it=0,En=0,Zt=0;Zt<S.lines;++Zt){for(var On=_t[Pe][it],Jt=0;Jt<at.width;++Jt){for(var Fn=0;Fn<2*at.type;++Fn)ne[On++]=Jn[En+Fn*at.width*at.height];En++}it++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ne.buffer)}function qe(S,_){for(var H=new Uint8Array(S),ne=0;H[_.value+ne]!=0;)ne+=1;var ue=new TextDecoder().decode(H.slice(_.value,_.value+ne));return _.value=_.value+ne+1,ue}function ke(S,_,H){var ne=new TextDecoder().decode(new Uint8Array(S).slice(_.value,_.value+H));return _.value=_.value+H,ne}function vt(S,_){var H=Ze(S,_),ne=Fe(S,_);return[H,ne]}function Mt(S,_){var H=Fe(S,_),ne=Fe(S,_);return[H,ne]}function Ze(S,_){var H=S.getInt32(_.value,!0);return _.value=_.value+4,H}function Fe(S,_){var H=S.getUint32(_.value,!0);return _.value=_.value+4,H}function He(S,_){var H=S[_.value];return _.value=_.value+1,H}function ht(S,_){var H=S.getUint8(_.value);return _.value=_.value+1,H}const $e=function(S,_){let H;return"getBigInt64"in DataView.prototype?H=Number(S.getBigInt64(_.value,!0)):H=S.getUint32(_.value+4,!0)+Number(S.getUint32(_.value,!0)<<32),_.value+=8,H};function ut(S,_){var H=S.getFloat32(_.value,!0);return _.value+=4,H}function gt(S,_){return Nr.toHalfFloat(ut(S,_))}function fe(S){var _=(S&31744)>>10,H=S&1023;return(S>>15?-1:1)*(_?_===31?H?NaN:1/0:Math.pow(2,_-15)*(1+H/1024):6103515625e-14*(H/1024))}function tt(S,_){var H=S.getUint16(_.value,!0);return _.value+=2,H}function pn(S,_){return fe(tt(S,_))}function ct(S,_,H,ne){for(var ue=H.value,oe=[];H.value<ue+ne-1;){var be=qe(_,H),ye=Ze(S,H),Se=ht(S,H);H.value+=3;var ge=Ze(S,H),Te=Ze(S,H);oe.push({name:be,pixelType:ye,pLinear:Se,xSampling:ge,ySampling:Te})}return H.value+=1,oe}function nt(S,_){var H=ut(S,_),ne=ut(S,_),ue=ut(S,_),oe=ut(S,_),be=ut(S,_),ye=ut(S,_),Se=ut(S,_),ge=ut(S,_);return{redX:H,redY:ne,greenX:ue,greenY:oe,blueX:be,blueY:ye,whiteX:Se,whiteY:ge}}function zt(S,_){var H=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ne=ht(S,_);return H[ne]}function yt(S,_){var H=Fe(S,_),ne=Fe(S,_),ue=Fe(S,_),oe=Fe(S,_);return{xMin:H,yMin:ne,xMax:ue,yMax:oe}}function Je(S,_){var H=["INCREASING_Y"],ne=ht(S,_);return H[ne]}function Dt(S,_){var H=ut(S,_),ne=ut(S,_);return[H,ne]}function ln(S,_){var H=ut(S,_),ne=ut(S,_),ue=ut(S,_);return[H,ne,ue]}function nn(S,_,H,ne,ue){if(ne==="string"||ne==="stringvector"||ne==="iccProfile")return ke(_,H,ue);if(ne==="chlist")return ct(S,_,H,ue);if(ne==="chromaticities")return nt(S,H);if(ne==="compression")return zt(S,H);if(ne==="box2i")return yt(S,H);if(ne==="lineOrder")return Je(S,H);if(ne==="float")return ut(S,H);if(ne==="v2f")return Dt(S,H);if(ne==="v3f")return ln(S,H);if(ne==="int")return Ze(S,H);if(ne==="rational")return vt(S,H);if(ne==="timecode")return Mt(S,H);if(ne==="preview")return H.value+=ue,"skipped";H.value+=ue}function qt(S,_,H){const ne={};if(S.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ne.version=S.getUint8(4);const ue=S.getUint8(5);ne.spec={singleTile:!!(ue&2),longName:!!(ue&4),deepFormat:!!(ue&8),multiPart:!!(ue&16)},H.value=8;for(var oe=!0;oe;){var be=qe(_,H);if(be==0)oe=!1;else{var ye=qe(_,H),Se=Fe(S,H),ge=nn(S,_,H,ye,Se);ge===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ye}'.`):ne[be]=ge}}if((ue&-5)!=0)throw console.error("EXRHeader:",ne),"THREE.EXRLoader: provided file is currently unsupported.";return ne}function mn(S,_,H,ne,ue){const oe={size:0,viewer:_,array:H,offset:ne,width:S.dataWindow.xMax-S.dataWindow.xMin+1,height:S.dataWindow.yMax-S.dataWindow.yMin+1,channels:S.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:S.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ei?"colorSpace":"encoding"]:null};switch(S.compression){case"NO_COMPRESSION":oe.lines=1,oe.uncompress=De;break;case"RLE_COMPRESSION":oe.lines=1,oe.uncompress=Ve;break;case"ZIPS_COMPRESSION":oe.lines=1,oe.uncompress=Ae;break;case"ZIP_COMPRESSION":oe.lines=16,oe.uncompress=Ae;break;case"PIZ_COMPRESSION":oe.lines=32,oe.uncompress=dt;break;case"PXR24_COMPRESSION":oe.lines=16,oe.uncompress=je;break;case"DWAA_COMPRESSION":oe.lines=32,oe.uncompress=Ye;break;case"DWAB_COMPRESSION":oe.lines=256,oe.uncompress=Ye;break;default:throw"EXRLoader.parse: "+S.compression+" is unsupported"}if(oe.scanlineBlockSize=oe.lines,oe.type==1)switch(ue){case Xa:oe.getter=pn,oe.inputSize=2;break;case sa:oe.getter=tt,oe.inputSize=2;break}else if(oe.type==2)switch(ue){case Xa:oe.getter=ut,oe.inputSize=4;break;case sa:oe.getter=gt,oe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+oe.type+" for "+S.compression+".";oe.blockCount=(S.dataWindow.yMax+1)/oe.scanlineBlockSize;for(var be=0;be<oe.blockCount;be++)$e(_,ne);oe.outputChannels=oe.channels==3?4:oe.channels;const ye=oe.width*oe.height*oe.outputChannels;switch(ue){case Xa:oe.byteArray=new Float32Array(ye),oe.channels<oe.outputChannels&&oe.byteArray.fill(1,0,ye);break;case sa:oe.byteArray=new Uint16Array(ye),oe.channels<oe.outputChannels&&oe.byteArray.fill(15360,0,ye);break;default:console.error("THREE.EXRLoader: unsupported type: ",ue);break}return oe.bytesPerLine=oe.width*oe.inputSize*oe.channels,oe.outputChannels==4?oe.format=wr:oe.format=Om,Ei?oe.colorSpace="srgb-linear":oe.encoding=3e3,oe}const gn=new DataView(n),rn=new Uint8Array(n),yn={value:0},It=qt(gn,n,yn),Qe=mn(It,gn,rn,yn,this.type),Kt={value:0},Ot={R:0,G:1,B:2,A:3,Y:0};for(let S=0;S<Qe.height/Qe.scanlineBlockSize;S++){const _=Fe(gn,yn);Qe.size=Fe(gn,yn),Qe.lines=_+Qe.scanlineBlockSize>Qe.height?Qe.height-_:Qe.scanlineBlockSize;const ne=Qe.size<Qe.lines*Qe.bytesPerLine?Qe.uncompress(Qe):De(Qe);yn.value+=Qe.size;for(let ue=0;ue<Qe.scanlineBlockSize;ue++){const oe=ue+S*Qe.scanlineBlockSize;if(oe>=Qe.height)break;for(let be=0;be<Qe.channels;be++){const ye=Ot[It.channels[be].name];for(let Se=0;Se<Qe.width;Se++){Kt.value=(ue*(Qe.channels*Qe.width)+be*Qe.width+Se)*Qe.inputSize;const ge=(Qe.height-1-oe)*(Qe.width*Qe.outputChannels)+Se*Qe.outputChannels+ye;Qe.byteArray[ge]=Qe.getter(ne,Kt)}}}}return{header:It,width:Qe.width,height:Qe.height,data:Qe.byteArray,format:Qe.format,[Ei?"colorSpace":"encoding"]:Qe[Ei?"colorSpace":"encoding"],type:this.type}}setDataType(n){return this.type=n,this}load(n,s,h,r){function l(c,f){Ei?c.colorSpace=f.colorSpace:c.encoding=f.encoding,c.minFilter=ca,c.magFilter=ca,c.generateMipmaps=!1,c.flipY=!1,s&&s(c,f)}return super.load(n,l,h,r)}}function F1(i,n){if(typeof i!="object"||!i)return i;var s=i[Symbol.toPrimitive];if(s!==void 0){var h=s.call(i,n);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function L1(i){var n=F1(i,"string");return typeof n=="symbol"?n:n+""}function V1(i,n,s){return(n=L1(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s,i}function Cd(i,n){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(i);n&&(h=h.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),s.push.apply(s,h)}return s}function wt(i){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Cd(Object(s),!0).forEach(function(h){V1(i,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):Cd(Object(s)).forEach(function(h){Object.defineProperty(i,h,Object.getOwnPropertyDescriptor(s,h))})}return i}const Y1=new ml;new Js;const q1=new rt;new zm;const pl=new uv,Mn=new rt,ya=new ml,Pl=new rt,X1=i=>{const[n,s,h]=i;return new rt(n,s,h)},Ud=({x:i,y:n,z:s,w:h})=>Y1.set(i,n,s,h),Z1=i=>{if(Array.isArray(i))return new os(i[0],i[1],i[2]);if(typeof i=="number")return new os(i,i,i);{const n=i;return new os(n.x,n.y,n.z)}},Q1={fixed:1,dynamic:0,kinematicPosition:2,kinematicVelocity:3},Lv=i=>Q1[i],K1=(i,n)=>{const s=Array.from(i);for(let h=0;h<i.length/3;h++)s[h*3]*=n.x,s[h*3+1]*=n.y,s[h*3+2]*=n.z;return s},Vv=i=>i?i instanceof ml?[i.x,i.y,i.z,i.w]:i instanceof rt||i instanceof Js?[i.x,i.y,i.z]:Array.isArray(i)?i:[i]:[0];function fl(i){const n=$.useRef(void 0);return n.current===void 0&&(n.current={value:typeof i=="function"?i():i}),n.current.value}const P1=i=>{const n=$.useRef(i),s=$.useRef(0),h=$.useRef(0);$.useEffect(()=>{n.current=i},[i]),$.useEffect(()=>{const r=()=>{const l=performance.now(),c=l-h.current;s.current=requestAnimationFrame(r),n.current(c/1e3),h.current=l};return s.current=requestAnimationFrame(r),()=>cancelAnimationFrame(s.current)},[])},I1=({onStep:i,updatePriority:n})=>(zi((s,h)=>{i(h)},n),null),k1=({onStep:i})=>(P1(n=>{i(n)}),null),J1=({onStep:i,type:n,updatePriority:s})=>n==="independent"?ot.createElement(k1,{onStep:i}):ot.createElement(I1,{onStep:i,updatePriority:s});var W1=$.memo(J1);function $1(i,n){if(i==null)return{};var s={};for(var h in i)if({}.hasOwnProperty.call(i,h)){if(n.indexOf(h)!==-1)continue;s[h]=i[h]}return s}function Ho(i,n){if(i==null)return{};var s,h,r=$1(i,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);for(h=0;h<l.length;h++)s=l[h],n.indexOf(s)===-1&&{}.propertyIsEnumerable.call(i,s)&&(r[s]=i[s])}return r}const eg=["mass","linearDamping","angularDamping","type","onCollisionEnter","onCollisionExit","onIntersectionEnter","onIntersectionExit","onContactForce","children","canSleep","ccd","gravityScale","softCcdPrediction","ref"],tg=(i,n,s)=>{const h=n.slice();if(i==="heightfield"){const l=h[3];return l.x*=s.x,l.x*=s.y,l.x*=s.z,h}if(i==="trimesh"||i==="convexHull")return h[0]=K1(h[0],s),h;const r=[s.x,s.y,s.z,s.x,s.x];return h.map((l,c)=>r[c]*l)},ng=(i,n,s,h)=>{const r=tg(i.shape,i.args,s),l=r0[i.shape](...r);return n.createCollider(l,h==null?void 0:h())},ag=["shape","args"],Ad="Please pick ONLY ONE of the `density`, `mass` and `massProperties` options.",lg=(i,n)=>{if(n.density!==void 0){if(n.mass!==void 0||n.massProperties!==void 0)throw new Error(Ad);i.setDensity(n.density);return}if(n.mass!==void 0){if(n.massProperties!==void 0)throw new Error(Ad);i.setMass(n.mass);return}n.massProperties!==void 0&&i.setMassProperties(n.massProperties.mass,n.massProperties.centerOfMass,n.massProperties.principalAngularInertia,n.massProperties.angularInertiaLocalFrame)},Yv={sensor:(i,n)=>{i.setSensor(n)},collisionGroups:(i,n)=>{i.setCollisionGroups(n)},solverGroups:(i,n)=>{i.setSolverGroups(n)},friction:(i,n)=>{i.setFriction(n)},frictionCombineRule:(i,n)=>{i.setFrictionCombineRule(n)},restitution:(i,n)=>{i.setRestitution(n)},restitutionCombineRule:(i,n)=>{i.setRestitutionCombineRule(n)},activeCollisionTypes:(i,n)=>{i.setActiveCollisionTypes(n)},contactSkin:(i,n)=>{i.setContactSkin(n)},quaternion:()=>{},position:()=>{},rotation:()=>{},scale:()=>{}},qv=Object.keys(Yv),rg=(i,n,s)=>{const h=s.get(i.handle);if(h){var r;const l=h.object.parent.getWorldScale(q1),c=(r=h.worldParent)===null||r===void 0?void 0:r.matrixWorld.clone().invert();h.object.updateWorldMatrix(!0,!1),pl.copy(h.object.matrixWorld),c&&pl.premultiply(c),pl.decompose(Mn,ya,Pl),i.parent()?(i.setTranslationWrtParent({x:Mn.x*l.x,y:Mn.y*l.y,z:Mn.z*l.z}),i.setRotationWrtParent(ya)):(i.setTranslation({x:Mn.x*l.x,y:Mn.y*l.y,z:Mn.z*l.z}),i.setRotation(ya)),qv.forEach(f=>{if(f in n){const u=n[f];Yv[f](i,u,n)}}),lg(i,n)}},ig=(i,n,s)=>{const h=$.useMemo(()=>qv.flatMap(r=>Vv(n[r])),[n]);$.useEffect(()=>{const r=i();rg(r,n,s)},[...h,i])},og=i=>{let n=!1;return i.traverseAncestors(s=>{s.userData.r3RapierType==="MeshCollider"&&(n=!0)}),n},ug=(i,n,s)=>({collider:i,worldParent:s||void 0,object:n}),sg={cuboid:"cuboid",ball:"ball",hull:"convexHull",trimesh:"trimesh"},cg=({object:i,ignoreMeshColliders:n=!0,options:s})=>{const h=[];i.updateWorldMatrix(!0,!1);const r=i.matrixWorld.clone().invert(),l=c=>{if("isMesh"in c){if(n&&og(c))return;const f=c.getWorldScale(Pl),u=sg[s.colliders||"cuboid"];c.updateWorldMatrix(!0,!1),pl.copy(c.matrixWorld).premultiply(r).decompose(Mn,ya,Pl);const v=new Js().setFromQuaternion(ya,"XYZ"),{geometry:p}=c,{args:g,offset:y}=fg(p,s.colliders||"cuboid"),E=wt(wt({},Zv(s)),{},{args:g,shape:u,rotation:[v.x,v.y,v.z],position:[Mn.x+y.x*f.x,Mn.y+y.y*f.y,Mn.z+y.z*f.z],scale:[f.x,f.y,f.z]});h.push(E)}};return s.includeInvisible?i.traverse(l):i.traverseVisible(l),h},fg=(i,n)=>{switch(n){case"cuboid":{i.computeBoundingBox();const{boundingBox:h}=i,r=h.getSize(new rt);return{args:[r.x/2,r.y/2,r.z/2],offset:h.getCenter(new rt)}}case"ball":{i.computeBoundingSphere();const{boundingSphere:h}=i;return{args:[h.radius],offset:h.center}}case"trimesh":{var s;const h=i.index?i.clone():b1(i);return{args:[h.attributes.position.array,(s=h.index)===null||s===void 0?void 0:s.array],offset:new rt}}case"hull":return{args:[i.clone().attributes.position.array],offset:new rt}}return{args:[],offset:new rt}},Xv=i=>({collision:!!(i!=null&&i.onCollisionEnter||i!=null&&i.onCollisionExit||i!=null&&i.onIntersectionEnter||i!=null&&i.onIntersectionExit),contactForce:!!(i!=null&&i.onContactForce)}),dg=(i,n,s,h={})=>{const{onCollisionEnter:r,onCollisionExit:l,onIntersectionEnter:c,onIntersectionExit:f,onContactForce:u}=n;$.useEffect(()=>{const v=i();if(v){const{collision:p,contactForce:g}=Xv(n),y=p||h.collision,E=g||h.contactForce;y&&E?v.setActiveEvents(po.COLLISION_EVENTS|po.CONTACT_FORCE_EVENTS):y?v.setActiveEvents(po.COLLISION_EVENTS):E&&v.setActiveEvents(po.CONTACT_FORCE_EVENTS),s.set(v.handle,{onCollisionEnter:r,onCollisionExit:l,onIntersectionEnter:c,onIntersectionExit:f,onContactForce:u})}return()=>{v&&s.delete(v.handle)}},[r,l,c,f,u,h])},Zv=(i={})=>Ho(i,eg),Yo=()=>{const i=$.useContext(Qv);if(!i)throw new Error("react-three-rapier: useRapier must be used within <Physics />!");return i},rc=(i,n,s=!0)=>{const[h,r]=$.useState([]);return $.useEffect(()=>{i.current&&n.colliders!==!1&&r(cg({object:i.current,options:n,ignoreMeshColliders:s}))},[n.colliders]),h},vg=$.memo(()=>{const{world:i}=Yo(),n=$.useRef(null);return zi(()=>{const s=n.current;if(!s)return;const h=i.debugRender(),r=new wm;r.setAttribute("position",new Oo(h.vertices,3)),r.setAttribute("color",new Oo(h.colors,4)),s.geometry.dispose(),s.geometry=r}),ot.createElement("group",null,ot.createElement("lineSegments",{ref:n,frustumCulled:!1},ot.createElement("lineBasicMaterial",{color:16777215,vertexColors:!0}),ot.createElement("bufferGeometry",null)))}),hg=i=>{let n;const s={get(c,f){return n||(n=i()),Reflect.get(n,f)},set(c,f,u){return n||(n=i()),Reflect.set(n,f,u)}};return{proxy:new Proxy({},s),reset:()=>{n=void 0},set:c=>{n=c}}},Qv=$.createContext(void 0),So=(i,n)=>{var s,h,r,l,c,f;return{target:{rigidBody:i.rigidBody.object,collider:i.collider.object,colliderObject:(s=i.collider.state)===null||s===void 0?void 0:s.object,rigidBodyObject:(h=i.rigidBody.state)===null||h===void 0?void 0:h.object},other:{rigidBody:n.rigidBody.object,collider:n.collider.object,colliderObject:(r=n.collider.state)===null||r===void 0?void 0:r.object,rigidBodyObject:(l=n.rigidBody.state)===null||l===void 0?void 0:l.object},rigidBody:n.rigidBody.object,collider:n.collider.object,colliderObject:(c=n.collider.state)===null||c===void 0?void 0:c.object,rigidBodyObject:(f=n.rigidBody.state)===null||f===void 0?void 0:f.object}},xd=async()=>{let i=await Sm(()=>import("./vendor-rapier-BodjHcp2.js"),[]);return await i.init(),i},pg=i=>{const{colliders:n="cuboid",children:s,timeStep:h=1/60,paused:r=!1,interpolate:l=!0,updatePriority:c,updateLoop:f="follow",debug:u=!1,gravity:v=[0,-9.81,0],allowedLinearError:p=.001,predictionDistance:g=.002,numSolverIterations:y=4,numAdditionalFrictionIterations:E=4,numInternalPgsIterations:T=1,minIslandSize:x=128,maxCcdSubsteps:U=1,contactNaturalFrequency:A=30,lengthUnit:M=1}=i,z=Ws(xd,["@react-thee/rapier",xd]),{invalidate:N}=Za(),O=fl(()=>new Map),G=fl(()=>new Map),V=fl(()=>new Map),D=fl(()=>new Map),L=fl(()=>new a0(!1)),q=fl(()=>new Set),ie=fl(()=>new Set),{proxy:w,reset:X,set:F}=fl(()=>hg(()=>new z.World(X1(v))));$.useEffect(()=>()=>{w.free(),X()},[]),$.useEffect(()=>{w.gravity=Z1(v),w.integrationParameters.numSolverIterations=y,w.integrationParameters.numAdditionalFrictionIterations=E,w.integrationParameters.numInternalPgsIterations=T,w.integrationParameters.normalizedAllowedLinearError=p,w.integrationParameters.minIslandSize=x,w.integrationParameters.maxCcdSubsteps=U,w.integrationParameters.normalizedPredictionDistance=g,w.lengthUnit=M,w.integrationParameters.contact_natural_frequency=A},[w,...v,y,E,T,p,x,U,g,M,A]);const ce=$.useCallback(Y=>{var R;const j=w.getCollider(Y),I=D.get(Y),Q=G.get(Y),W=j==null||(R=j.parent())===null||R===void 0?void 0:R.handle,K=W!==void 0?w.getRigidBody(W):void 0,ae=K&&W!==void 0?V.get(W):void 0,se=W!==void 0?O.get(W):void 0;return{collider:{object:j,events:I,state:Q},rigidBody:{object:K,events:ae,state:se}}},[]),[C]=$.useState({previousState:{},accumulator:0}),k=$.useCallback(Y=>{const R=w,j=h==="vary",I=Nm.clamp(Y,0,.5),Q=K=>{q.forEach(ae=>{ae.current(R)}),R.timestep=K,R.step(L),ie.forEach(ae=>{ae.current(R)})};if(j)Q(I);else for(C.accumulator+=I;C.accumulator>=h;)l&&(C.previousState={},R.forEachRigidBody(K=>{C.previousState[K.handle]={position:K.translation(),rotation:K.rotation()}})),Q(h),C.accumulator-=h;const W=j||!l||r?1:C.accumulator/h;O.forEach((K,ae)=>{const se=R.getRigidBody(ae),pe=V.get(ae);if(pe!=null&&pe.onSleep||pe!=null&&pe.onWake){if(se.isSleeping()&&!K.isSleeping){var Ce;pe==null||(Ce=pe.onSleep)===null||Ce===void 0||Ce.call(pe)}if(!se.isSleeping()&&K.isSleeping){var me;pe==null||(me=pe.onWake)===null||me===void 0||me.call(pe)}K.isSleeping=se.isSleeping()}if(!se||se.isSleeping()&&!("isInstancedMesh"in K.object)||!K.setMatrix)return;let ve=se.translation(),Xe=se.rotation(),Be=C.previousState[ae];Be&&(pl.compose(Be.position,Ud(Be.rotation),K.scale).premultiply(K.invertedWorldMatrix).decompose(Mn,ya,Pl),K.meshType=="mesh"&&(K.object.position.copy(Mn),K.object.quaternion.copy(ya))),pl.compose(ve,Ud(Xe),K.scale).premultiply(K.invertedWorldMatrix).decompose(Mn,ya,Pl),K.meshType=="instancedMesh"?K.setMatrix(pl):(K.object.position.lerp(Mn,W),K.object.quaternion.slerp(ya,W))}),L.drainCollisionEvents((K,ae,se)=>{const pe=ce(K),Ce=ce(ae);if(!(pe!=null&&pe.collider.object)||!(Ce!=null&&Ce.collider.object))return;const me=So(pe,Ce),ve=So(Ce,pe);if(se)R.contactPair(pe.collider.object,Ce.collider.object,($e,ut)=>{var gt,fe,tt,pn,ct,nt,zt,yt;(gt=pe.rigidBody.events)===null||gt===void 0||(fe=gt.onCollisionEnter)===null||fe===void 0||fe.call(gt,wt(wt({},me),{},{manifold:$e,flipped:ut})),(tt=Ce.rigidBody.events)===null||tt===void 0||(pn=tt.onCollisionEnter)===null||pn===void 0||pn.call(tt,wt(wt({},ve),{},{manifold:$e,flipped:ut})),(ct=pe.collider.events)===null||ct===void 0||(nt=ct.onCollisionEnter)===null||nt===void 0||nt.call(ct,wt(wt({},me),{},{manifold:$e,flipped:ut})),(zt=Ce.collider.events)===null||zt===void 0||(yt=zt.onCollisionEnter)===null||yt===void 0||yt.call(zt,wt(wt({},ve),{},{manifold:$e,flipped:ut}))});else{var Xe,Be,Ue,Re,Ne,Ee,we,xe;(Xe=pe.rigidBody.events)===null||Xe===void 0||(Be=Xe.onCollisionExit)===null||Be===void 0||Be.call(Xe,me),(Ue=Ce.rigidBody.events)===null||Ue===void 0||(Re=Ue.onCollisionExit)===null||Re===void 0||Re.call(Ue,ve),(Ne=pe.collider.events)===null||Ne===void 0||(Ee=Ne.onCollisionExit)===null||Ee===void 0||Ee.call(Ne,me),(we=Ce.collider.events)===null||we===void 0||(xe=we.onCollisionExit)===null||xe===void 0||xe.call(we,ve)}if(se){if(R.intersectionPair(pe.collider.object,Ce.collider.object)){var he,Ie,De,Ve,Ae,dt,je,Ye;(he=pe.rigidBody.events)===null||he===void 0||(Ie=he.onIntersectionEnter)===null||Ie===void 0||Ie.call(he,me),(De=Ce.rigidBody.events)===null||De===void 0||(Ve=De.onIntersectionEnter)===null||Ve===void 0||Ve.call(De,ve),(Ae=pe.collider.events)===null||Ae===void 0||(dt=Ae.onIntersectionEnter)===null||dt===void 0||dt.call(Ae,me),(je=Ce.collider.events)===null||je===void 0||(Ye=je.onIntersectionEnter)===null||Ye===void 0||Ye.call(je,ve)}}else{var qe,ke,vt,Mt,Ze,Fe,He,ht;(qe=pe.rigidBody.events)===null||qe===void 0||(ke=qe.onIntersectionExit)===null||ke===void 0||ke.call(qe,me),(vt=Ce.rigidBody.events)===null||vt===void 0||(Mt=vt.onIntersectionExit)===null||Mt===void 0||Mt.call(vt,ve),(Ze=pe.collider.events)===null||Ze===void 0||(Fe=Ze.onIntersectionExit)===null||Fe===void 0||Fe.call(Ze,me),(He=Ce.collider.events)===null||He===void 0||(ht=He.onIntersectionExit)===null||ht===void 0||ht.call(He,ve)}}),L.drainContactForceEvents(K=>{var ae,se,pe,Ce,me,ve,Xe,Be;const Ue=ce(K.collider1()),Re=ce(K.collider2());if(!(Ue!=null&&Ue.collider.object)||!(Re!=null&&Re.collider.object))return;const Ne=So(Ue,Re),Ee=So(Re,Ue);(ae=Ue.rigidBody.events)===null||ae===void 0||(se=ae.onContactForce)===null||se===void 0||se.call(ae,wt(wt({},Ne),{},{totalForce:K.totalForce(),totalForceMagnitude:K.totalForceMagnitude(),maxForceDirection:K.maxForceDirection(),maxForceMagnitude:K.maxForceMagnitude()})),(pe=Re.rigidBody.events)===null||pe===void 0||(Ce=pe.onContactForce)===null||Ce===void 0||Ce.call(pe,wt(wt({},Ee),{},{totalForce:K.totalForce(),totalForceMagnitude:K.totalForceMagnitude(),maxForceDirection:K.maxForceDirection(),maxForceMagnitude:K.maxForceMagnitude()})),(me=Ue.collider.events)===null||me===void 0||(ve=me.onContactForce)===null||ve===void 0||ve.call(me,wt(wt({},Ne),{},{totalForce:K.totalForce(),totalForceMagnitude:K.totalForceMagnitude(),maxForceDirection:K.maxForceDirection(),maxForceMagnitude:K.maxForceMagnitude()})),(Xe=Re.collider.events)===null||Xe===void 0||(Be=Xe.onContactForce)===null||Be===void 0||Be.call(Xe,wt(wt({},Ee),{},{totalForce:K.totalForce(),totalForceMagnitude:K.totalForceMagnitude(),maxForceDirection:K.maxForceDirection(),maxForceMagnitude:K.maxForceMagnitude()}))}),R.forEachActiveRigidBody(()=>{N()})},[r,h,l,w]),ee=$.useMemo(()=>({rapier:z,world:w,setWorld:Y=>{F(Y)},physicsOptions:{colliders:n,gravity:v},rigidBodyStates:O,colliderStates:G,rigidBodyEvents:V,colliderEvents:D,beforeStepCallbacks:q,afterStepCallbacks:ie,isPaused:r,isDebug:u,step:k}),[r,k,u,n,v]),Z=$.useCallback(Y=>{r||k(Y)},[r,k]);return ot.createElement(Qv.Provider,{value:ee},ot.createElement(W1,{onStep:Z,type:f,updatePriority:c}),u&&ot.createElement(vg,null),s)};function hn(){return hn=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var h in s)({}).hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},hn.apply(null,arguments)}const ic=(i,n=null)=>{const s=$.useRef(n);return i&&typeof i!="function"?(i.current||(i.current=s.current),i):s},Kv=(i,n,s)=>{const h=$.useRef(void 0),r=$.useCallback(()=>(h.current||(h.current=i()),h.current),s);return $.useEffect(()=>{const l=r(),c=()=>n(l);return()=>{c(),h.current=void 0}},[r]),r},mg=i=>{var n;const s=Lv((i==null?void 0:i.type)||"dynamic"),h=new l0(s);return h.canSleep=(n=i==null?void 0:i.canSleep)!==null&&n!==void 0?n:!0,h},gg=({rigidBody:i,object:n,setMatrix:s,getMatrix:h,worldScale:r,meshType:l="mesh"})=>{n.updateWorldMatrix(!0,!1);const c=n.parent.matrixWorld.clone().invert();return{object:n,rigidBody:i,invertedWorldMatrix:c,setMatrix:s||(f=>{n.matrix.copy(f)}),getMatrix:h||(f=>f.copy(n.matrix)),scale:r||n.getWorldScale(Pl).clone(),isSleeping:!1,meshType:l}},yg=["args","colliders","canSleep"],Pv={gravityScale:(i,n)=>{i.setGravityScale(n,!0)},additionalSolverIterations(i,n){i.setAdditionalSolverIterations(n)},linearDamping:(i,n)=>{i.setLinearDamping(n)},angularDamping:(i,n)=>{i.setAngularDamping(n)},dominanceGroup:(i,n)=>{i.setDominanceGroup(n)},enabledRotations:(i,[n,s,h])=>{i.setEnabledRotations(n,s,h,!0)},enabledTranslations:(i,[n,s,h])=>{i.setEnabledTranslations(n,s,h,!0)},lockRotations:(i,n)=>{i.lockRotations(n,!0)},lockTranslations:(i,n)=>{i.lockTranslations(n,!0)},angularVelocity:(i,[n,s,h])=>{i.setAngvel({x:n,y:s,z:h},!0)},linearVelocity:(i,[n,s,h])=>{i.setLinvel({x:n,y:s,z:h},!0)},ccd:(i,n)=>{i.enableCcd(n)},softCcdPrediction:(i,n)=>{i.setSoftCcdPrediction(n)},userData:(i,n)=>{i.userData=n},type(i,n){i.setBodyType(Lv(n),!0)},position:()=>{},rotation:()=>{},quaternion:()=>{},scale:()=>{}},Iv=Object.keys(Pv),Sg=(i,n,s,h=!0)=>{if(!i)return;const r=s.get(i.handle);r&&(h&&(r.object.updateWorldMatrix(!0,!1),pl.copy(r.object.matrixWorld).decompose(Mn,ya,Pl),i.setTranslation(Mn,!1),i.setRotation(ya,!1)),Iv.forEach(l=>{l in n&&Pv[l](i,n[l])}))},Eg=(i,n,s,h=!0)=>{const r=$.useMemo(()=>Iv.flatMap(l=>Vv(n[l])),[n]);$.useEffect(()=>{const l=i();Sg(l,n,s,h)},r)},bg=(i,n,s)=>{const{onWake:h,onSleep:r,onCollisionEnter:l,onCollisionExit:c,onIntersectionEnter:f,onIntersectionExit:u,onContactForce:v}=n,p={onWake:h,onSleep:r,onCollisionEnter:l,onCollisionExit:c,onIntersectionEnter:f,onIntersectionExit:u,onContactForce:v};$.useEffect(()=>{const g=i();return s.set(g.handle,p),()=>{s.delete(g.handle)}},[h,r,l,c,f,u,v])},_g=({x:i,y:n,z:s}={x:0,y:0,z:0})=>new rt(i,n,s),kn=$.memo(i=>{const{children:n,position:s,rotation:h,quaternion:r,scale:l,name:c}=i,{world:f,colliderEvents:u,colliderStates:v}=Yo(),p=Wv(),g=ic(i.ref),y=$.useRef(null),E=ag.flatMap(U=>Array.isArray(i[U])?i[U]:[i[U]]),T=Kv(()=>{const U=y.current.getWorldScale(_g()),A=ng(i,f,U,p==null?void 0:p.getRigidBody);return typeof i.ref=="function"&&i.ref(A),g.current=A,A},U=>{f.getCollider(U.handle)&&f.removeCollider(U,!0)},[...E,p]);$.useEffect(()=>{const U=T();return v.set(U.handle,ug(U,y.current,p==null?void 0:p.ref.current)),()=>{v.delete(U.handle)}},[T]);const x=$.useMemo(()=>wt(wt({},Zv(p==null?void 0:p.options)),i),[i,p==null?void 0:p.options]);return ig(T,x,v),dg(T,x,u,Xv(p==null?void 0:p.options)),ot.createElement("object3D",{position:s,rotation:h,quaternion:r,scale:l,ref:y,name:c},n)}),oc=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"cuboid",ref:n})));oc.displayName="CuboidCollider";const Tg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"roundCuboid",ref:n})));Tg.displayName="RoundCuboidCollider";const Mg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"ball",ref:n})));Mg.displayName="BallCollider";const Cg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"capsule",ref:n})));Cg.displayName="CapsuleCollider";const Ug=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"heightfield",ref:n})));Ug.displayName="HeightfieldCollider";const Ag=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"trimesh",ref:n})));Ag.displayName="TrimeshCollider";const xg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"cone",ref:n})));xg.displayName="ConeCollider";const Rg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"roundCone",ref:n})));Rg.displayName="RoundConeCollider";const kv=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"cylinder",ref:n})));kv.displayName="CylinderCollider";kv.displayName="RoundCylinderCollider";const Dg=ot.forwardRef((i,n)=>ot.createElement(kn,hn({},i,{shape:"convexHull",ref:n})));Dg.displayName="ConvexHullCollider";const Og=["ref","children","type","position","rotation","scale","quaternion","transformState"],Jv=$.createContext(void 0),Wv=()=>$.useContext(Jv),qo=$.memo(i=>{const{ref:n,children:s,type:h,position:r,rotation:l,scale:c,quaternion:f,transformState:u}=i,v=Ho(i,Og),p=$.useRef(null),g=ic(n),{world:y,rigidBodyStates:E,physicsOptions:T,rigidBodyEvents:x}=Yo(),U=$.useMemo(()=>wt(wt(wt({},T),i),{},{children:void 0}),[T,i]),A=yg.flatMap(O=>Array.isArray(U[O])?[...U[O]]:U[O]),M=rc(p,U),z=Kv(()=>{const O=mg(U),G=y.createRigidBody(O);return typeof n=="function"&&n(G),g.current=G,G},O=>{y.getRigidBody(O.handle)&&y.removeRigidBody(O)},A);$.useEffect(()=>{const O=z(),G=gg({rigidBody:O,object:p.current});return E.set(O.handle,i.transformState?i.transformState(G):G),()=>{E.delete(O.handle)}},[z]),Eg(z,U,E),bg(z,U,x);const N=$.useMemo(()=>({ref:p,getRigidBody:z,options:U}),[z]);return ot.createElement(Jv.Provider,{value:N},ot.createElement("object3D",hn({ref:p},v,{position:r,rotation:l,quaternion:f,scale:c}),s,M.map((O,G)=>ot.createElement(kn,hn({key:G},O)))))});qo.displayName="RigidBody";const Ng=$.memo(i=>{const{children:n,type:s}=i,{physicsOptions:h}=Yo(),r=$.useRef(null),{options:l}=Wv(),c=$.useMemo(()=>wt(wt(wt({},h),l),{},{children:void 0,colliders:s}),[h,l]),f=rc(r,c,!1);return ot.createElement("object3D",{ref:r,userData:{r3RapierType:"MeshCollider"}},n,f.map((u,v)=>ot.createElement(kn,hn({key:v},u))))});Ng.displayName="MeshCollider";const zg=["ref"],wg=["children","instances","colliderNodes","position","rotation","quaternion","scale"],Bg=$.memo(i=>{let{ref:n}=i,s=Ho(i,zg);const h=ic(n,[]),r=$.useRef(null),l=$.useRef(null),{children:c,instances:f,colliderNodes:u=[],position:v,rotation:p,quaternion:g,scale:y}=s,E=Ho(s,wg),T=rc(r,wt(wt({},s),{},{children:void 0})),x=()=>{const A=l.current.children[0];if(A&&"isInstancedMesh"in A)return A};$.useEffect(()=>{const A=x();A?A.instanceMatrix.setUsage(Bm):console.warn("InstancedRigidBodies expects exactly one child, which must be an InstancedMesh")},[]);const U=(A,M)=>{const z=x();return z?wt(wt({},A),{},{getMatrix:N=>(z.getMatrixAt(M,N),N),setMatrix:N=>{z.setMatrixAt(M,N),z.instanceMatrix.needsUpdate=!0},meshType:"instancedMesh"}):A};return ot.createElement("object3D",hn({ref:r},E,{position:v,rotation:p,quaternion:g,scale:y}),ot.createElement("object3D",{ref:l},c),f==null?void 0:f.map((A,M)=>ot.createElement(qo,hn({},E,A,{ref:z=>{h.current[M]=z},transformState:z=>U(z,M)}),ot.createElement(ot.Fragment,null,u.map((z,N)=>ot.createElement($.Fragment,{key:N},z)),T.map((z,N)=>ot.createElement(kn,hn({key:N},z)))))))});Bg.displayName="InstancedRigidBodies";const $v=1.5,Hr=.6,eh=2.2,Rd=.5,Uo=.5,Dd=.1,Gg=1.5,jg=180,Od=11,Hg=150,Fg=.85,Nd=2,Lg=Math.PI*.5,Vg=18,Yg=11,qs=new rt(0,Vg,Yg),qg=new rt(0,.2,0),zd=8,Xg=.05,Zg=.07,Qg=Hr+Uo+.5,Kg=Hr+.01,Pg=-.2,Ig=-1.25,kg=Hr/2,th=$.forwardRef(({turretRef:i,...n},s)=>We.jsxs("group",{ref:s,...n,children:[We.jsxs("mesh",{castShadow:!0,receiveShadow:!0,position:[0,Hr/2,0],children:[We.jsx("boxGeometry",{args:[$v,Hr,eh]}),We.jsx("meshStandardMaterial",{color:"#d95030",flatShading:!0})]}),We.jsxs("group",{ref:i,position:[0,Kg,Pg],children:[We.jsxs("mesh",{castShadow:!0,receiveShadow:!0,position:[0,Uo/2,0],children:[We.jsx("cylinderGeometry",{args:[Rd,Rd,Uo,32]}),We.jsx("meshStandardMaterial",{color:"#e66f4f",flatShading:!0})]}),We.jsxs("mesh",{castShadow:!0,position:[0,Uo/2,Ig],rotation:[Math.PI/2,0,0],children:[We.jsx("cylinderGeometry",{args:[Dd,Dd,Gg,16]}),We.jsx("meshStandardMaterial",{color:"#7d8a94",flatShading:!0})]})]}),n.children]}));th.displayName="TankModel";function Di(){return Di=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var h in s)({}).hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},Di.apply(null,arguments)}function Jg(){var i=Object.create(null);function n(r,l){var c=r.id,f=r.name,u=r.dependencies;u===void 0&&(u=[]);var v=r.init;v===void 0&&(v=function(){});var p=r.getTransferables;if(p===void 0&&(p=null),!i[c])try{u=u.map(function(y){return y&&y.isWorkerModule&&(n(y,function(E){if(E instanceof Error)throw E}),y=i[y.id].value),y}),v=h("<"+f+">.init",v),p&&(p=h("<"+f+">.getTransferables",p));var g=null;typeof v=="function"?g=v.apply(void 0,u):console.error("worker module init function failed to rehydrate"),i[c]={id:c,value:g,getTransferables:p},l(g)}catch(y){y&&y.noLog||console.error(y),l(y)}}function s(r,l){var c,f=r.id,u=r.args;(!i[f]||typeof i[f].value!="function")&&l(new Error("Worker module "+f+": not found or its 'init' did not return a function"));try{var v=(c=i[f]).value.apply(c,u);v&&typeof v.then=="function"?v.then(p,function(g){return l(g instanceof Error?g:new Error(""+g))}):p(v)}catch(g){l(g)}function p(g){try{var y=i[f].getTransferables&&i[f].getTransferables(g);(!y||!Array.isArray(y)||!y.length)&&(y=void 0),l(g,y)}catch(E){console.error(E),l(E)}}}function h(r,l){var c=void 0;self.troikaDefine=function(u){return c=u};var f=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+l+`
)`],{type:"application/javascript"}));try{importScripts(f)}catch(u){console.error(u)}return URL.revokeObjectURL(f),delete self.troikaDefine,c}self.addEventListener("message",function(r){var l=r.data,c=l.messageId,f=l.action,u=l.data;try{f==="registerModule"&&n(u,function(v){v instanceof Error?postMessage({messageId:c,success:!1,error:v.message}):postMessage({messageId:c,success:!0,result:{isCallable:typeof v=="function"}})}),f==="callModule"&&s(u,function(v,p){v instanceof Error?postMessage({messageId:c,success:!1,error:v.message}):postMessage({messageId:c,success:!0,result:v},p||void 0)})}catch(v){postMessage({messageId:c,success:!1,error:v.stack})}})}function Wg(i){var n=function(){for(var s=[],h=arguments.length;h--;)s[h]=arguments[h];return n._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,s);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var s=i.dependencies,h=i.init;s=Array.isArray(s)?s.map(function(l){return l&&(l=l.onMainThread||l,l._getInitResult&&(l=l._getInitResult())),l}):[];var r=Promise.all(s).then(function(l){return h.apply(null,l)});return n._getInitResult=function(){return r},r},n}var nh=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),i=!0}catch(s){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+s.message+"]")}return nh=function(){return i},i},$g=0,ey=0,xs=!1,Ai=Object.create(null),xi=Object.create(null),Xs=Object.create(null);function Yr(i){if((!i||typeof i.init!="function")&&!xs)throw new Error("requires `options.init` function");var n=i.dependencies,s=i.init,h=i.getTransferables,r=i.workerId,l=Wg(i);r==null&&(r="#default");var c="workerModule"+ ++$g,f=i.name||c,u=null;n=n&&n.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(xs=!0,p=Yr({workerId:r,name:"<"+f+"> function dependency: "+p.name,init:`function(){return (
`+Ao(p)+`
)}`}),xs=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function v(){for(var p=[],g=arguments.length;g--;)p[g]=arguments[g];if(!nh())return l.apply(void 0,p);if(!u){u=wd(r,"registerModule",v.workerModuleData);var y=function(){u=null,xi[r].delete(y)};(xi[r]||(xi[r]=new Set)).add(y)}return u.then(function(E){var T=E.isCallable;if(T)return wd(r,"callModule",{id:c,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return v.workerModuleData={isWorkerModule:!0,id:c,name:f,dependencies:n,init:Ao(s),getTransferables:h&&Ao(h)},v.onMainThread=l,v}function ty(i){xi[i]&&xi[i].forEach(function(n){n()}),Ai[i]&&(Ai[i].terminate(),delete Ai[i])}function Ao(i){var n=i.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function ny(i){var n=Ai[i];if(!n){var s=Ao(Jg);n=Ai[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+s+")()"],{type:"application/javascript"}))),n.onmessage=function(h){var r=h.data,l=r.messageId,c=Xs[l];if(!c)throw new Error("WorkerModule response with empty or unknown messageId");delete Xs[l],c(r)}}return n}function wd(i,n,s){return new Promise(function(h,r){var l=++ey;Xs[l]=function(c){c.success?h(c.result):r(new Error("Error in worker "+n+" call: "+c.error))},ny(i).postMessage({messageId:l,action:n,data:s})})}function ah(){var i=function(n){function s(Z,Y,R,j,I,Q,W,K){var ae=1-W;K.x=ae*ae*Z+2*ae*W*R+W*W*I,K.y=ae*ae*Y+2*ae*W*j+W*W*Q}function h(Z,Y,R,j,I,Q,W,K,ae,se){var pe=1-ae;se.x=pe*pe*pe*Z+3*pe*pe*ae*R+3*pe*ae*ae*I+ae*ae*ae*W,se.y=pe*pe*pe*Y+3*pe*pe*ae*j+3*pe*ae*ae*Q+ae*ae*ae*K}function r(Z,Y){for(var R=/([MLQCZ])([^MLQCZ]*)/g,j,I,Q,W,K;j=R.exec(Z);){var ae=j[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(se){return parseFloat(se)});switch(j[1]){case"M":W=I=ae[0],K=Q=ae[1];break;case"L":(ae[0]!==W||ae[1]!==K)&&Y("L",W,K,W=ae[0],K=ae[1]);break;case"Q":{Y("Q",W,K,W=ae[2],K=ae[3],ae[0],ae[1]);break}case"C":{Y("C",W,K,W=ae[4],K=ae[5],ae[0],ae[1],ae[2],ae[3]);break}case"Z":(W!==I||K!==Q)&&Y("L",W,K,I,Q);break}}}function l(Z,Y,R){R===void 0&&(R=16);var j={x:0,y:0};r(Z,function(I,Q,W,K,ae,se,pe,Ce,me){switch(I){case"L":Y(Q,W,K,ae);break;case"Q":{for(var ve=Q,Xe=W,Be=1;Be<R;Be++)s(Q,W,se,pe,K,ae,Be/(R-1),j),Y(ve,Xe,j.x,j.y),ve=j.x,Xe=j.y;break}case"C":{for(var Ue=Q,Re=W,Ne=1;Ne<R;Ne++)h(Q,W,se,pe,Ce,me,K,ae,Ne/(R-1),j),Y(Ue,Re,j.x,j.y),Ue=j.x,Re=j.y;break}}})}var c="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",f="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,v={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function p(Z,Y){var R=Z.getContext?Z.getContext("webgl",v):Z,j=u.get(R);if(!j){let pe=function(Ue){var Re=Q[Ue];if(!Re&&(Re=Q[Ue]=R.getExtension(Ue),!Re))throw new Error(Ue+" not supported");return Re},Ce=function(Ue,Re){var Ne=R.createShader(Re);return R.shaderSource(Ne,Ue),R.compileShader(Ne),Ne},me=function(Ue,Re,Ne,Ee){if(!W[Ue]){var we={},xe={},he=R.createProgram();R.attachShader(he,Ce(Re,R.VERTEX_SHADER)),R.attachShader(he,Ce(Ne,R.FRAGMENT_SHADER)),R.linkProgram(he),W[Ue]={program:he,transaction:function(De){R.useProgram(he),De({setUniform:function(Ae,dt){for(var je=[],Ye=arguments.length-2;Ye-- >0;)je[Ye]=arguments[Ye+2];var qe=xe[dt]||(xe[dt]=R.getUniformLocation(he,dt));R["uniform"+Ae].apply(R,[qe].concat(je))},setAttribute:function(Ae,dt,je,Ye,qe){var ke=we[Ae];ke||(ke=we[Ae]={buf:R.createBuffer(),loc:R.getAttribLocation(he,Ae),data:null}),R.bindBuffer(R.ARRAY_BUFFER,ke.buf),R.vertexAttribPointer(ke.loc,dt,R.FLOAT,!1,0,0),R.enableVertexAttribArray(ke.loc),I?R.vertexAttribDivisor(ke.loc,Ye):pe("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ke.loc,Ye),qe!==ke.data&&(R.bufferData(R.ARRAY_BUFFER,qe,je),ke.data=qe)}})}}}W[Ue].transaction(Ee)},ve=function(Ue,Re){ae++;try{R.activeTexture(R.TEXTURE0+ae);var Ne=K[Ue];Ne||(Ne=K[Ue]=R.createTexture(),R.bindTexture(R.TEXTURE_2D,Ne),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.NEAREST),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.NEAREST)),R.bindTexture(R.TEXTURE_2D,Ne),Re(Ne,ae)}finally{ae--}},Xe=function(Ue,Re,Ne){var Ee=R.createFramebuffer();se.push(Ee),R.bindFramebuffer(R.FRAMEBUFFER,Ee),R.activeTexture(R.TEXTURE0+Re),R.bindTexture(R.TEXTURE_2D,Ue),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,Ue,0);try{Ne(Ee)}finally{R.deleteFramebuffer(Ee),R.bindFramebuffer(R.FRAMEBUFFER,se[--se.length-1]||null)}},Be=function(){Q={},W={},K={},ae=-1,se.length=0};var I=typeof WebGL2RenderingContext<"u"&&R instanceof WebGL2RenderingContext,Q={},W={},K={},ae=-1,se=[];R.canvas.addEventListener("webglcontextlost",function(Ue){Be(),Ue.preventDefault()},!1),u.set(R,j={gl:R,isWebGL2:I,getExtension:pe,withProgram:me,withTexture:ve,withTextureFramebuffer:Xe,handleContextLoss:Be})}Y(j)}function g(Z,Y,R,j,I,Q,W,K){W===void 0&&(W=15),K===void 0&&(K=null),p(Z,function(ae){var se=ae.gl,pe=ae.withProgram,Ce=ae.withTexture;Ce("copy",function(me,ve){se.texImage2D(se.TEXTURE_2D,0,se.RGBA,I,Q,0,se.RGBA,se.UNSIGNED_BYTE,Y),pe("copy",c,f,function(Xe){var Be=Xe.setUniform,Ue=Xe.setAttribute;Ue("aUV",2,se.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Be("1i","image",ve),se.bindFramebuffer(se.FRAMEBUFFER,K||null),se.disable(se.BLEND),se.colorMask(W&8,W&4,W&2,W&1),se.viewport(R,j,I,Q),se.scissor(R,j,I,Q),se.drawArrays(se.TRIANGLES,0,3)})})})}function y(Z,Y,R){var j=Z.width,I=Z.height;p(Z,function(Q){var W=Q.gl,K=new Uint8Array(j*I*4);W.readPixels(0,0,j,I,W.RGBA,W.UNSIGNED_BYTE,K),Z.width=Y,Z.height=R,g(W,K,0,0,j,I)})}var E=Object.freeze({__proto__:null,withWebGLContext:p,renderImageData:g,resizeWebGLCanvasWithoutClearing:y});function T(Z,Y,R,j,I,Q){Q===void 0&&(Q=1);var W=new Uint8Array(Z*Y),K=j[2]-j[0],ae=j[3]-j[1],se=[];l(R,function(Ue,Re,Ne,Ee){se.push({x1:Ue,y1:Re,x2:Ne,y2:Ee,minX:Math.min(Ue,Ne),minY:Math.min(Re,Ee),maxX:Math.max(Ue,Ne),maxY:Math.max(Re,Ee)})}),se.sort(function(Ue,Re){return Ue.maxX-Re.maxX});for(var pe=0;pe<Z;pe++)for(var Ce=0;Ce<Y;Ce++){var me=Xe(j[0]+K*(pe+.5)/Z,j[1]+ae*(Ce+.5)/Y),ve=Math.pow(1-Math.abs(me)/I,Q)/2;me<0&&(ve=1-ve),ve=Math.max(0,Math.min(255,Math.round(ve*255))),W[Ce*Z+pe]=ve}return W;function Xe(Ue,Re){for(var Ne=1/0,Ee=1/0,we=se.length;we--;){var xe=se[we];if(xe.maxX+Ee<=Ue)break;if(Ue+Ee>xe.minX&&Re-Ee<xe.maxY&&Re+Ee>xe.minY){var he=A(Ue,Re,xe.x1,xe.y1,xe.x2,xe.y2);he<Ne&&(Ne=he,Ee=Math.sqrt(Ne))}}return Be(Ue,Re)&&(Ee=-Ee),Ee}function Be(Ue,Re){for(var Ne=0,Ee=se.length;Ee--;){var we=se[Ee];if(we.maxX<=Ue)break;var xe=we.y1>Re!=we.y2>Re&&Ue<(we.x2-we.x1)*(Re-we.y1)/(we.y2-we.y1)+we.x1;xe&&(Ne+=we.y1<we.y2?1:-1)}return Ne!==0}}function x(Z,Y,R,j,I,Q,W,K,ae,se){Q===void 0&&(Q=1),K===void 0&&(K=0),ae===void 0&&(ae=0),se===void 0&&(se=0),U(Z,Y,R,j,I,Q,W,null,K,ae,se)}function U(Z,Y,R,j,I,Q,W,K,ae,se,pe){Q===void 0&&(Q=1),ae===void 0&&(ae=0),se===void 0&&(se=0),pe===void 0&&(pe=0);for(var Ce=T(Z,Y,R,j,I,Q),me=new Uint8Array(Ce.length*4),ve=0;ve<Ce.length;ve++)me[ve*4+pe]=Ce[ve];g(W,me,ae,se,Z,Y,1<<3-pe,K)}function A(Z,Y,R,j,I,Q){var W=I-R,K=Q-j,ae=W*W+K*K,se=ae?Math.max(0,Math.min(1,((Z-R)*W+(Y-j)*K)/ae)):0,pe=Z-(R+se*W),Ce=Y-(j+se*K);return pe*pe+Ce*Ce}var M=Object.freeze({__proto__:null,generate:T,generateIntoCanvas:x,generateIntoFramebuffer:U}),z="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",N="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",O="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",G=new Float32Array([0,0,2,0,0,2]),V=null,D=!1,L={},q=new WeakMap;function ie(Z){if(!D&&!ce(Z))throw new Error("WebGL generation not supported")}function w(Z,Y,R,j,I,Q,W){if(Q===void 0&&(Q=1),W===void 0&&(W=null),!W&&(W=V,!W)){var K=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!K)throw new Error("OffscreenCanvas or DOM canvas not supported");W=V=K.getContext("webgl",{depth:!1})}ie(W);var ae=new Uint8Array(Z*Y*4);p(W,function(me){var ve=me.gl,Xe=me.withTexture,Be=me.withTextureFramebuffer;Xe("readable",function(Ue,Re){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,Z,Y,0,ve.RGBA,ve.UNSIGNED_BYTE,null),Be(Ue,Re,function(Ne){F(Z,Y,R,j,I,Q,ve,Ne,0,0,0),ve.readPixels(0,0,Z,Y,ve.RGBA,ve.UNSIGNED_BYTE,ae)})})});for(var se=new Uint8Array(Z*Y),pe=0,Ce=0;pe<ae.length;pe+=4)se[Ce++]=ae[pe];return se}function X(Z,Y,R,j,I,Q,W,K,ae,se){Q===void 0&&(Q=1),K===void 0&&(K=0),ae===void 0&&(ae=0),se===void 0&&(se=0),F(Z,Y,R,j,I,Q,W,null,K,ae,se)}function F(Z,Y,R,j,I,Q,W,K,ae,se,pe){Q===void 0&&(Q=1),ae===void 0&&(ae=0),se===void 0&&(se=0),pe===void 0&&(pe=0),ie(W);var Ce=[];l(R,function(me,ve,Xe,Be){Ce.push(me,ve,Xe,Be)}),Ce=new Float32Array(Ce),p(W,function(me){var ve=me.gl,Xe=me.isWebGL2,Be=me.getExtension,Ue=me.withProgram,Re=me.withTexture,Ne=me.withTextureFramebuffer,Ee=me.handleContextLoss;if(Re("rawDistances",function(we,xe){(Z!==we._lastWidth||Y!==we._lastHeight)&&ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,we._lastWidth=Z,we._lastHeight=Y,0,ve.RGBA,ve.UNSIGNED_BYTE,null),Ue("main",z,N,function(he){var Ie=he.setAttribute,De=he.setUniform,Ve=!Xe&&Be("ANGLE_instanced_arrays"),Ae=!Xe&&Be("EXT_blend_minmax");Ie("aUV",2,ve.STATIC_DRAW,0,G),Ie("aLineSegment",4,ve.DYNAMIC_DRAW,1,Ce),De.apply(void 0,["4f","uGlyphBounds"].concat(j)),De("1f","uMaxDistance",I),De("1f","uExponent",Q),Ne(we,xe,function(dt){ve.enable(ve.BLEND),ve.colorMask(!0,!0,!0,!0),ve.viewport(0,0,Z,Y),ve.scissor(0,0,Z,Y),ve.blendFunc(ve.ONE,ve.ONE),ve.blendEquationSeparate(ve.FUNC_ADD,Xe?ve.MAX:Ae.MAX_EXT),ve.clear(ve.COLOR_BUFFER_BIT),Xe?ve.drawArraysInstanced(ve.TRIANGLES,0,3,Ce.length/4):Ve.drawArraysInstancedANGLE(ve.TRIANGLES,0,3,Ce.length/4)})}),Ue("post",c,O,function(he){he.setAttribute("aUV",2,ve.STATIC_DRAW,0,G),he.setUniform("1i","tex",xe),ve.bindFramebuffer(ve.FRAMEBUFFER,K),ve.disable(ve.BLEND),ve.colorMask(pe===0,pe===1,pe===2,pe===3),ve.viewport(ae,se,Z,Y),ve.scissor(ae,se,Z,Y),ve.drawArrays(ve.TRIANGLES,0,3)})}),ve.isContextLost())throw Ee(),new Error("webgl context lost")})}function ce(Z){var Y=!Z||Z===V?L:Z.canvas||Z,R=q.get(Y);if(R===void 0){D=!0;var j=null;try{var I=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Q=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Z);R=Q&&I.length===Q.length&&Q.every(function(W,K){return W===I[K]}),R||(j="bad trial run results",console.info(I,Q))}catch(W){R=!1,j=W.message}j&&console.warn("WebGL SDF generation not supported:",j),D=!1,q.set(Y,R)}return R}var C=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:X,generateIntoFramebuffer:F,isSupported:ce});function k(Z,Y,R,j,I,Q){I===void 0&&(I=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1);try{return w.apply(C,arguments)}catch(W){return console.info("WebGL SDF generation failed, falling back to JS",W),T.apply(M,arguments)}}function ee(Z,Y,R,j,I,Q,W,K,ae,se){I===void 0&&(I=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1),K===void 0&&(K=0),ae===void 0&&(ae=0),se===void 0&&(se=0);try{return X.apply(C,arguments)}catch(pe){return console.info("WebGL SDF generation failed, falling back to JS",pe),x.apply(M,arguments)}}return n.forEachPathCommand=r,n.generate=k,n.generateIntoCanvas=ee,n.javascript=M,n.pathToLineSegments=l,n.webgl=C,n.webglUtils=E,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return i}function ay(){var i=function(n){var s={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},h={},r={};h.L=1,r[1]="L",Object.keys(s).forEach(function(Ee,we){h[Ee]=1<<we+1,r[h[Ee]]=Ee}),Object.freeze(h);var l=h.LRI|h.RLI|h.FSI,c=h.L|h.R|h.AL,f=h.B|h.S|h.WS|h.ON|h.FSI|h.LRI|h.RLI|h.PDI,u=h.BN|h.RLE|h.LRE|h.RLO|h.LRO|h.PDF,v=h.S|h.WS|h.B|l|h.PDI|u,p=null;function g(){if(!p){p=new Map;var Ee=function(xe){if(s.hasOwnProperty(xe)){var he=0;s[xe].split(",").forEach(function(Ie){var De=Ie.split("+"),Ve=De[0],Ae=De[1];Ve=parseInt(Ve,36),Ae=Ae?parseInt(Ae,36):0,p.set(he+=Ve,h[xe]);for(var dt=0;dt<Ae;dt++)p.set(++he,h[xe])})}};for(var we in s)Ee(we)}}function y(Ee){return g(),p.get(Ee.codePointAt(0))||h.L}function E(Ee){return r[y(Ee)]}var T={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(Ee,we){var xe=36,he=0,Ie=new Map,De=we&&new Map,Ve;return Ee.split(",").forEach(function Ae(dt){if(dt.indexOf("+")!==-1)for(var je=+dt;je--;)Ae(Ve);else{Ve=dt;var Ye=dt.split(">"),qe=Ye[0],ke=Ye[1];qe=String.fromCodePoint(he+=parseInt(qe,xe)),ke=String.fromCodePoint(he+=parseInt(ke,xe)),Ie.set(qe,ke),we&&De.set(ke,qe)}}),{map:Ie,reverseMap:De}}var U,A,M;function z(){if(!U){var Ee=x(T.pairs,!0),we=Ee.map,xe=Ee.reverseMap;U=we,A=xe,M=x(T.canonical,!1).map}}function N(Ee){return z(),U.get(Ee)||null}function O(Ee){return z(),A.get(Ee)||null}function G(Ee){return z(),M.get(Ee)||null}var V=h.L,D=h.R,L=h.EN,q=h.ES,ie=h.ET,w=h.AN,X=h.CS,F=h.B,ce=h.S,C=h.ON,k=h.BN,ee=h.NSM,Z=h.AL,Y=h.LRO,R=h.RLO,j=h.LRE,I=h.RLE,Q=h.PDF,W=h.LRI,K=h.RLI,ae=h.FSI,se=h.PDI;function pe(Ee,we){for(var xe=125,he=new Uint32Array(Ee.length),Ie=0;Ie<Ee.length;Ie++)he[Ie]=y(Ee[Ie]);var De=new Map;function Ve(bn,Gn){var on=he[bn];he[bn]=Gn,De.set(on,De.get(on)-1),on&f&&De.set(f,De.get(f)-1),De.set(Gn,(De.get(Gn)||0)+1),Gn&f&&De.set(f,(De.get(f)||0)+1)}for(var Ae=new Uint8Array(Ee.length),dt=new Map,je=[],Ye=null,qe=0;qe<Ee.length;qe++)Ye||je.push(Ye={start:qe,end:Ee.length-1,level:we==="rtl"?1:we==="ltr"?0:Jr(qe,!1)}),he[qe]&F&&(Ye.end=qe,Ye=null);for(var ke=I|j|R|Y|l|se|Q|F,vt=function(bn){return bn+(bn&1?1:2)},Mt=function(bn){return bn+(bn&1?2:1)},Ze=0;Ze<je.length;Ze++){Ye=je[Ze];var Fe=[{_level:Ye.level,_override:0,_isolate:0}],He=void 0,ht=0,$e=0,ut=0;De.clear();for(var gt=Ye.start;gt<=Ye.end;gt++){var fe=he[gt];if(He=Fe[Fe.length-1],De.set(fe,(De.get(fe)||0)+1),fe&f&&De.set(f,(De.get(f)||0)+1),fe&ke)if(fe&(I|j)){Ae[gt]=He._level;var tt=(fe===I?Mt:vt)(He._level);tt<=xe&&!ht&&!$e?Fe.push({_level:tt,_override:0,_isolate:0}):ht||$e++}else if(fe&(R|Y)){Ae[gt]=He._level;var pn=(fe===R?Mt:vt)(He._level);pn<=xe&&!ht&&!$e?Fe.push({_level:pn,_override:fe&R?D:V,_isolate:0}):ht||$e++}else if(fe&l){fe&ae&&(fe=Jr(gt+1,!0)===1?K:W),Ae[gt]=He._level,He._override&&Ve(gt,He._override);var ct=(fe===K?Mt:vt)(He._level);ct<=xe&&ht===0&&$e===0?(ut++,Fe.push({_level:ct,_override:0,_isolate:1,_isolInitIndex:gt})):ht++}else if(fe&se){if(ht>0)ht--;else if(ut>0){for($e=0;!Fe[Fe.length-1]._isolate;)Fe.pop();var nt=Fe[Fe.length-1]._isolInitIndex;nt!=null&&(dt.set(nt,gt),dt.set(gt,nt)),Fe.pop(),ut--}He=Fe[Fe.length-1],Ae[gt]=He._level,He._override&&Ve(gt,He._override)}else fe&Q?(ht===0&&($e>0?$e--:!He._isolate&&Fe.length>1&&(Fe.pop(),He=Fe[Fe.length-1])),Ae[gt]=He._level):fe&F&&(Ae[gt]=Ye.level);else Ae[gt]=He._level,He._override&&fe!==k&&Ve(gt,He._override)}for(var zt=[],yt=null,Je=Ye.start;Je<=Ye.end;Je++){var Dt=he[Je];if(!(Dt&u)){var ln=Ae[Je],nn=Dt&l,qt=Dt===se;yt&&ln===yt._level?(yt._end=Je,yt._endsWithIsolInit=nn):zt.push(yt={_start:Je,_end:Je,_level:ln,_startsWithPDI:qt,_endsWithIsolInit:nn})}}for(var mn=[],gn=0;gn<zt.length;gn++){var rn=zt[gn];if(!rn._startsWithPDI||rn._startsWithPDI&&!dt.has(rn._start)){for(var yn=[yt=rn],It=void 0;yt&&yt._endsWithIsolInit&&(It=dt.get(yt._end))!=null;)for(var Qe=gn+1;Qe<zt.length;Qe++)if(zt[Qe]._start===It){yn.push(yt=zt[Qe]);break}for(var Kt=[],Ot=0;Ot<yn.length;Ot++)for(var S=yn[Ot],_=S._start;_<=S._end;_++)Kt.push(_);for(var H=Ae[Kt[0]],ne=Ye.level,ue=Kt[0]-1;ue>=0;ue--)if(!(he[ue]&u)){ne=Ae[ue];break}var oe=Kt[Kt.length-1],be=Ae[oe],ye=Ye.level;if(!(he[oe]&l)){for(var Se=oe+1;Se<=Ye.end;Se++)if(!(he[Se]&u)){ye=Ae[Se];break}}mn.push({_seqIndices:Kt,_sosType:Math.max(ne,H)%2?D:V,_eosType:Math.max(ye,be)%2?D:V})}}for(var ge=0;ge<mn.length;ge++){var Te=mn[ge],le=Te._seqIndices,Ct=Te._sosType,Ge=Te._eosType,Le=Ae[le[0]]&1?D:V;if(De.get(ee))for(var Pe=0;Pe<le.length;Pe++){var at=le[Pe];if(he[at]&ee){for(var St=Ct,Et=Pe-1;Et>=0;Et--)if(!(he[le[Et]]&u)){St=he[le[Et]];break}Ve(at,St&(l|se)?C:St)}}if(De.get(L))for(var Ht=0;Ht<le.length;Ht++){var an=le[Ht];if(he[an]&L)for(var bt=Ht-1;bt>=-1;bt--){var Cn=bt===-1?Ct:he[le[bt]];if(Cn&c){Cn===Z&&Ve(an,w);break}}}if(De.get(Z))for(var Ut=0;Ut<le.length;Ut++){var Xt=le[Ut];he[Xt]&Z&&Ve(Xt,D)}if(De.get(q)||De.get(X))for(var Sn=1;Sn<le.length-1;Sn++){var Jn=le[Sn];if(he[Jn]&(q|X)){for(var kt=0,_t=0,Zt=Sn-1;Zt>=0&&(kt=he[le[Zt]],!!(kt&u));Zt--);for(var Nt=Sn+1;Nt<le.length&&(_t=he[le[Nt]],!!(_t&u));Nt++);kt===_t&&(he[Jn]===q?kt===L:kt&(L|w))&&Ve(Jn,kt)}}if(De.get(L))for(var it=0;it<le.length;it++){var En=le[it];if(he[En]&L){for(var On=it-1;On>=0&&he[le[On]]&(ie|u);On--)Ve(le[On],L);for(it++;it<le.length&&he[le[it]]&(ie|u|L);it++)he[le[it]]!==L&&Ve(le[it],L)}}if(De.get(ie)||De.get(q)||De.get(X))for(var Jt=0;Jt<le.length;Jt++){var Fn=le[Jt];if(he[Fn]&(ie|q|X)){Ve(Fn,C);for(var gl=Jt-1;gl>=0&&he[le[gl]]&u;gl--)Ve(le[gl],C);for(var fa=Jt+1;fa<le.length&&he[le[fa]]&u;fa++)Ve(le[fa],C)}}if(De.get(L))for(var kl=0,yl=Ct;kl<le.length;kl++){var Sl=le[kl],Jl=he[Sl];Jl&L?yl===V&&Ve(Sl,V):Jl&c&&(yl=Jl)}if(De.get(f)){var Ca=D|L|w,qr=Ca|V,El=[];{for(var Ua=[],Aa=0;Aa<le.length;Aa++)if(he[le[Aa]]&f){var xa=Ee[le[Aa]],Xr=void 0;if(N(xa)!==null)if(Ua.length<63)Ua.push({char:xa,seqIndex:Aa});else break;else if((Xr=O(xa))!==null)for(var Qa=Ua.length-1;Qa>=0;Qa--){var bl=Ua[Qa].char;if(bl===Xr||bl===O(G(xa))||N(G(bl))===xa){El.push([Ua[Qa].seqIndex,Aa]),Ua.length=Qa;break}}}El.sort(function(bn,Gn){return bn[0]-Gn[0]})}for(var Wl=0;Wl<El.length;Wl++){for(var Zr=El[Wl],_l=Zr[0],Tl=Zr[1],Qr=!1,Bn=0,Kr=_l+1;Kr<Tl;Kr++){var Bi=le[Kr];if(he[Bi]&qr){Qr=!0;var Pr=he[Bi]&Ca?D:V;if(Pr===Le){Bn=Pr;break}}}if(Qr&&!Bn){Bn=Ct;for(var Ra=_l-1;Ra>=0;Ra--){var $l=le[Ra];if(he[$l]&qr){var Ml=he[$l]&Ca?D:V;Ml!==Le?Bn=Ml:Bn=Le;break}}}if(Bn){if(he[le[_l]]=he[le[Tl]]=Bn,Bn!==Le){for(var Ka=_l+1;Ka<le.length;Ka++)if(!(he[le[Ka]]&u)){y(Ee[le[Ka]])&ee&&(he[le[Ka]]=Bn);break}}if(Bn!==Le){for(var Pa=Tl+1;Pa<le.length;Pa++)if(!(he[le[Pa]]&u)){y(Ee[le[Pa]])&ee&&(he[le[Pa]]=Bn);break}}}}for(var Wn=0;Wn<le.length;Wn++)if(he[le[Wn]]&f){for(var Ir=Wn,er=Wn,da=Ct,Sa=Wn-1;Sa>=0;Sa--)if(he[le[Sa]]&u)Ir=Sa;else{da=he[le[Sa]]&Ca?D:V;break}for(var kr=Ge,Da=Wn+1;Da<le.length;Da++)if(he[le[Da]]&(f|u))er=Da;else{kr=he[le[Da]]&Ca?D:V;break}for(var tr=Ir;tr<=er;tr++)he[le[tr]]=da===kr?da:Le;Wn=er}}}for(var Un=Ye.start;Un<=Ye.end;Un++){var Qo=Ae[Un],Wt=he[Un];if(Qo&1?Wt&(V|L|w)&&Ae[Un]++:Wt&D?Ae[Un]++:Wt&(w|L)&&(Ae[Un]+=2),Wt&u&&(Ae[Un]=Un===0?Ye.level:Ae[Un-1]),Un===Ye.end||y(Ee[Un])&(ce|F))for(var Cl=Un;Cl>=0&&y(Ee[Cl])&v;Cl--)Ae[Cl]=Ye.level}}return{levels:Ae,paragraphs:je};function Jr(bn,Gn){for(var on=bn;on<Ee.length;on++){var $n=he[on];if($n&(D|Z))return 1;if($n&(F|V)||Gn&&$n===se)return 0;if($n&l){var Wr=Gi(on);on=Wr===-1?Ee.length:Wr}}return 0}function Gi(bn){for(var Gn=1,on=bn+1;on<Ee.length;on++){var $n=he[on];if($n&F)break;if($n&se){if(--Gn===0)return on}else $n&l&&Gn++}return-1}}var Ce="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",me;function ve(){if(!me){var Ee=x(Ce,!0),we=Ee.map,xe=Ee.reverseMap;xe.forEach(function(he,Ie){we.set(Ie,he)}),me=we}}function Xe(Ee){return ve(),me.get(Ee)||null}function Be(Ee,we,xe,he){var Ie=Ee.length;xe=Math.max(0,xe==null?0:+xe),he=Math.min(Ie-1,he==null?Ie-1:+he);for(var De=new Map,Ve=xe;Ve<=he;Ve++)if(we[Ve]&1){var Ae=Xe(Ee[Ve]);Ae!==null&&De.set(Ve,Ae)}return De}function Ue(Ee,we,xe,he){var Ie=Ee.length;xe=Math.max(0,xe==null?0:+xe),he=Math.min(Ie-1,he==null?Ie-1:+he);var De=[];return we.paragraphs.forEach(function(Ve){var Ae=Math.max(xe,Ve.start),dt=Math.min(he,Ve.end);if(Ae<dt){for(var je=we.levels.slice(Ae,dt+1),Ye=dt;Ye>=Ae&&y(Ee[Ye])&v;Ye--)je[Ye]=Ve.level;for(var qe=Ve.level,ke=1/0,vt=0;vt<je.length;vt++){var Mt=je[vt];Mt>qe&&(qe=Mt),Mt<ke&&(ke=Mt|1)}for(var Ze=qe;Ze>=ke;Ze--)for(var Fe=0;Fe<je.length;Fe++)if(je[Fe]>=Ze){for(var He=Fe;Fe+1<je.length&&je[Fe+1]>=Ze;)Fe++;Fe>He&&De.push([He+Ae,Fe+Ae])}}}),De}function Re(Ee,we,xe,he){var Ie=Ne(Ee,we,xe,he),De=[].concat(Ee);return Ie.forEach(function(Ve,Ae){De[Ae]=(we.levels[Ve]&1?Xe(Ee[Ve]):null)||Ee[Ve]}),De.join("")}function Ne(Ee,we,xe,he){for(var Ie=Ue(Ee,we,xe,he),De=[],Ve=0;Ve<Ee.length;Ve++)De[Ve]=Ve;return Ie.forEach(function(Ae){for(var dt=Ae[0],je=Ae[1],Ye=De.slice(dt,je+1),qe=Ye.length;qe--;)De[je-qe]=Ye[qe]}),De}return n.closingToOpeningBracket=O,n.getBidiCharType=y,n.getBidiCharTypeName=E,n.getCanonicalBracket=G,n.getEmbeddingLevels=pe,n.getMirroredCharacter=Xe,n.getMirroredCharactersMap=Be,n.getReorderSegments=Ue,n.getReorderedIndices=Ne,n.getReorderedString=Re,n.openingToClosingBracket=N,Object.defineProperty(n,"__esModule",{value:!0}),n}({});return i}const lh=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Zs(i){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function s(h,r){let l=Lm[r];return l?Zs(l):h}return i.replace(n,s)}const Tn=[];for(let i=0;i<256;i++)Tn[i]=(i<16?"0":"")+i.toString(16);function ly(){const i=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0,h=Math.random()*4294967295|0;return(Tn[i&255]+Tn[i>>8&255]+Tn[i>>16&255]+Tn[i>>24&255]+"-"+Tn[n&255]+Tn[n>>8&255]+"-"+Tn[n>>16&15|64]+Tn[n>>24&255]+"-"+Tn[s&63|128]+Tn[s>>8&255]+"-"+Tn[s>>16&255]+Tn[s>>24&255]+Tn[h&255]+Tn[h>>8&255]+Tn[h>>16&255]+Tn[h>>24&255]).toUpperCase()}const ql=Object.assign||function(){let i=arguments[0];for(let n=1,s=arguments.length;n<s;n++){let h=arguments[n];if(h)for(let r in h)Object.prototype.hasOwnProperty.call(h,r)&&(i[r]=h[r])}return i},ry=Date.now(),Bd=new WeakMap,Gd=new Map;let iy=1e10;function Qs(i,n){const s=cy(n);let h=Bd.get(i);if(h||Bd.set(i,h=Object.create(null)),h[s])return new h[s];const r=`_onBeforeCompile${s}`,l=function(v,p){i.onBeforeCompile.call(this,v,p);const g=this.customProgramCacheKey()+"|"+v.vertexShader+"|"+v.fragmentShader;let y=Gd[g];if(!y){const E=oy(this,v,n,s);y=Gd[g]=E}v.vertexShader=y.vertexShader,v.fragmentShader=y.fragmentShader,ql(v.uniforms,this.uniforms),n.timeUniform&&(v.uniforms[n.timeUniform]={get value(){return Date.now()-ry}}),this[r]&&this[r](v)},c=function(){return f(n.chained?i:i.clone())},f=function(v){const p=Object.create(v,u);return Object.defineProperty(p,"baseMaterial",{value:i}),Object.defineProperty(p,"id",{value:iy++}),p.uuid=ly(),p.uniforms=ql({},v.uniforms,n.uniforms),p.defines=ql({},v.defines,n.defines),p.defines[`TROIKA_DERIVED_MATERIAL_${s}`]="",p.extensions=ql({},v.extensions,n.extensions),p._listeners=void 0,p},u={constructor:{value:c},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:v=>{i.type=v}},isDerivedFrom:{writable:!0,configurable:!0,value:function(v){const p=this.baseMaterial;return v===p||p.isDerivedMaterial&&p.isDerivedFrom(v)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+s}},onBeforeCompile:{get(){return l},set(v){this[r]=v}},copy:{writable:!0,configurable:!0,value:function(v){return i.copy.call(this,v),!i.isShaderMaterial&&!i.isDerivedMaterial&&(ql(this.extensions,v.extensions),ql(this.defines,v.defines),ql(this.uniforms,Fm.clone(v.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const v=new i.constructor;return f(v).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let v=this._depthMaterial;return v||(v=this._depthMaterial=Qs(i.isDerivedMaterial?i.getDepthMaterial():new jm({depthPacking:Hm}),n),v.defines.IS_DEPTH_MATERIAL="",v.uniforms=this.uniforms),v}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let v=this._distanceMaterial;return v||(v=this._distanceMaterial=Qs(i.isDerivedMaterial?i.getDistanceMaterial():new Gm,n),v.defines.IS_DISTANCE_MATERIAL="",v.uniforms=this.uniforms),v}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:v,_distanceMaterial:p}=this;v&&v.dispose(),p&&p.dispose(),i.dispose.call(this)}}};return h[s]=c,new c}function oy(i,{vertexShader:n,fragmentShader:s},h,r){let{vertexDefs:l,vertexMainIntro:c,vertexMainOutro:f,vertexTransform:u,fragmentDefs:v,fragmentMainIntro:p,fragmentMainOutro:g,fragmentColorTransform:y,customRewriter:E,timeUniform:T}=h;if(l=l||"",c=c||"",f=f||"",v=v||"",p=p||"",g=g||"",(u||E)&&(n=Zs(n)),(y||E)&&(s=s.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),s=Zs(s)),E){let x=E({vertexShader:n,fragmentShader:s});n=x.vertexShader,s=x.fragmentShader}if(y){let x=[];s=s.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,U=>(x.push(U),"")),g=`${y}
${x.join(`
`)}
${g}`}if(T){const x=`
uniform float ${T};
`;l=x+l,v=x+v}return u&&(n=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${n}
`,l=`${l}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,c=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${c}
`,n=n.replace(/\b(position|normal|uv)\b/g,(x,U,A,M)=>/\battribute\s+vec[23]\s+$/.test(M.substr(0,A))?U:`troika_${U}_${r}`),i.map&&i.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),n=jd(n,r,l,c,f),s=jd(s,r,v,p,g),{vertexShader:n,fragmentShader:s}}function jd(i,n,s,h,r){return(h||r||s)&&(i=i.replace(lh,`
${s}
void troikaOrigMain${n}() {`),i+=`
void main() {
  ${h}
  troikaOrigMain${n}();
  ${r}
}`),i}function uy(i,n){return i==="uniforms"?void 0:typeof n=="function"?n.toString():n}let sy=0;const Hd=new Map;function cy(i){const n=JSON.stringify(i,uy);let s=Hd.get(n);return s==null&&Hd.set(n,s=++sy),s}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function fy(){return typeof window>"u"&&(self.window=self),function(i){var n={parse:function(r){var l=n._bin,c=new Uint8Array(r);if(l.readASCII(c,0,4)=="ttcf"){var f=4;l.readUshort(c,f),f+=2,l.readUshort(c,f),f+=2;var u=l.readUint(c,f);f+=4;for(var v=[],p=0;p<u;p++){var g=l.readUint(c,f);f+=4,v.push(n._readFont(c,g))}return v}return[n._readFont(c,0)]},_readFont:function(r,l){var c=n._bin,f=l;c.readFixed(r,l),l+=4;var u=c.readUshort(r,l);l+=2,c.readUshort(r,l),l+=2,c.readUshort(r,l),l+=2,c.readUshort(r,l),l+=2;for(var v=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],p={_data:r,_offset:f},g={},y=0;y<u;y++){var E=c.readASCII(r,l,4);l+=4,c.readUint(r,l),l+=4;var T=c.readUint(r,l);l+=4;var x=c.readUint(r,l);l+=4,g[E]={offset:T,length:x}}for(y=0;y<v.length;y++){var U=v[y];g[U]&&(p[U.trim()]=n[U.trim()].parse(r,g[U].offset,g[U].length,p))}return p},_tabOffset:function(r,l,c){for(var f=n._bin,u=f.readUshort(r,c+4),v=c+12,p=0;p<u;p++){var g=f.readASCII(r,v,4);v+=4,f.readUint(r,v),v+=4;var y=f.readUint(r,v);if(v+=4,f.readUint(r,v),v+=4,g==l)return y}return 0}};n._bin={readFixed:function(r,l){return(r[l]<<8|r[l+1])+(r[l+2]<<8|r[l+3])/65540},readF2dot14:function(r,l){return n._bin.readShort(r,l)/16384},readInt:function(r,l){return n._bin._view(r).getInt32(l)},readInt8:function(r,l){return n._bin._view(r).getInt8(l)},readShort:function(r,l){return n._bin._view(r).getInt16(l)},readUshort:function(r,l){return n._bin._view(r).getUint16(l)},readUshorts:function(r,l,c){for(var f=[],u=0;u<c;u++)f.push(n._bin.readUshort(r,l+2*u));return f},readUint:function(r,l){return n._bin._view(r).getUint32(l)},readUint64:function(r,l){return 4294967296*n._bin.readUint(r,l)+n._bin.readUint(r,l+4)},readASCII:function(r,l,c){for(var f="",u=0;u<c;u++)f+=String.fromCharCode(r[l+u]);return f},readUnicode:function(r,l,c){for(var f="",u=0;u<c;u++){var v=r[l++]<<8|r[l++];f+=String.fromCharCode(v)}return f},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,l,c){var f=n._bin._tdec;return f&&l==0&&c==r.length?f.decode(r):n._bin.readASCII(r,l,c)},readBytes:function(r,l,c){for(var f=[],u=0;u<c;u++)f.push(r[l+u]);return f},readASCIIArray:function(r,l,c){for(var f=[],u=0;u<c;u++)f.push(String.fromCharCode(r[l+u]));return f},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},n._lctf={},n._lctf.parse=function(r,l,c,f,u){var v=n._bin,p={},g=l;v.readFixed(r,l),l+=4;var y=v.readUshort(r,l);l+=2;var E=v.readUshort(r,l);l+=2;var T=v.readUshort(r,l);return l+=2,p.scriptList=n._lctf.readScriptList(r,g+y),p.featureList=n._lctf.readFeatureList(r,g+E),p.lookupList=n._lctf.readLookupList(r,g+T,u),p},n._lctf.readLookupList=function(r,l,c){var f=n._bin,u=l,v=[],p=f.readUshort(r,l);l+=2;for(var g=0;g<p;g++){var y=f.readUshort(r,l);l+=2;var E=n._lctf.readLookupTable(r,u+y,c);v.push(E)}return v},n._lctf.readLookupTable=function(r,l,c){var f=n._bin,u=l,v={tabs:[]};v.ltype=f.readUshort(r,l),l+=2,v.flag=f.readUshort(r,l),l+=2;var p=f.readUshort(r,l);l+=2;for(var g=v.ltype,y=0;y<p;y++){var E=f.readUshort(r,l);l+=2;var T=c(r,g,u+E,v);v.tabs.push(T)}return v},n._lctf.numOfOnes=function(r){for(var l=0,c=0;c<32;c++)(r>>>c&1)!=0&&l++;return l},n._lctf.readClassDef=function(r,l){var c=n._bin,f=[],u=c.readUshort(r,l);if(l+=2,u==1){var v=c.readUshort(r,l);l+=2;var p=c.readUshort(r,l);l+=2;for(var g=0;g<p;g++)f.push(v+g),f.push(v+g),f.push(c.readUshort(r,l)),l+=2}if(u==2){var y=c.readUshort(r,l);for(l+=2,g=0;g<y;g++)f.push(c.readUshort(r,l)),l+=2,f.push(c.readUshort(r,l)),l+=2,f.push(c.readUshort(r,l)),l+=2}return f},n._lctf.getInterval=function(r,l){for(var c=0;c<r.length;c+=3){var f=r[c],u=r[c+1];if(r[c+2],f<=l&&l<=u)return c}return-1},n._lctf.readCoverage=function(r,l){var c=n._bin,f={};f.fmt=c.readUshort(r,l),l+=2;var u=c.readUshort(r,l);return l+=2,f.fmt==1&&(f.tab=c.readUshorts(r,l,u)),f.fmt==2&&(f.tab=c.readUshorts(r,l,3*u)),f},n._lctf.coverageIndex=function(r,l){var c=r.tab;if(r.fmt==1)return c.indexOf(l);if(r.fmt==2){var f=n._lctf.getInterval(c,l);if(f!=-1)return c[f+2]+(l-c[f])}return-1},n._lctf.readFeatureList=function(r,l){var c=n._bin,f=l,u=[],v=c.readUshort(r,l);l+=2;for(var p=0;p<v;p++){var g=c.readASCII(r,l,4);l+=4;var y=c.readUshort(r,l);l+=2;var E=n._lctf.readFeatureTable(r,f+y);E.tag=g.trim(),u.push(E)}return u},n._lctf.readFeatureTable=function(r,l){var c=n._bin,f=l,u={},v=c.readUshort(r,l);l+=2,v>0&&(u.featureParams=f+v);var p=c.readUshort(r,l);l+=2,u.tab=[];for(var g=0;g<p;g++)u.tab.push(c.readUshort(r,l+2*g));return u},n._lctf.readScriptList=function(r,l){var c=n._bin,f=l,u={},v=c.readUshort(r,l);l+=2;for(var p=0;p<v;p++){var g=c.readASCII(r,l,4);l+=4;var y=c.readUshort(r,l);l+=2,u[g.trim()]=n._lctf.readScriptTable(r,f+y)}return u},n._lctf.readScriptTable=function(r,l){var c=n._bin,f=l,u={},v=c.readUshort(r,l);l+=2,v>0&&(u.default=n._lctf.readLangSysTable(r,f+v));var p=c.readUshort(r,l);l+=2;for(var g=0;g<p;g++){var y=c.readASCII(r,l,4);l+=4;var E=c.readUshort(r,l);l+=2,u[y.trim()]=n._lctf.readLangSysTable(r,f+E)}return u},n._lctf.readLangSysTable=function(r,l){var c=n._bin,f={};c.readUshort(r,l),l+=2,f.reqFeature=c.readUshort(r,l),l+=2;var u=c.readUshort(r,l);return l+=2,f.features=c.readUshorts(r,l,u),f},n.CFF={},n.CFF.parse=function(r,l,c){var f=n._bin;(r=new Uint8Array(r.buffer,l,c))[l=0],r[++l],r[++l],r[++l],l++;var u=[];l=n.CFF.readIndex(r,l,u);for(var v=[],p=0;p<u.length-1;p++)v.push(f.readASCII(r,l+u[p],u[p+1]-u[p]));l+=u[u.length-1];var g=[];l=n.CFF.readIndex(r,l,g);var y=[];for(p=0;p<g.length-1;p++)y.push(n.CFF.readDict(r,l+g[p],l+g[p+1]));l+=g[g.length-1];var E=y[0],T=[];l=n.CFF.readIndex(r,l,T);var x=[];for(p=0;p<T.length-1;p++)x.push(f.readASCII(r,l+T[p],T[p+1]-T[p]));if(l+=T[T.length-1],n.CFF.readSubrs(r,l,E),E.CharStrings){l=E.CharStrings,T=[],l=n.CFF.readIndex(r,l,T);var U=[];for(p=0;p<T.length-1;p++)U.push(f.readBytes(r,l+T[p],T[p+1]-T[p]));E.CharStrings=U}if(E.ROS){l=E.FDArray;var A=[];for(l=n.CFF.readIndex(r,l,A),E.FDArray=[],p=0;p<A.length-1;p++){var M=n.CFF.readDict(r,l+A[p],l+A[p+1]);n.CFF._readFDict(r,M,x),E.FDArray.push(M)}l+=A[A.length-1],l=E.FDSelect,E.FDSelect=[];var z=r[l];if(l++,z!=3)throw z;var N=f.readUshort(r,l);for(l+=2,p=0;p<N+1;p++)E.FDSelect.push(f.readUshort(r,l),r[l+2]),l+=3}return E.Encoding&&(E.Encoding=n.CFF.readEncoding(r,E.Encoding,E.CharStrings.length)),E.charset&&(E.charset=n.CFF.readCharset(r,E.charset,E.CharStrings.length)),n.CFF._readFDict(r,E,x),E},n.CFF._readFDict=function(r,l,c){var f;for(var u in l.Private&&(f=l.Private[1],l.Private=n.CFF.readDict(r,f,f+l.Private[0]),l.Private.Subrs&&n.CFF.readSubrs(r,f+l.Private.Subrs,l.Private)),l)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(l[u]=c[l[u]-426+35])},n.CFF.readSubrs=function(r,l,c){var f=n._bin,u=[];l=n.CFF.readIndex(r,l,u);var v,p=u.length;v=p<1240?107:p<33900?1131:32768,c.Bias=v,c.Subrs=[];for(var g=0;g<u.length-1;g++)c.Subrs.push(f.readBytes(r,l+u[g],u[g+1]-u[g]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(r,l){for(var c=0;c<r.charset.length;c++)if(r.charset[c]==l)return c;return-1},n.CFF.glyphBySE=function(r,l){return l<0||l>255?-1:n.CFF.glyphByUnicode(r,n.CFF.tableSE[l])},n.CFF.readEncoding=function(r,l,c){n._bin;var f=[".notdef"],u=r[l];if(l++,u!=0)throw"error: unknown encoding format: "+u;var v=r[l];l++;for(var p=0;p<v;p++)f.push(r[l+p]);return f},n.CFF.readCharset=function(r,l,c){var f=n._bin,u=[".notdef"],v=r[l];if(l++,v==0)for(var p=0;p<c;p++){var g=f.readUshort(r,l);l+=2,u.push(g)}else{if(v!=1&&v!=2)throw"error: format: "+v;for(;u.length<c;){g=f.readUshort(r,l),l+=2;var y=0;for(v==1?(y=r[l],l++):(y=f.readUshort(r,l),l+=2),p=0;p<=y;p++)u.push(g),g++}}return u},n.CFF.readIndex=function(r,l,c){var f=n._bin,u=f.readUshort(r,l)+1,v=r[l+=2];if(l++,v==1)for(var p=0;p<u;p++)c.push(r[l+p]);else if(v==2)for(p=0;p<u;p++)c.push(f.readUshort(r,l+2*p));else if(v==3)for(p=0;p<u;p++)c.push(16777215&f.readUint(r,l+3*p-1));else if(u!=1)throw"unsupported offset size: "+v+", count: "+u;return(l+=u*v)-1},n.CFF.getCharString=function(r,l,c){var f=n._bin,u=r[l],v=r[l+1];r[l+2],r[l+3],r[l+4];var p=1,g=null,y=null;u<=20&&(g=u,p=1),u==12&&(g=100*u+v,p=2),21<=u&&u<=27&&(g=u,p=1),u==28&&(y=f.readShort(r,l+1),p=3),29<=u&&u<=31&&(g=u,p=1),32<=u&&u<=246&&(y=u-139,p=1),247<=u&&u<=250&&(y=256*(u-247)+v+108,p=2),251<=u&&u<=254&&(y=256*-(u-251)-v-108,p=2),u==255&&(y=f.readInt(r,l+1)/65535,p=5),c.val=y??"o"+g,c.size=p},n.CFF.readCharString=function(r,l,c){for(var f=l+c,u=n._bin,v=[];l<f;){var p=r[l],g=r[l+1];r[l+2],r[l+3],r[l+4];var y=1,E=null,T=null;p<=20&&(E=p,y=1),p==12&&(E=100*p+g,y=2),p!=19&&p!=20||(E=p,y=2),21<=p&&p<=27&&(E=p,y=1),p==28&&(T=u.readShort(r,l+1),y=3),29<=p&&p<=31&&(E=p,y=1),32<=p&&p<=246&&(T=p-139,y=1),247<=p&&p<=250&&(T=256*(p-247)+g+108,y=2),251<=p&&p<=254&&(T=256*-(p-251)-g-108,y=2),p==255&&(T=u.readInt(r,l+1)/65535,y=5),v.push(T??"o"+E),l+=y}return v},n.CFF.readDict=function(r,l,c){for(var f=n._bin,u={},v=[];l<c;){var p=r[l],g=r[l+1];r[l+2],r[l+3],r[l+4];var y=1,E=null,T=null;if(p==28&&(T=f.readShort(r,l+1),y=3),p==29&&(T=f.readInt(r,l+1),y=5),32<=p&&p<=246&&(T=p-139,y=1),247<=p&&p<=250&&(T=256*(p-247)+g+108,y=2),251<=p&&p<=254&&(T=256*-(p-251)-g-108,y=2),p==255)throw T=f.readInt(r,l+1)/65535,y=5,"unknown number";if(p==30){var x=[];for(y=1;;){var U=r[l+y];y++;var A=U>>4,M=15&U;if(A!=15&&x.push(A),M!=15&&x.push(M),M==15)break}for(var z="",N=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],O=0;O<x.length;O++)z+=N[x[O]];T=parseFloat(z)}p<=21&&(E=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][p],y=1,p==12&&(E=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],y=2)),E!=null?(u[E]=v.length==1?v[0]:v,v=[]):v.push(T),l+=y}return u},n.cmap={},n.cmap.parse=function(r,l,c){r=new Uint8Array(r.buffer,l,c),l=0;var f=n._bin,u={};f.readUshort(r,l),l+=2;var v=f.readUshort(r,l);l+=2;var p=[];u.tables=[];for(var g=0;g<v;g++){var y=f.readUshort(r,l);l+=2;var E=f.readUshort(r,l);l+=2;var T=f.readUint(r,l);l+=4;var x="p"+y+"e"+E,U=p.indexOf(T);if(U==-1){var A;U=u.tables.length,p.push(T);var M=f.readUshort(r,T);M==0?A=n.cmap.parse0(r,T):M==4?A=n.cmap.parse4(r,T):M==6?A=n.cmap.parse6(r,T):M==12?A=n.cmap.parse12(r,T):console.debug("unknown format: "+M,y,E,T),u.tables.push(A)}if(u[x]!=null)throw"multiple tables for one platform+encoding";u[x]=U}return u},n.cmap.parse0=function(r,l){var c=n._bin,f={};f.format=c.readUshort(r,l),l+=2;var u=c.readUshort(r,l);l+=2,c.readUshort(r,l),l+=2,f.map=[];for(var v=0;v<u-6;v++)f.map.push(r[l+v]);return f},n.cmap.parse4=function(r,l){var c=n._bin,f=l,u={};u.format=c.readUshort(r,l),l+=2;var v=c.readUshort(r,l);l+=2,c.readUshort(r,l),l+=2;var p=c.readUshort(r,l);l+=2;var g=p/2;u.searchRange=c.readUshort(r,l),l+=2,u.entrySelector=c.readUshort(r,l),l+=2,u.rangeShift=c.readUshort(r,l),l+=2,u.endCount=c.readUshorts(r,l,g),l+=2*g,l+=2,u.startCount=c.readUshorts(r,l,g),l+=2*g,u.idDelta=[];for(var y=0;y<g;y++)u.idDelta.push(c.readShort(r,l)),l+=2;for(u.idRangeOffset=c.readUshorts(r,l,g),l+=2*g,u.glyphIdArray=[];l<f+v;)u.glyphIdArray.push(c.readUshort(r,l)),l+=2;return u},n.cmap.parse6=function(r,l){var c=n._bin,f={};f.format=c.readUshort(r,l),l+=2,c.readUshort(r,l),l+=2,c.readUshort(r,l),l+=2,f.firstCode=c.readUshort(r,l),l+=2;var u=c.readUshort(r,l);l+=2,f.glyphIdArray=[];for(var v=0;v<u;v++)f.glyphIdArray.push(c.readUshort(r,l)),l+=2;return f},n.cmap.parse12=function(r,l){var c=n._bin,f={};f.format=c.readUshort(r,l),l+=2,l+=2,c.readUint(r,l),l+=4,c.readUint(r,l),l+=4;var u=c.readUint(r,l);l+=4,f.groups=[];for(var v=0;v<u;v++){var p=l+12*v,g=c.readUint(r,p+0),y=c.readUint(r,p+4),E=c.readUint(r,p+8);f.groups.push([g,y,E])}return f},n.glyf={},n.glyf.parse=function(r,l,c,f){for(var u=[],v=0;v<f.maxp.numGlyphs;v++)u.push(null);return u},n.glyf._parseGlyf=function(r,l){var c=n._bin,f=r._data,u=n._tabOffset(f,"glyf",r._offset)+r.loca[l];if(r.loca[l]==r.loca[l+1])return null;var v={};if(v.noc=c.readShort(f,u),u+=2,v.xMin=c.readShort(f,u),u+=2,v.yMin=c.readShort(f,u),u+=2,v.xMax=c.readShort(f,u),u+=2,v.yMax=c.readShort(f,u),u+=2,v.xMin>=v.xMax||v.yMin>=v.yMax)return null;if(v.noc>0){v.endPts=[];for(var p=0;p<v.noc;p++)v.endPts.push(c.readUshort(f,u)),u+=2;var g=c.readUshort(f,u);if(u+=2,f.length-u<g)return null;v.instructions=c.readBytes(f,u,g),u+=g;var y=v.endPts[v.noc-1]+1;for(v.flags=[],p=0;p<y;p++){var E=f[u];if(u++,v.flags.push(E),(8&E)!=0){var T=f[u];u++;for(var x=0;x<T;x++)v.flags.push(E),p++}}for(v.xs=[],p=0;p<y;p++){var U=(2&v.flags[p])!=0,A=(16&v.flags[p])!=0;U?(v.xs.push(A?f[u]:-f[u]),u++):A?v.xs.push(0):(v.xs.push(c.readShort(f,u)),u+=2)}for(v.ys=[],p=0;p<y;p++)U=(4&v.flags[p])!=0,A=(32&v.flags[p])!=0,U?(v.ys.push(A?f[u]:-f[u]),u++):A?v.ys.push(0):(v.ys.push(c.readShort(f,u)),u+=2);var M=0,z=0;for(p=0;p<y;p++)M+=v.xs[p],z+=v.ys[p],v.xs[p]=M,v.ys[p]=z}else{var N;v.parts=[];do{N=c.readUshort(f,u),u+=2;var O={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(v.parts.push(O),O.glyphIndex=c.readUshort(f,u),u+=2,1&N){var G=c.readShort(f,u);u+=2;var V=c.readShort(f,u);u+=2}else G=c.readInt8(f,u),u++,V=c.readInt8(f,u),u++;2&N?(O.m.tx=G,O.m.ty=V):(O.p1=G,O.p2=V),8&N?(O.m.a=O.m.d=c.readF2dot14(f,u),u+=2):64&N?(O.m.a=c.readF2dot14(f,u),u+=2,O.m.d=c.readF2dot14(f,u),u+=2):128&N&&(O.m.a=c.readF2dot14(f,u),u+=2,O.m.b=c.readF2dot14(f,u),u+=2,O.m.c=c.readF2dot14(f,u),u+=2,O.m.d=c.readF2dot14(f,u),u+=2)}while(32&N);if(256&N){var D=c.readUshort(f,u);for(u+=2,v.instr=[],p=0;p<D;p++)v.instr.push(f[u]),u++}}return v},n.GDEF={},n.GDEF.parse=function(r,l,c,f){var u=l;l+=4;var v=n._bin.readUshort(r,l);return{glyphClassDef:v===0?null:n._lctf.readClassDef(r,u+v)}},n.GPOS={},n.GPOS.parse=function(r,l,c,f){return n._lctf.parse(r,l,c,f,n.GPOS.subt)},n.GPOS.subt=function(r,l,c,f){var u=n._bin,v=c,p={};if(p.fmt=u.readUshort(r,c),c+=2,l==1||l==2||l==3||l==7||l==8&&p.fmt<=2){var g=u.readUshort(r,c);c+=2,p.coverage=n._lctf.readCoverage(r,g+v)}if(l==1&&p.fmt==1){var y=u.readUshort(r,c);c+=2,y!=0&&(p.pos=n.GPOS.readValueRecord(r,c,y))}else if(l==2&&p.fmt>=1&&p.fmt<=2){y=u.readUshort(r,c),c+=2;var E=u.readUshort(r,c);c+=2;var T=n._lctf.numOfOnes(y),x=n._lctf.numOfOnes(E);if(p.fmt==1){p.pairsets=[];var U=u.readUshort(r,c);c+=2;for(var A=0;A<U;A++){var M=v+u.readUshort(r,c);c+=2;var z=u.readUshort(r,M);M+=2;for(var N=[],O=0;O<z;O++){var G=u.readUshort(r,M);M+=2,y!=0&&(w=n.GPOS.readValueRecord(r,M,y),M+=2*T),E!=0&&(X=n.GPOS.readValueRecord(r,M,E),M+=2*x),N.push({gid2:G,val1:w,val2:X})}p.pairsets.push(N)}}if(p.fmt==2){var V=u.readUshort(r,c);c+=2;var D=u.readUshort(r,c);c+=2;var L=u.readUshort(r,c);c+=2;var q=u.readUshort(r,c);for(c+=2,p.classDef1=n._lctf.readClassDef(r,v+V),p.classDef2=n._lctf.readClassDef(r,v+D),p.matrix=[],A=0;A<L;A++){var ie=[];for(O=0;O<q;O++){var w=null,X=null;y!=0&&(w=n.GPOS.readValueRecord(r,c,y),c+=2*T),E!=0&&(X=n.GPOS.readValueRecord(r,c,E),c+=2*x),ie.push({val1:w,val2:X})}p.matrix.push(ie)}}}else if(l==4&&p.fmt==1)p.markCoverage=n._lctf.readCoverage(r,u.readUshort(r,c)+v),p.baseCoverage=n._lctf.readCoverage(r,u.readUshort(r,c+2)+v),p.markClassCount=u.readUshort(r,c+4),p.markArray=n.GPOS.readMarkArray(r,u.readUshort(r,c+6)+v),p.baseArray=n.GPOS.readBaseArray(r,u.readUshort(r,c+8)+v,p.markClassCount);else if(l==6&&p.fmt==1)p.mark1Coverage=n._lctf.readCoverage(r,u.readUshort(r,c)+v),p.mark2Coverage=n._lctf.readCoverage(r,u.readUshort(r,c+2)+v),p.markClassCount=u.readUshort(r,c+4),p.mark1Array=n.GPOS.readMarkArray(r,u.readUshort(r,c+6)+v),p.mark2Array=n.GPOS.readBaseArray(r,u.readUshort(r,c+8)+v,p.markClassCount);else{if(l==9&&p.fmt==1){var F=u.readUshort(r,c);c+=2;var ce=u.readUint(r,c);if(c+=4,f.ltype==9)f.ltype=F;else if(f.ltype!=F)throw"invalid extension substitution";return n.GPOS.subt(r,f.ltype,v+ce)}console.debug("unsupported GPOS table LookupType",l,"format",p.fmt)}return p},n.GPOS.readValueRecord=function(r,l,c){var f=n._bin,u=[];return u.push(1&c?f.readShort(r,l):0),l+=1&c?2:0,u.push(2&c?f.readShort(r,l):0),l+=2&c?2:0,u.push(4&c?f.readShort(r,l):0),l+=4&c?2:0,u.push(8&c?f.readShort(r,l):0),l+=8&c?2:0,u},n.GPOS.readBaseArray=function(r,l,c){var f=n._bin,u=[],v=l,p=f.readUshort(r,l);l+=2;for(var g=0;g<p;g++){for(var y=[],E=0;E<c;E++)y.push(n.GPOS.readAnchorRecord(r,v+f.readUshort(r,l))),l+=2;u.push(y)}return u},n.GPOS.readMarkArray=function(r,l){var c=n._bin,f=[],u=l,v=c.readUshort(r,l);l+=2;for(var p=0;p<v;p++){var g=n.GPOS.readAnchorRecord(r,c.readUshort(r,l+2)+u);g.markClass=c.readUshort(r,l),f.push(g),l+=4}return f},n.GPOS.readAnchorRecord=function(r,l){var c=n._bin,f={};return f.fmt=c.readUshort(r,l),f.x=c.readShort(r,l+2),f.y=c.readShort(r,l+4),f},n.GSUB={},n.GSUB.parse=function(r,l,c,f){return n._lctf.parse(r,l,c,f,n.GSUB.subt)},n.GSUB.subt=function(r,l,c,f){var u=n._bin,v=c,p={};if(p.fmt=u.readUshort(r,c),c+=2,l!=1&&l!=2&&l!=4&&l!=5&&l!=6)return null;if(l==1||l==2||l==4||l==5&&p.fmt<=2||l==6&&p.fmt<=2){var g=u.readUshort(r,c);c+=2,p.coverage=n._lctf.readCoverage(r,v+g)}if(l==1&&p.fmt>=1&&p.fmt<=2){if(p.fmt==1)p.delta=u.readShort(r,c),c+=2;else if(p.fmt==2){var y=u.readUshort(r,c);c+=2,p.newg=u.readUshorts(r,c,y),c+=2*p.newg.length}}else if(l==2&&p.fmt==1){y=u.readUshort(r,c),c+=2,p.seqs=[];for(var E=0;E<y;E++){var T=u.readUshort(r,c)+v;c+=2;var x=u.readUshort(r,T);p.seqs.push(u.readUshorts(r,T+2,x))}}else if(l==4)for(p.vals=[],y=u.readUshort(r,c),c+=2,E=0;E<y;E++){var U=u.readUshort(r,c);c+=2,p.vals.push(n.GSUB.readLigatureSet(r,v+U))}else if(l==5&&p.fmt==2){if(p.fmt==2){var A=u.readUshort(r,c);c+=2,p.cDef=n._lctf.readClassDef(r,v+A),p.scset=[];var M=u.readUshort(r,c);for(c+=2,E=0;E<M;E++){var z=u.readUshort(r,c);c+=2,p.scset.push(z==0?null:n.GSUB.readSubClassSet(r,v+z))}}}else if(l==6&&p.fmt==3){if(p.fmt==3){for(E=0;E<3;E++){y=u.readUshort(r,c),c+=2;for(var N=[],O=0;O<y;O++)N.push(n._lctf.readCoverage(r,v+u.readUshort(r,c+2*O)));c+=2*y,E==0&&(p.backCvg=N),E==1&&(p.inptCvg=N),E==2&&(p.ahedCvg=N)}y=u.readUshort(r,c),c+=2,p.lookupRec=n.GSUB.readSubstLookupRecords(r,c,y)}}else{if(l==7&&p.fmt==1){var G=u.readUshort(r,c);c+=2;var V=u.readUint(r,c);if(c+=4,f.ltype==9)f.ltype=G;else if(f.ltype!=G)throw"invalid extension substitution";return n.GSUB.subt(r,f.ltype,v+V)}console.debug("unsupported GSUB table LookupType",l,"format",p.fmt)}return p},n.GSUB.readSubClassSet=function(r,l){var c=n._bin.readUshort,f=l,u=[],v=c(r,l);l+=2;for(var p=0;p<v;p++){var g=c(r,l);l+=2,u.push(n.GSUB.readSubClassRule(r,f+g))}return u},n.GSUB.readSubClassRule=function(r,l){var c=n._bin.readUshort,f={},u=c(r,l),v=c(r,l+=2);l+=2,f.input=[];for(var p=0;p<u-1;p++)f.input.push(c(r,l)),l+=2;return f.substLookupRecords=n.GSUB.readSubstLookupRecords(r,l,v),f},n.GSUB.readSubstLookupRecords=function(r,l,c){for(var f=n._bin.readUshort,u=[],v=0;v<c;v++)u.push(f(r,l),f(r,l+2)),l+=4;return u},n.GSUB.readChainSubClassSet=function(r,l){var c=n._bin,f=l,u=[],v=c.readUshort(r,l);l+=2;for(var p=0;p<v;p++){var g=c.readUshort(r,l);l+=2,u.push(n.GSUB.readChainSubClassRule(r,f+g))}return u},n.GSUB.readChainSubClassRule=function(r,l){for(var c=n._bin,f={},u=["backtrack","input","lookahead"],v=0;v<u.length;v++){var p=c.readUshort(r,l);l+=2,v==1&&p--,f[u[v]]=c.readUshorts(r,l,p),l+=2*f[u[v]].length}return p=c.readUshort(r,l),l+=2,f.subst=c.readUshorts(r,l,2*p),l+=2*f.subst.length,f},n.GSUB.readLigatureSet=function(r,l){var c=n._bin,f=l,u=[],v=c.readUshort(r,l);l+=2;for(var p=0;p<v;p++){var g=c.readUshort(r,l);l+=2,u.push(n.GSUB.readLigature(r,f+g))}return u},n.GSUB.readLigature=function(r,l){var c=n._bin,f={chain:[]};f.nglyph=c.readUshort(r,l),l+=2;var u=c.readUshort(r,l);l+=2;for(var v=0;v<u-1;v++)f.chain.push(c.readUshort(r,l)),l+=2;return f},n.head={},n.head.parse=function(r,l,c){var f=n._bin,u={};return f.readFixed(r,l),l+=4,u.fontRevision=f.readFixed(r,l),l+=4,f.readUint(r,l),l+=4,f.readUint(r,l),l+=4,u.flags=f.readUshort(r,l),l+=2,u.unitsPerEm=f.readUshort(r,l),l+=2,u.created=f.readUint64(r,l),l+=8,u.modified=f.readUint64(r,l),l+=8,u.xMin=f.readShort(r,l),l+=2,u.yMin=f.readShort(r,l),l+=2,u.xMax=f.readShort(r,l),l+=2,u.yMax=f.readShort(r,l),l+=2,u.macStyle=f.readUshort(r,l),l+=2,u.lowestRecPPEM=f.readUshort(r,l),l+=2,u.fontDirectionHint=f.readShort(r,l),l+=2,u.indexToLocFormat=f.readShort(r,l),l+=2,u.glyphDataFormat=f.readShort(r,l),l+=2,u},n.hhea={},n.hhea.parse=function(r,l,c){var f=n._bin,u={};return f.readFixed(r,l),l+=4,u.ascender=f.readShort(r,l),l+=2,u.descender=f.readShort(r,l),l+=2,u.lineGap=f.readShort(r,l),l+=2,u.advanceWidthMax=f.readUshort(r,l),l+=2,u.minLeftSideBearing=f.readShort(r,l),l+=2,u.minRightSideBearing=f.readShort(r,l),l+=2,u.xMaxExtent=f.readShort(r,l),l+=2,u.caretSlopeRise=f.readShort(r,l),l+=2,u.caretSlopeRun=f.readShort(r,l),l+=2,u.caretOffset=f.readShort(r,l),l+=2,l+=8,u.metricDataFormat=f.readShort(r,l),l+=2,u.numberOfHMetrics=f.readUshort(r,l),l+=2,u},n.hmtx={},n.hmtx.parse=function(r,l,c,f){for(var u=n._bin,v={aWidth:[],lsBearing:[]},p=0,g=0,y=0;y<f.maxp.numGlyphs;y++)y<f.hhea.numberOfHMetrics&&(p=u.readUshort(r,l),l+=2,g=u.readShort(r,l),l+=2),v.aWidth.push(p),v.lsBearing.push(g);return v},n.kern={},n.kern.parse=function(r,l,c,f){var u=n._bin,v=u.readUshort(r,l);if(l+=2,v==1)return n.kern.parseV1(r,l-2,c,f);var p=u.readUshort(r,l);l+=2;for(var g={glyph1:[],rval:[]},y=0;y<p;y++){l+=2,c=u.readUshort(r,l),l+=2;var E=u.readUshort(r,l);l+=2;var T=E>>>8;if((T&=15)!=0)throw"unknown kern table format: "+T;l=n.kern.readFormat0(r,l,g)}return g},n.kern.parseV1=function(r,l,c,f){var u=n._bin;u.readFixed(r,l),l+=4;var v=u.readUint(r,l);l+=4;for(var p={glyph1:[],rval:[]},g=0;g<v;g++){u.readUint(r,l),l+=4;var y=u.readUshort(r,l);l+=2,u.readUshort(r,l),l+=2;var E=y>>>8;if((E&=15)!=0)throw"unknown kern table format: "+E;l=n.kern.readFormat0(r,l,p)}return p},n.kern.readFormat0=function(r,l,c){var f=n._bin,u=-1,v=f.readUshort(r,l);l+=2,f.readUshort(r,l),l+=2,f.readUshort(r,l),l+=2,f.readUshort(r,l),l+=2;for(var p=0;p<v;p++){var g=f.readUshort(r,l);l+=2;var y=f.readUshort(r,l);l+=2;var E=f.readShort(r,l);l+=2,g!=u&&(c.glyph1.push(g),c.rval.push({glyph2:[],vals:[]}));var T=c.rval[c.rval.length-1];T.glyph2.push(y),T.vals.push(E),u=g}return l},n.loca={},n.loca.parse=function(r,l,c,f){var u=n._bin,v=[],p=f.head.indexToLocFormat,g=f.maxp.numGlyphs+1;if(p==0)for(var y=0;y<g;y++)v.push(u.readUshort(r,l+(y<<1))<<1);if(p==1)for(y=0;y<g;y++)v.push(u.readUint(r,l+(y<<2)));return v},n.maxp={},n.maxp.parse=function(r,l,c){var f=n._bin,u={},v=f.readUint(r,l);return l+=4,u.numGlyphs=f.readUshort(r,l),l+=2,v==65536&&(u.maxPoints=f.readUshort(r,l),l+=2,u.maxContours=f.readUshort(r,l),l+=2,u.maxCompositePoints=f.readUshort(r,l),l+=2,u.maxCompositeContours=f.readUshort(r,l),l+=2,u.maxZones=f.readUshort(r,l),l+=2,u.maxTwilightPoints=f.readUshort(r,l),l+=2,u.maxStorage=f.readUshort(r,l),l+=2,u.maxFunctionDefs=f.readUshort(r,l),l+=2,u.maxInstructionDefs=f.readUshort(r,l),l+=2,u.maxStackElements=f.readUshort(r,l),l+=2,u.maxSizeOfInstructions=f.readUshort(r,l),l+=2,u.maxComponentElements=f.readUshort(r,l),l+=2,u.maxComponentDepth=f.readUshort(r,l),l+=2),u},n.name={},n.name.parse=function(r,l,c){var f=n._bin,u={};f.readUshort(r,l),l+=2;var v=f.readUshort(r,l);l+=2,f.readUshort(r,l);for(var p,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],y=l+=2,E=0;E<v;E++){var T=f.readUshort(r,l);l+=2;var x=f.readUshort(r,l);l+=2;var U=f.readUshort(r,l);l+=2;var A=f.readUshort(r,l);l+=2;var M=f.readUshort(r,l);l+=2;var z=f.readUshort(r,l);l+=2;var N,O=g[A],G=y+12*v+z;if(T==0)N=f.readUnicode(r,G,M/2);else if(T==3&&x==0)N=f.readUnicode(r,G,M/2);else if(x==0)N=f.readASCII(r,G,M);else if(x==1)N=f.readUnicode(r,G,M/2);else if(x==3)N=f.readUnicode(r,G,M/2);else{if(T!=1)throw"unknown encoding "+x+", platformID: "+T;N=f.readASCII(r,G,M),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var V="p"+T+","+U.toString(16);u[V]==null&&(u[V]={}),u[V][O!==void 0?O:A]=N,u[V]._lang=U}for(var D in u)if(u[D].postScriptName!=null&&u[D]._lang==1033)return u[D];for(var D in u)if(u[D].postScriptName!=null&&u[D]._lang==0)return u[D];for(var D in u)if(u[D].postScriptName!=null&&u[D]._lang==3084)return u[D];for(var D in u)if(u[D].postScriptName!=null)return u[D];for(var D in u){p=D;break}return console.debug("returning name table with languageID "+u[p]._lang),u[p]},n["OS/2"]={},n["OS/2"].parse=function(r,l,c){var f=n._bin.readUshort(r,l);l+=2;var u={};if(f==0)n["OS/2"].version0(r,l,u);else if(f==1)n["OS/2"].version1(r,l,u);else if(f==2||f==3||f==4)n["OS/2"].version2(r,l,u);else{if(f!=5)throw"unknown OS/2 table version: "+f;n["OS/2"].version5(r,l,u)}return u},n["OS/2"].version0=function(r,l,c){var f=n._bin;return c.xAvgCharWidth=f.readShort(r,l),l+=2,c.usWeightClass=f.readUshort(r,l),l+=2,c.usWidthClass=f.readUshort(r,l),l+=2,c.fsType=f.readUshort(r,l),l+=2,c.ySubscriptXSize=f.readShort(r,l),l+=2,c.ySubscriptYSize=f.readShort(r,l),l+=2,c.ySubscriptXOffset=f.readShort(r,l),l+=2,c.ySubscriptYOffset=f.readShort(r,l),l+=2,c.ySuperscriptXSize=f.readShort(r,l),l+=2,c.ySuperscriptYSize=f.readShort(r,l),l+=2,c.ySuperscriptXOffset=f.readShort(r,l),l+=2,c.ySuperscriptYOffset=f.readShort(r,l),l+=2,c.yStrikeoutSize=f.readShort(r,l),l+=2,c.yStrikeoutPosition=f.readShort(r,l),l+=2,c.sFamilyClass=f.readShort(r,l),l+=2,c.panose=f.readBytes(r,l,10),l+=10,c.ulUnicodeRange1=f.readUint(r,l),l+=4,c.ulUnicodeRange2=f.readUint(r,l),l+=4,c.ulUnicodeRange3=f.readUint(r,l),l+=4,c.ulUnicodeRange4=f.readUint(r,l),l+=4,c.achVendID=[f.readInt8(r,l),f.readInt8(r,l+1),f.readInt8(r,l+2),f.readInt8(r,l+3)],l+=4,c.fsSelection=f.readUshort(r,l),l+=2,c.usFirstCharIndex=f.readUshort(r,l),l+=2,c.usLastCharIndex=f.readUshort(r,l),l+=2,c.sTypoAscender=f.readShort(r,l),l+=2,c.sTypoDescender=f.readShort(r,l),l+=2,c.sTypoLineGap=f.readShort(r,l),l+=2,c.usWinAscent=f.readUshort(r,l),l+=2,c.usWinDescent=f.readUshort(r,l),l+=2},n["OS/2"].version1=function(r,l,c){var f=n._bin;return l=n["OS/2"].version0(r,l,c),c.ulCodePageRange1=f.readUint(r,l),l+=4,c.ulCodePageRange2=f.readUint(r,l),l+=4},n["OS/2"].version2=function(r,l,c){var f=n._bin;return l=n["OS/2"].version1(r,l,c),c.sxHeight=f.readShort(r,l),l+=2,c.sCapHeight=f.readShort(r,l),l+=2,c.usDefault=f.readUshort(r,l),l+=2,c.usBreak=f.readUshort(r,l),l+=2,c.usMaxContext=f.readUshort(r,l),l+=2},n["OS/2"].version5=function(r,l,c){var f=n._bin;return l=n["OS/2"].version2(r,l,c),c.usLowerOpticalPointSize=f.readUshort(r,l),l+=2,c.usUpperOpticalPointSize=f.readUshort(r,l),l+=2},n.post={},n.post.parse=function(r,l,c){var f=n._bin,u={};return u.version=f.readFixed(r,l),l+=4,u.italicAngle=f.readFixed(r,l),l+=4,u.underlinePosition=f.readShort(r,l),l+=2,u.underlineThickness=f.readShort(r,l),l+=2,u},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(r,l){var c=r.cmap,f=-1;if(c.p0e4!=null?f=c.p0e4:c.p3e1!=null?f=c.p3e1:c.p1e0!=null?f=c.p1e0:c.p0e3!=null&&(f=c.p0e3),f==-1)throw"no familiar platform and encoding!";var u=c.tables[f];if(u.format==0)return l>=u.map.length?0:u.map[l];if(u.format==4){for(var v=-1,p=0;p<u.endCount.length;p++)if(l<=u.endCount[p]){v=p;break}return v==-1||u.startCount[v]>l?0:65535&(u.idRangeOffset[v]!=0?u.glyphIdArray[l-u.startCount[v]+(u.idRangeOffset[v]>>1)-(u.idRangeOffset.length-v)]:l+u.idDelta[v])}if(u.format==12){if(l>u.groups[u.groups.length-1][1])return 0;for(p=0;p<u.groups.length;p++){var g=u.groups[p];if(g[0]<=l&&l<=g[1])return g[2]+(l-g[0])}return 0}throw"unknown cmap table format "+u.format},n.U.glyphToPath=function(r,l){var c={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[l]){var f=r.SVG.entries[l];return f==null?c:(typeof f=="string"&&(f=n.SVG.toPath(f),r.SVG.entries[l]=f),f)}if(r.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},v=r.CFF,p=r.CFF.Private;if(v.ROS){for(var g=0;v.FDSelect[g+2]<=l;)g+=2;p=v.FDArray[v.FDSelect[g+1]].Private}n.U._drawCFF(r.CFF.CharStrings[l],u,v,p,c)}else r.glyf&&n.U._drawGlyf(l,r,c);return c},n.U._drawGlyf=function(r,l,c){var f=l.glyf[r];f==null&&(f=l.glyf[r]=n.glyf._parseGlyf(l,r)),f!=null&&(f.noc>-1?n.U._simpleGlyph(f,c):n.U._compoGlyph(f,l,c))},n.U._simpleGlyph=function(r,l){for(var c=0;c<r.noc;c++){for(var f=c==0?0:r.endPts[c-1]+1,u=r.endPts[c],v=f;v<=u;v++){var p=v==f?u:v-1,g=v==u?f:v+1,y=1&r.flags[v],E=1&r.flags[p],T=1&r.flags[g],x=r.xs[v],U=r.ys[v];if(v==f)if(y){if(!E){n.U.P.moveTo(l,x,U);continue}n.U.P.moveTo(l,r.xs[p],r.ys[p])}else E?n.U.P.moveTo(l,r.xs[p],r.ys[p]):n.U.P.moveTo(l,(r.xs[p]+x)/2,(r.ys[p]+U)/2);y?E&&n.U.P.lineTo(l,x,U):T?n.U.P.qcurveTo(l,x,U,r.xs[g],r.ys[g]):n.U.P.qcurveTo(l,x,U,(x+r.xs[g])/2,(U+r.ys[g])/2)}n.U.P.closePath(l)}},n.U._compoGlyph=function(r,l,c){for(var f=0;f<r.parts.length;f++){var u={cmds:[],crds:[]},v=r.parts[f];n.U._drawGlyf(v.glyphIndex,l,u);for(var p=v.m,g=0;g<u.crds.length;g+=2){var y=u.crds[g],E=u.crds[g+1];c.crds.push(y*p.a+E*p.b+p.tx),c.crds.push(y*p.c+E*p.d+p.ty)}for(g=0;g<u.cmds.length;g++)c.cmds.push(u.cmds[g])}},n.U._getGlyphClass=function(r,l){var c=n._lctf.getInterval(l,r);return c==-1?0:l[c+2]},n.U._applySubs=function(r,l,c,f){for(var u=r.length-l-1,v=0;v<c.tabs.length;v++)if(c.tabs[v]!=null){var p,g=c.tabs[v];if(!g.coverage||(p=n._lctf.coverageIndex(g.coverage,r[l]))!=-1){if(c.ltype==1)r[l],g.fmt==1?r[l]=r[l]+g.delta:r[l]=g.newg[p];else if(c.ltype==4)for(var y=g.vals[p],E=0;E<y.length;E++){var T=y[E],x=T.chain.length;if(!(x>u)){for(var U=!0,A=0,M=0;M<x;M++){for(;r[l+A+(1+M)]==-1;)A++;T.chain[M]!=r[l+A+(1+M)]&&(U=!1)}if(U){for(r[l]=T.nglyph,M=0;M<x+A;M++)r[l+M+1]=-1;break}}}else if(c.ltype==5&&g.fmt==2)for(var z=n._lctf.getInterval(g.cDef,r[l]),N=g.cDef[z+2],O=g.scset[N],G=0;G<O.length;G++){var V=O[G],D=V.input;if(!(D.length>u)){for(U=!0,M=0;M<D.length;M++){var L=n._lctf.getInterval(g.cDef,r[l+1+M]);if(z==-1&&g.cDef[L+2]!=D[M]){U=!1;break}}if(U){var q=V.substLookupRecords;for(E=0;E<q.length;E+=2)q[E],q[E+1]}}}else if(c.ltype==6&&g.fmt==3){if(!n.U._glsCovered(r,g.backCvg,l-g.backCvg.length)||!n.U._glsCovered(r,g.inptCvg,l)||!n.U._glsCovered(r,g.ahedCvg,l+g.inptCvg.length))continue;var ie=g.lookupRec;for(G=0;G<ie.length;G+=2){z=ie[G];var w=f[ie[G+1]];n.U._applySubs(r,l+z,w,f)}}}}},n.U._glsCovered=function(r,l,c){for(var f=0;f<l.length;f++)if(n._lctf.coverageIndex(l[f],r[c+f])==-1)return!1;return!0},n.U.glyphsToPath=function(r,l,c){for(var f={cmds:[],crds:[]},u=0,v=0;v<l.length;v++){var p=l[v];if(p!=-1){for(var g=v<l.length-1&&l[v+1]!=-1?l[v+1]:0,y=n.U.glyphToPath(r,p),E=0;E<y.crds.length;E+=2)f.crds.push(y.crds[E]+u),f.crds.push(y.crds[E+1]);for(c&&f.cmds.push(c),E=0;E<y.cmds.length;E++)f.cmds.push(y.cmds[E]);c&&f.cmds.push("X"),u+=r.hmtx.aWidth[p],v<l.length-1&&(u+=n.U.getPairAdjustment(r,p,g))}}return f},n.U.P={},n.U.P.moveTo=function(r,l,c){r.cmds.push("M"),r.crds.push(l,c)},n.U.P.lineTo=function(r,l,c){r.cmds.push("L"),r.crds.push(l,c)},n.U.P.curveTo=function(r,l,c,f,u,v,p){r.cmds.push("C"),r.crds.push(l,c,f,u,v,p)},n.U.P.qcurveTo=function(r,l,c,f,u){r.cmds.push("Q"),r.crds.push(l,c,f,u)},n.U.P.closePath=function(r){r.cmds.push("Z")},n.U._drawCFF=function(r,l,c,f,u){for(var v=l.stack,p=l.nStems,g=l.haveWidth,y=l.width,E=l.open,T=0,x=l.x,U=l.y,A=0,M=0,z=0,N=0,O=0,G=0,V=0,D=0,L=0,q=0,ie={val:0,size:0};T<r.length;){n.CFF.getCharString(r,T,ie);var w=ie.val;if(T+=ie.size,w=="o1"||w=="o18")v.length%2!=0&&!g&&(y=v.shift()+f.nominalWidthX),p+=v.length>>1,v.length=0,g=!0;else if(w=="o3"||w=="o23")v.length%2!=0&&!g&&(y=v.shift()+f.nominalWidthX),p+=v.length>>1,v.length=0,g=!0;else if(w=="o4")v.length>1&&!g&&(y=v.shift()+f.nominalWidthX,g=!0),E&&n.U.P.closePath(u),U+=v.pop(),n.U.P.moveTo(u,x,U),E=!0;else if(w=="o5")for(;v.length>0;)x+=v.shift(),U+=v.shift(),n.U.P.lineTo(u,x,U);else if(w=="o6"||w=="o7")for(var X=v.length,F=w=="o6",ce=0;ce<X;ce++){var C=v.shift();F?x+=C:U+=C,F=!F,n.U.P.lineTo(u,x,U)}else if(w=="o8"||w=="o24"){X=v.length;for(var k=0;k+6<=X;)A=x+v.shift(),M=U+v.shift(),z=A+v.shift(),N=M+v.shift(),x=z+v.shift(),U=N+v.shift(),n.U.P.curveTo(u,A,M,z,N,x,U),k+=6;w=="o24"&&(x+=v.shift(),U+=v.shift(),n.U.P.lineTo(u,x,U))}else{if(w=="o11")break;if(w=="o1234"||w=="o1235"||w=="o1236"||w=="o1237")w=="o1234"&&(M=U,z=(A=x+v.shift())+v.shift(),q=N=M+v.shift(),G=N,D=U,x=(V=(O=(L=z+v.shift())+v.shift())+v.shift())+v.shift(),n.U.P.curveTo(u,A,M,z,N,L,q),n.U.P.curveTo(u,O,G,V,D,x,U)),w=="o1235"&&(A=x+v.shift(),M=U+v.shift(),z=A+v.shift(),N=M+v.shift(),L=z+v.shift(),q=N+v.shift(),O=L+v.shift(),G=q+v.shift(),V=O+v.shift(),D=G+v.shift(),x=V+v.shift(),U=D+v.shift(),v.shift(),n.U.P.curveTo(u,A,M,z,N,L,q),n.U.P.curveTo(u,O,G,V,D,x,U)),w=="o1236"&&(A=x+v.shift(),M=U+v.shift(),z=A+v.shift(),q=N=M+v.shift(),G=N,V=(O=(L=z+v.shift())+v.shift())+v.shift(),D=G+v.shift(),x=V+v.shift(),n.U.P.curveTo(u,A,M,z,N,L,q),n.U.P.curveTo(u,O,G,V,D,x,U)),w=="o1237"&&(A=x+v.shift(),M=U+v.shift(),z=A+v.shift(),N=M+v.shift(),L=z+v.shift(),q=N+v.shift(),O=L+v.shift(),G=q+v.shift(),V=O+v.shift(),D=G+v.shift(),Math.abs(V-x)>Math.abs(D-U)?x=V+v.shift():U=D+v.shift(),n.U.P.curveTo(u,A,M,z,N,L,q),n.U.P.curveTo(u,O,G,V,D,x,U));else if(w=="o14"){if(v.length>0&&!g&&(y=v.shift()+c.nominalWidthX,g=!0),v.length==4){var ee=v.shift(),Z=v.shift(),Y=v.shift(),R=v.shift(),j=n.CFF.glyphBySE(c,Y),I=n.CFF.glyphBySE(c,R);n.U._drawCFF(c.CharStrings[j],l,c,f,u),l.x=ee,l.y=Z,n.U._drawCFF(c.CharStrings[I],l,c,f,u)}E&&(n.U.P.closePath(u),E=!1)}else if(w=="o19"||w=="o20")v.length%2!=0&&!g&&(y=v.shift()+f.nominalWidthX),p+=v.length>>1,v.length=0,g=!0,T+=p+7>>3;else if(w=="o21")v.length>2&&!g&&(y=v.shift()+f.nominalWidthX,g=!0),U+=v.pop(),x+=v.pop(),E&&n.U.P.closePath(u),n.U.P.moveTo(u,x,U),E=!0;else if(w=="o22")v.length>1&&!g&&(y=v.shift()+f.nominalWidthX,g=!0),x+=v.pop(),E&&n.U.P.closePath(u),n.U.P.moveTo(u,x,U),E=!0;else if(w=="o25"){for(;v.length>6;)x+=v.shift(),U+=v.shift(),n.U.P.lineTo(u,x,U);A=x+v.shift(),M=U+v.shift(),z=A+v.shift(),N=M+v.shift(),x=z+v.shift(),U=N+v.shift(),n.U.P.curveTo(u,A,M,z,N,x,U)}else if(w=="o26")for(v.length%2&&(x+=v.shift());v.length>0;)A=x,M=U+v.shift(),x=z=A+v.shift(),U=(N=M+v.shift())+v.shift(),n.U.P.curveTo(u,A,M,z,N,x,U);else if(w=="o27")for(v.length%2&&(U+=v.shift());v.length>0;)M=U,z=(A=x+v.shift())+v.shift(),N=M+v.shift(),x=z+v.shift(),U=N,n.U.P.curveTo(u,A,M,z,N,x,U);else if(w=="o10"||w=="o29"){var Q=w=="o10"?f:c;if(v.length==0)console.debug("error: empty stack");else{var W=v.pop(),K=Q.Subrs[W+Q.Bias];l.x=x,l.y=U,l.nStems=p,l.haveWidth=g,l.width=y,l.open=E,n.U._drawCFF(K,l,c,f,u),x=l.x,U=l.y,p=l.nStems,g=l.haveWidth,y=l.width,E=l.open}}else if(w=="o30"||w=="o31"){var ae=v.length,se=(k=0,w=="o31");for(k+=ae-(X=-3&ae);k<X;)se?(M=U,z=(A=x+v.shift())+v.shift(),U=(N=M+v.shift())+v.shift(),X-k==5?(x=z+v.shift(),k++):x=z,se=!1):(A=x,M=U+v.shift(),z=A+v.shift(),N=M+v.shift(),x=z+v.shift(),X-k==5?(U=N+v.shift(),k++):U=N,se=!0),n.U.P.curveTo(u,A,M,z,N,x,U),k+=4}else{if((w+"").charAt(0)=="o")throw console.debug("Unknown operation: "+w,r),w;v.push(w)}}}l.x=x,l.y=U,l.nStems=p,l.haveWidth=g,l.width=y,l.open=E};var s=n,h={Typr:s};return i.Typr=s,i.default=h,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function dy(){return function(i){var n=Uint8Array,s=Uint16Array,h=Uint32Array,r=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(w,X){for(var F=new s(31),ce=0;ce<31;++ce)F[ce]=X+=1<<w[ce-1];var C=new h(F[30]);for(ce=1;ce<30;++ce)for(var k=F[ce];k<F[ce+1];++k)C[k]=k-F[ce]<<5|ce;return[F,C]},u=f(r,2),v=u[0],p=u[1];v[28]=258,p[258]=28;for(var g=f(l,0)[0],y=new s(32768),E=0;E<32768;++E){var T=(43690&E)>>>1|(21845&E)<<1;T=(61680&(T=(52428&T)>>>2|(13107&T)<<2))>>>4|(3855&T)<<4,y[E]=((65280&T)>>>8|(255&T)<<8)>>>1}var x=function(w,X,F){for(var ce=w.length,C=0,k=new s(X);C<ce;++C)++k[w[C]-1];var ee,Z=new s(X);for(C=0;C<X;++C)Z[C]=Z[C-1]+k[C-1]<<1;{ee=new s(1<<X);var Y=15-X;for(C=0;C<ce;++C)if(w[C])for(var R=C<<4|w[C],j=X-w[C],I=Z[w[C]-1]++<<j,Q=I|(1<<j)-1;I<=Q;++I)ee[y[I]>>>Y]=R}return ee},U=new n(288);for(E=0;E<144;++E)U[E]=8;for(E=144;E<256;++E)U[E]=9;for(E=256;E<280;++E)U[E]=7;for(E=280;E<288;++E)U[E]=8;var A=new n(32);for(E=0;E<32;++E)A[E]=5;var M=x(U,9),z=x(A,5),N=function(w){for(var X=w[0],F=1;F<w.length;++F)w[F]>X&&(X=w[F]);return X},O=function(w,X,F){var ce=X/8|0;return(w[ce]|w[ce+1]<<8)>>(7&X)&F},G=function(w,X){var F=X/8|0;return(w[F]|w[F+1]<<8|w[F+2]<<16)>>(7&X)},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(w,X,F){var ce=new Error(X||V[w]);if(ce.code=w,Error.captureStackTrace&&Error.captureStackTrace(ce,D),!F)throw ce;return ce},L=function(w,X,F){var ce=w.length;if(!ce||F&&!F.l&&ce<5)return X||new n(0);var C=!X||F,k=!F||F.i;F||(F={}),X||(X=new n(3*ce));var ee,Z=function(He){var ht=X.length;if(He>ht){var $e=new n(Math.max(2*ht,He));$e.set(X),X=$e}},Y=F.f||0,R=F.p||0,j=F.b||0,I=F.l,Q=F.d,W=F.m,K=F.n,ae=8*ce;do{if(!I){F.f=Y=O(w,R,1);var se=O(w,R+1,3);if(R+=3,!se){var pe=w[(xe=((ee=R)/8|0)+(7&ee&&1)+4)-4]|w[xe-3]<<8,Ce=xe+pe;if(Ce>ce){k&&D(0);break}C&&Z(j+pe),X.set(w.subarray(xe,Ce),j),F.b=j+=pe,F.p=R=8*Ce;continue}if(se==1)I=M,Q=z,W=9,K=5;else if(se==2){var me=O(w,R,31)+257,ve=O(w,R+10,15)+4,Xe=me+O(w,R+5,31)+1;R+=14;for(var Be=new n(Xe),Ue=new n(19),Re=0;Re<ve;++Re)Ue[c[Re]]=O(w,R+3*Re,7);R+=3*ve;var Ne=N(Ue),Ee=(1<<Ne)-1,we=x(Ue,Ne);for(Re=0;Re<Xe;){var xe,he=we[O(w,R,Ee)];if(R+=15&he,(xe=he>>>4)<16)Be[Re++]=xe;else{var Ie=0,De=0;for(xe==16?(De=3+O(w,R,3),R+=2,Ie=Be[Re-1]):xe==17?(De=3+O(w,R,7),R+=3):xe==18&&(De=11+O(w,R,127),R+=7);De--;)Be[Re++]=Ie}}var Ve=Be.subarray(0,me),Ae=Be.subarray(me);W=N(Ve),K=N(Ae),I=x(Ve,W),Q=x(Ae,K)}else D(1);if(R>ae){k&&D(0);break}}C&&Z(j+131072);for(var dt=(1<<W)-1,je=(1<<K)-1,Ye=R;;Ye=R){var qe=(Ie=I[G(w,R)&dt])>>>4;if((R+=15&Ie)>ae){k&&D(0);break}if(Ie||D(2),qe<256)X[j++]=qe;else{if(qe==256){Ye=R,I=null;break}var ke=qe-254;if(qe>264){var vt=r[Re=qe-257];ke=O(w,R,(1<<vt)-1)+v[Re],R+=vt}var Mt=Q[G(w,R)&je],Ze=Mt>>>4;if(Mt||D(3),R+=15&Mt,Ae=g[Ze],Ze>3&&(vt=l[Ze],Ae+=G(w,R)&(1<<vt)-1,R+=vt),R>ae){k&&D(0);break}C&&Z(j+131072);for(var Fe=j+ke;j<Fe;j+=4)X[j]=X[j-Ae],X[j+1]=X[j+1-Ae],X[j+2]=X[j+2-Ae],X[j+3]=X[j+3-Ae];j=Fe}}F.l=I,F.p=Ye,F.b=j,I&&(Y=1,F.m=W,F.d=Q,F.n=K)}while(!Y);return j==X.length?X:function(He,ht,$e){($e==null||$e>He.length)&&($e=He.length);var ut=new(He instanceof s?s:He instanceof h?h:n)($e-ht);return ut.set(He.subarray(ht,$e)),ut}(X,0,j)},q=new n(0),ie=typeof TextDecoder<"u"&&new TextDecoder;try{ie.decode(q,{stream:!0})}catch{}return i.convert_streams=function(w){var X=new DataView(w),F=0;function ce(){var me=X.getUint16(F);return F+=2,me}function C(){var me=X.getUint32(F);return F+=4,me}function k(me){pe.setUint16(Ce,me),Ce+=2}function ee(me){pe.setUint32(Ce,me),Ce+=4}for(var Z={signature:C(),flavor:C(),length:C(),numTables:ce(),reserved:ce(),totalSfntSize:C(),majorVersion:ce(),minorVersion:ce(),metaOffset:C(),metaLength:C(),metaOrigLength:C(),privOffset:C(),privLength:C()},Y=0;Math.pow(2,Y)<=Z.numTables;)Y++;Y--;for(var R=16*Math.pow(2,Y),j=16*Z.numTables-R,I=12,Q=[],W=0;W<Z.numTables;W++)Q.push({tag:C(),offset:C(),compLength:C(),origLength:C(),origChecksum:C()}),I+=16;var K,ae=new Uint8Array(12+16*Q.length+Q.reduce(function(me,ve){return me+ve.origLength+4},0)),se=ae.buffer,pe=new DataView(se),Ce=0;return ee(Z.flavor),k(Z.numTables),k(R),k(Y),k(j),Q.forEach(function(me){ee(me.tag),ee(me.origChecksum),ee(I),ee(me.origLength),me.outOffset=I,(I+=me.origLength)%4!=0&&(I+=4-I%4)}),Q.forEach(function(me){var ve,Xe=w.slice(me.offset,me.offset+me.compLength);if(me.compLength!=me.origLength){var Be=new Uint8Array(me.origLength);ve=new Uint8Array(Xe,2),L(ve,Be)}else Be=new Uint8Array(Xe);ae.set(Be,me.outOffset);var Ue=0;(I=me.outOffset+me.origLength)%4!=0&&(Ue=4-I%4),ae.set(new Uint8Array(Ue).buffer,me.outOffset+me.origLength),K=I+Ue}),se.slice(0,K)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function vy(i,n){const s={M:2,L:2,Q:4,C:6,Z:0},h={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,l=2,c=4,f=8,u=16,v=32;let p;function g(V){if(!p){const D={R:l,L:r,D:c,C:u,U:v,T:f};p=new Map;for(let L in h){let q=0;h[L].split(",").forEach(ie=>{let[w,X]=ie.split("+");w=parseInt(w,36),X=X?parseInt(X,36):0,p.set(q+=w,D[L]);for(let F=X;F--;)p.set(++q,D[L])})}}return p.get(V)||v}const y=1,E=2,T=3,x=4,U=[null,"isol","init","fina","medi"];function A(V){const D=new Uint8Array(V.length);let L=v,q=y,ie=-1;for(let w=0;w<V.length;w++){const X=V.codePointAt(w);let F=g(X)|0,ce=y;F&f||(L&(r|c|u)?F&(l|c|u)?(ce=T,(q===y||q===T)&&D[ie]++):F&(r|v)&&(q===E||q===x)&&D[ie]--:L&(l|v)&&(q===E||q===x)&&D[ie]--,q=D[w]=ce,L=F,ie=w,X>65535&&w++)}return D}function M(V,D){const L=[];for(let ie=0;ie<D.length;ie++){const w=D.codePointAt(ie);w>65535&&ie++,L.push(i.U.codeToGlyph(V,w))}const q=V.GSUB;if(q){const{lookupList:ie,featureList:w}=q;let X;const F=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ce=[];w.forEach(C=>{if(F.test(C.tag))for(let k=0;k<C.tab.length;k++){if(ce[C.tab[k]])continue;ce[C.tab[k]]=!0;const ee=ie[C.tab[k]],Z=/^(isol|init|fina|medi)$/.test(C.tag);Z&&!X&&(X=A(D));for(let Y=0;Y<L.length;Y++)(!X||!Z||U[X[Y]]===C.tag)&&i.U._applySubs(L,Y,ee,ie)}})}return L}function z(V,D){const L=new Int16Array(D.length*3);let q=0;for(;q<D.length;q++){const F=D[q];if(F===-1)continue;L[q*3+2]=V.hmtx.aWidth[F];const ce=V.GPOS;if(ce){const C=ce.lookupList;for(let k=0;k<C.length;k++){const ee=C[k];for(let Z=0;Z<ee.tabs.length;Z++){const Y=ee.tabs[Z];if(ee.ltype===1){if(i._lctf.coverageIndex(Y.coverage,F)!==-1&&Y.pos){X(Y.pos,q);break}}else if(ee.ltype===2){let R=null,j=ie();if(j!==-1){const I=i._lctf.coverageIndex(Y.coverage,D[j]);if(I!==-1){if(Y.fmt===1){const Q=Y.pairsets[I];for(let W=0;W<Q.length;W++)Q[W].gid2===F&&(R=Q[W])}else if(Y.fmt===2){const Q=i.U._getGlyphClass(D[j],Y.classDef1),W=i.U._getGlyphClass(F,Y.classDef2);R=Y.matrix[Q][W]}if(R){R.val1&&X(R.val1,j),R.val2&&X(R.val2,q);break}}}}else if(ee.ltype===4){const R=i._lctf.coverageIndex(Y.markCoverage,F);if(R!==-1){const j=ie(w),I=j===-1?-1:i._lctf.coverageIndex(Y.baseCoverage,D[j]);if(I!==-1){const Q=Y.markArray[R],W=Y.baseArray[I][Q.markClass];L[q*3]=W.x-Q.x+L[j*3]-L[j*3+2],L[q*3+1]=W.y-Q.y+L[j*3+1];break}}}else if(ee.ltype===6){const R=i._lctf.coverageIndex(Y.mark1Coverage,F);if(R!==-1){const j=ie();if(j!==-1){const I=D[j];if(N(V,I)===3){const Q=i._lctf.coverageIndex(Y.mark2Coverage,I);if(Q!==-1){const W=Y.mark1Array[R],K=Y.mark2Array[Q][W.markClass];L[q*3]=K.x-W.x+L[j*3]-L[j*3+2],L[q*3+1]=K.y-W.y+L[j*3+1];break}}}}}}}}else if(V.kern&&!V.cff){const C=ie();if(C!==-1){const k=V.kern.glyph1.indexOf(D[C]);if(k!==-1){const ee=V.kern.rval[k].glyph2.indexOf(F);ee!==-1&&(L[C*3+2]+=V.kern.rval[k].vals[ee])}}}}return L;function ie(F){for(let ce=q-1;ce>=0;ce--)if(D[ce]!==-1&&(!F||F(D[ce])))return ce;return-1}function w(F){return N(V,F)===1}function X(F,ce){for(let C=0;C<3;C++)L[ce*3+C]+=F[C]||0}}function N(V,D){const L=V.GDEF&&V.GDEF.glyphClassDef;return L?i.U._getGlyphClass(D,L):0}function O(...V){for(let D=0;D<V.length;D++)if(typeof V[D]=="number")return V[D]}function G(V){const D=Object.create(null),L=V["OS/2"],q=V.hhea,ie=V.head.unitsPerEm,w=O(L&&L.sTypoAscender,q&&q.ascender,ie),X={unitsPerEm:ie,ascender:w,descender:O(L&&L.sTypoDescender,q&&q.descender,0),capHeight:O(L&&L.sCapHeight,w),xHeight:O(L&&L.sxHeight,w),lineGap:O(L&&L.sTypoLineGap,q&&q.lineGap),supportsCodePoint(F){return i.U.codeToGlyph(V,F)>0},forEachGlyph(F,ce,C,k){let ee=0;const Z=1/X.unitsPerEm*ce,Y=M(V,F);let R=0;const j=z(V,Y);return Y.forEach((I,Q)=>{if(I!==-1){let W=D[I];if(!W){const{cmds:K,crds:ae}=i.U.glyphToPath(V,I);let se="",pe=0;for(let Be=0,Ue=K.length;Be<Ue;Be++){const Re=s[K[Be]];se+=K[Be];for(let Ne=1;Ne<=Re;Ne++)se+=(Ne>1?",":"")+ae[pe++]}let Ce,me,ve,Xe;if(ae.length){Ce=me=1/0,ve=Xe=-1/0;for(let Be=0,Ue=ae.length;Be<Ue;Be+=2){let Re=ae[Be],Ne=ae[Be+1];Re<Ce&&(Ce=Re),Ne<me&&(me=Ne),Re>ve&&(ve=Re),Ne>Xe&&(Xe=Ne)}}else Ce=ve=me=Xe=0;W=D[I]={index:I,advanceWidth:V.hmtx.aWidth[I],xMin:Ce,yMin:me,xMax:ve,yMax:Xe,path:se}}k.call(null,W,ee+j[Q*3]*Z,j[Q*3+1]*Z,R),ee+=j[Q*3+2]*Z,C&&(ee+=C*ce)}R+=F.codePointAt(R)>65535?2:1}),ee}};return X}return function(D){const L=new Uint8Array(D,0,4),q=i._bin.readASCII(L,0,4);if(q==="wOFF")D=n(D);else if(q==="wOF2")throw new Error("woff2 fonts not supported");return G(i.parse(D)[0])}}const hy=Yr({name:"Typr Font Parser",dependencies:[fy,dy,vy],init(i,n,s){const h=i(),r=n();return s(h,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function py(){return function(i){var n=function(){this.buckets=new Map};n.prototype.add=function(z){var N=z>>5;this.buckets.set(N,(this.buckets.get(N)||0)|1<<(31&z))},n.prototype.has=function(z){var N=this.buckets.get(z>>5);return N!==void 0&&(N&1<<(31&z))!=0},n.prototype.serialize=function(){var z=[];return this.buckets.forEach(function(N,O){z.push((+O).toString(36)+":"+N.toString(36))}),z.join(",")},n.prototype.deserialize=function(z){var N=this;this.buckets.clear(),z.split(",").forEach(function(O){var G=O.split(":");N.buckets.set(parseInt(G[0],36),parseInt(G[1],36))})};var s=Math.pow(2,8),h=s-1,r=~h;function l(z){var N=function(G){return G&r}(z).toString(16),O=function(G){return(G&r)+s-1}(z).toString(16);return"codepoint-index/plane"+(z>>16)+"/"+N+"-"+O+".json"}function c(z,N){var O=z&h,G=N.codePointAt(O/6|0);return((G=(G||48)-48)&1<<O%6)!=0}function f(z,N){var O;(O=z,O.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(G){return G.split("-").map(function(V){return parseInt(V.trim(),16)})})).forEach(function(G){var V=G[0],D=G[1];D===void 0&&(D=V),N(V,D)})}function u(z,N){f(z,function(O,G){for(var V=O;V<=G;V++)N(V)})}var v={},p={},g=new WeakMap,y="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function E(z){var N=g.get(z);return N||(N=new n,u(z.ranges,function(O){return N.add(O)}),g.set(z,N)),N}var T,x=new Map;function U(z,N,O){return z[N]?N:z[O]?O:function(G){for(var V in G)return V}(z)}function A(z,N){var O=N;if(!z.includes(O)){O=1/0;for(var G=0;G<z.length;G++)Math.abs(z[G]-N)<Math.abs(O-N)&&(O=z[G])}return O}function M(z){return T||(T=new Set,u("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(N){T.add(N)})),T.has(z)}return i.CodePointSet=n,i.clearCache=function(){v={},p={}},i.getFontsForString=function(z,N){N===void 0&&(N={});var O,G=N.lang;G===void 0&&(G=new RegExp("\\p{Script=Hangul}","u").test(O=z)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(O)?"ja":"en");var V=N.category;V===void 0&&(V="sans-serif");var D=N.style;D===void 0&&(D="normal");var L=N.weight;L===void 0&&(L=400);var q=(N.dataUrl||y).replace(/\/$/g,""),ie=new Map,w=new Uint8Array(z.length),X={},F={},ce=new Array(z.length),C=new Map,k=!1;function ee(R){var j=x.get(R);return j||(j=fetch(q+"/"+R).then(function(I){if(!I.ok)throw new Error(I.statusText);return I.json().then(function(Q){if(!Array.isArray(Q)||Q[0]!==1)throw new Error("Incorrect schema version; need 1, got "+Q[0]);return Q[1]})}).catch(function(I){if(q!==y)return k||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+q+'", trying default CDN. '+I.message),k=!0),q=y,x.delete(R),ee(R);throw I}),x.set(R,j)),j}for(var Z=function(R){var j=z.codePointAt(R),I=l(j);ce[R]=I,v[I]||C.has(I)||C.set(I,ee(I).then(function(Q){v[I]=Q})),j>65535&&(R++,Y=R)},Y=0;Y<z.length;Y++)Z(Y);return Promise.all(C.values()).then(function(){C.clear();for(var R=function(I){var Q=z.codePointAt(I),W=null,K=v[ce[I]],ae=void 0;for(var se in K){var pe=F[se];if(pe===void 0&&(pe=F[se]=new RegExp(se).test(G||"en")),pe){for(var Ce in ae=se,K[se])if(c(Q,K[se][Ce])){W=Ce;break}break}}if(!W){e:for(var me in K)if(me!==ae){for(var ve in K[me])if(c(Q,K[me][ve])){W=ve;break e}}}W||(console.debug("No font coverage for U+"+Q.toString(16)),W="latin"),ce[I]=W,p[W]||C.has(W)||C.set(W,ee("font-meta/"+W+".json").then(function(Xe){p[W]=Xe})),Q>65535&&(I++,j=I)},j=0;j<z.length;j++)R(j);return Promise.all(C.values())}).then(function(){for(var R,j=null,I=0;I<z.length;I++){var Q=z.codePointAt(I);if(j&&(M(Q)||E(j).has(Q)))w[I]=w[I-1];else{j=p[ce[I]];var W=X[j.id];if(!W){var K=j.typeforms,ae=U(K,V,"sans-serif"),se=U(K[ae],D,"normal"),pe=A((R=K[ae])===null||R===void 0?void 0:R[se],L);W=X[j.id]=q+"/font-files/"+j.id+"/"+ae+"."+se+"."+pe+".woff"}var Ce=ie.get(W);Ce==null&&(Ce=ie.size,ie.set(W,Ce)),w[I]=Ce}Q>65535&&(I++,w[I]=w[I-1])}return{fontUrls:Array.from(ie.keys()),chars:w}})},Object.defineProperty(i,"__esModule",{value:!0}),i}({})}function my(i,n){const s=Object.create(null),h=Object.create(null);function r(c,f){const u=v=>{console.error(`Failure loading font ${c}`,v)};try{const v=new XMLHttpRequest;v.open("get",c,!0),v.responseType="arraybuffer",v.onload=function(){if(v.status>=400)u(new Error(v.statusText));else if(v.status>0)try{const p=i(v.response);p.src=c,f(p)}catch(p){u(p)}},v.onerror=u,v.send()}catch(v){u(v)}}function l(c,f){let u=s[c];u?f(u):h[c]?h[c].push(f):(h[c]=[f],r(c,v=>{v.src=c,s[c]=v,h[c].forEach(p=>p(v)),delete h[c]}))}return function(c,f,{lang:u,fonts:v=[],style:p="normal",weight:g="normal",unicodeFontsURL:y}={}){const E=new Uint8Array(c.length),T=[];c.length||M();const x=new Map,U=[];if(p!=="italic"&&(p="normal"),typeof g!="number"&&(g=g==="bold"?700:400),v&&!Array.isArray(v)&&(v=[v]),v=v.slice().filter(N=>!N.lang||N.lang.test(u)).reverse(),v.length){let V=0;(function D(L=0){for(let q=L,ie=c.length;q<ie;q++){const w=c.codePointAt(q);if(V===1&&T[E[q-1]].supportsCodePoint(w)||q>0&&/\s/.test(c[q]))E[q]=E[q-1],V===2&&(U[U.length-1][1]=q);else for(let X=E[q],F=v.length;X<=F;X++)if(X===F){const ce=V===2?U[U.length-1]:U[U.length]=[q,q];ce[1]=q,V=2}else{E[q]=X;const{src:ce,unicodeRange:C}=v[X];if(!C||z(w,C)){const k=s[ce];if(!k){l(ce,()=>{D(q)});return}if(k.supportsCodePoint(w)){let ee=x.get(k);typeof ee!="number"&&(ee=T.length,T.push(k),x.set(k,ee)),E[q]=ee,V=1;break}}}w>65535&&q+1<ie&&(E[q+1]=E[q],q++,V===2&&(U[U.length-1][1]=q))}A()})()}else U.push([0,c.length-1]),A();function A(){if(U.length){const N=U.map(O=>c.substring(O[0],O[1]+1)).join(`
`);n.getFontsForString(N,{lang:u||void 0,style:p,weight:g,dataUrl:y}).then(({fontUrls:O,chars:G})=>{const V=T.length;let D=0;U.forEach(q=>{for(let ie=0,w=q[1]-q[0];ie<=w;ie++)E[q[0]+ie]=G[D++]+V;D++});let L=0;O.forEach((q,ie)=>{l(q,w=>{T[ie+V]=w,++L===O.length&&M()})})})}else M()}function M(){f({chars:E,fonts:T})}function z(N,O){for(let G=0;G<O.length;G++){const[V,D=V]=O[G];if(V<=N&&N<=D)return!0}return!1}}}const gy=Yr({name:"FontResolver",dependencies:[my,hy,py],init(i,n,s){return i(n,s())}});function yy(i,n){const h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",l=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c({text:T,lang:x,fonts:U,style:A,weight:M,preResolvedFonts:z,unicodeFontsURL:N},O){const G=({chars:V,fonts:D})=>{let L,q;const ie=[];for(let w=0;w<V.length;w++)V[w]!==q?(q=V[w],ie.push(L={start:w,end:w,fontObj:D[V[w]]})):L.end=w;O(ie)};z?G(z):i(T,G,{lang:x,fonts:U,style:A,weight:M,unicodeFontsURL:N})}function f({text:T="",font:x,lang:U,sdfGlyphSize:A=64,fontSize:M=400,fontWeight:z=1,fontStyle:N="normal",letterSpacing:O=0,lineHeight:G="normal",maxWidth:V=1/0,direction:D,textAlign:L="left",textIndent:q=0,whiteSpace:ie="normal",overflowWrap:w="normal",anchorX:X=0,anchorY:F=0,metricsOnly:ce=!1,unicodeFontsURL:C,preResolvedFonts:k=null,includeCaretPositions:ee=!1,chunkedBoundsSize:Z=8192,colorRanges:Y=null},R){const j=g(),I={fontLoad:0,typesetting:0};T.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),T=T.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),M=+M,O=+O,V=+V,G=G||"normal",q=+q,c({text:T,lang:U,style:N,weight:z,fonts:typeof x=="string"?[{src:x}]:x,unicodeFontsURL:C,preResolvedFonts:k},Q=>{I.fontLoad=g()-j;const W=isFinite(V);let K=null,ae=null,se=null,pe=null,Ce=null,me=null,ve=null,Xe=null,Be=0,Ue=0,Re=ie!=="nowrap";const Ne=new Map,Ee=g();let we=q,xe=0,he=new y;const Ie=[he];Q.forEach(je=>{const{fontObj:Ye}=je,{ascender:qe,descender:ke,unitsPerEm:vt,lineGap:Mt,capHeight:Ze,xHeight:Fe}=Ye;let He=Ne.get(Ye);if(!He){const fe=M/vt,tt=G==="normal"?(qe-ke+Mt)*fe:G*M,pn=(tt-(qe-ke)*fe)/2,ct=Math.min(tt,(qe-ke)*fe),nt=(qe+ke)/2*fe+ct/2;He={index:Ne.size,src:Ye.src,fontObj:Ye,fontSizeMult:fe,unitsPerEm:vt,ascender:qe*fe,descender:ke*fe,capHeight:Ze*fe,xHeight:Fe*fe,lineHeight:tt,baseline:-pn-qe*fe,caretTop:nt,caretBottom:nt-ct},Ne.set(Ye,He)}const{fontSizeMult:ht}=He,$e=T.slice(je.start,je.end+1);let ut,gt;Ye.forEachGlyph($e,M,O,(fe,tt,pn,ct)=>{tt+=xe,ct+=je.start,ut=tt,gt=fe;const nt=T.charAt(ct),zt=fe.advanceWidth*ht,yt=he.count;let Je;if("isEmpty"in fe||(fe.isWhitespace=!!nt&&new RegExp(r).test(nt),fe.canBreakAfter=!!nt&&l.test(nt),fe.isEmpty=fe.xMin===fe.xMax||fe.yMin===fe.yMax||h.test(nt)),!fe.isWhitespace&&!fe.isEmpty&&Ue++,Re&&W&&!fe.isWhitespace&&tt+zt+we>V&&yt){if(he.glyphAt(yt-1).glyphObj.canBreakAfter)Je=new y,we=-tt;else for(let ln=yt;ln--;)if(ln===0&&w==="break-word"){Je=new y,we=-tt;break}else if(he.glyphAt(ln).glyphObj.canBreakAfter){Je=he.splitAt(ln+1);const nn=Je.glyphAt(0).x;we-=nn;for(let qt=Je.count;qt--;)Je.glyphAt(qt).x-=nn;break}Je&&(he.isSoftWrapped=!0,he=Je,Ie.push(he),Be=V)}let Dt=he.glyphAt(he.count);Dt.glyphObj=fe,Dt.x=tt+we,Dt.y=pn,Dt.width=zt,Dt.charIndex=ct,Dt.fontData=He,nt===`
`&&(he=new y,Ie.push(he),we=-(tt+zt+O*M)+q)}),xe=ut+gt.advanceWidth*ht+O*M});let De=0;Ie.forEach(je=>{let Ye=!0;for(let qe=je.count;qe--;){const ke=je.glyphAt(qe);Ye&&!ke.glyphObj.isWhitespace&&(je.width=ke.x+ke.width,je.width>Be&&(Be=je.width),Ye=!1);let{lineHeight:vt,capHeight:Mt,xHeight:Ze,baseline:Fe}=ke.fontData;vt>je.lineHeight&&(je.lineHeight=vt);const He=Fe-je.baseline;He<0&&(je.baseline+=He,je.cap+=He,je.ex+=He),je.cap=Math.max(je.cap,je.baseline+Mt),je.ex=Math.max(je.ex,je.baseline+Ze)}je.baseline-=De,je.cap-=De,je.ex-=De,De+=je.lineHeight});let Ve=0,Ae=0;if(X&&(typeof X=="number"?Ve=-X:typeof X=="string"&&(Ve=-Be*(X==="left"?0:X==="center"?.5:X==="right"?1:v(X)))),F&&(typeof F=="number"?Ae=-F:typeof F=="string"&&(Ae=F==="top"?0:F==="top-baseline"?-Ie[0].baseline:F==="top-cap"?-Ie[0].cap:F==="top-ex"?-Ie[0].ex:F==="middle"?De/2:F==="bottom"?De:F==="bottom-baseline"?-Ie[Ie.length-1].baseline:v(F)*De)),!ce){const je=n.getEmbeddingLevels(T,D);K=new Uint16Array(Ue),ae=new Uint8Array(Ue),se=new Float32Array(Ue*2),pe={},ve=[1/0,1/0,-1/0,-1/0],Xe=[],ee&&(me=new Float32Array(T.length*4)),Y&&(Ce=new Uint8Array(Ue*3));let Ye=0,qe=-1,ke=-1,vt,Mt;if(Ie.forEach((Ze,Fe)=>{let{count:He,width:ht}=Ze;if(He>0){let $e=0;for(let ct=He;ct--&&Ze.glyphAt(ct).glyphObj.isWhitespace;)$e++;let ut=0,gt=0;if(L==="center")ut=(Be-ht)/2;else if(L==="right")ut=Be-ht;else if(L==="justify"&&Ze.isSoftWrapped){let ct=0;for(let nt=He-$e;nt--;)Ze.glyphAt(nt).glyphObj.isWhitespace&&ct++;gt=(Be-ht)/ct}if(gt||ut){let ct=0;for(let nt=0;nt<He;nt++){let zt=Ze.glyphAt(nt);const yt=zt.glyphObj;zt.x+=ut+ct,gt!==0&&yt.isWhitespace&&nt<He-$e&&(ct+=gt,zt.width+=gt)}}const fe=n.getReorderSegments(T,je,Ze.glyphAt(0).charIndex,Ze.glyphAt(Ze.count-1).charIndex);for(let ct=0;ct<fe.length;ct++){const[nt,zt]=fe[ct];let yt=1/0,Je=-1/0;for(let Dt=0;Dt<He;Dt++)if(Ze.glyphAt(Dt).charIndex>=nt){let ln=Dt,nn=Dt;for(;nn<He;nn++){let qt=Ze.glyphAt(nn);if(qt.charIndex>zt)break;nn<He-$e&&(yt=Math.min(yt,qt.x),Je=Math.max(Je,qt.x+qt.width))}for(let qt=ln;qt<nn;qt++){const mn=Ze.glyphAt(qt);mn.x=Je-(mn.x+mn.width-yt)}break}}let tt;const pn=ct=>tt=ct;for(let ct=0;ct<He;ct++){const nt=Ze.glyphAt(ct);tt=nt.glyphObj;const zt=tt.index,yt=je.levels[nt.charIndex]&1;if(yt){const Je=n.getMirroredCharacter(T[nt.charIndex]);Je&&nt.fontData.fontObj.forEachGlyph(Je,0,0,pn)}if(ee){const{charIndex:Je,fontData:Dt}=nt,ln=nt.x+Ve,nn=nt.x+nt.width+Ve;me[Je*4]=yt?nn:ln,me[Je*4+1]=yt?ln:nn,me[Je*4+2]=Ze.baseline+Dt.caretBottom+Ae,me[Je*4+3]=Ze.baseline+Dt.caretTop+Ae;const qt=Je-qe;qt>1&&p(me,qe,qt),qe=Je}if(Y){const{charIndex:Je}=nt;for(;Je>ke;)ke++,Y.hasOwnProperty(ke)&&(Mt=Y[ke])}if(!tt.isWhitespace&&!tt.isEmpty){const Je=Ye++,{fontSizeMult:Dt,src:ln,index:nn}=nt.fontData,qt=pe[ln]||(pe[ln]={});qt[zt]||(qt[zt]={path:tt.path,pathBounds:[tt.xMin,tt.yMin,tt.xMax,tt.yMax]});const mn=nt.x+Ve,gn=nt.y+Ze.baseline+Ae;se[Je*2]=mn,se[Je*2+1]=gn;const rn=mn+tt.xMin*Dt,yn=gn+tt.yMin*Dt,It=mn+tt.xMax*Dt,Qe=gn+tt.yMax*Dt;rn<ve[0]&&(ve[0]=rn),yn<ve[1]&&(ve[1]=yn),It>ve[2]&&(ve[2]=It),Qe>ve[3]&&(ve[3]=Qe),Je%Z===0&&(vt={start:Je,end:Je,rect:[1/0,1/0,-1/0,-1/0]},Xe.push(vt)),vt.end++;const Kt=vt.rect;if(rn<Kt[0]&&(Kt[0]=rn),yn<Kt[1]&&(Kt[1]=yn),It>Kt[2]&&(Kt[2]=It),Qe>Kt[3]&&(Kt[3]=Qe),K[Je]=zt,ae[Je]=nn,Y){const Ot=Je*3;Ce[Ot]=Mt>>16&255,Ce[Ot+1]=Mt>>8&255,Ce[Ot+2]=Mt&255}}}}}),me){const Ze=T.length-qe;Ze>1&&p(me,qe,Ze)}}const dt=[];Ne.forEach(({index:je,src:Ye,unitsPerEm:qe,ascender:ke,descender:vt,lineHeight:Mt,capHeight:Ze,xHeight:Fe})=>{dt[je]={src:Ye,unitsPerEm:qe,ascender:ke,descender:vt,lineHeight:Mt,capHeight:Ze,xHeight:Fe}}),I.typesetting=g()-Ee,R({glyphIds:K,glyphFontIndices:ae,glyphPositions:se,glyphData:pe,fontData:dt,caretPositions:me,glyphColors:Ce,chunkedBounds:Xe,fontSize:M,topBaseline:Ae+Ie[0].baseline,blockBounds:[Ve,Ae-De,Ve+Be,Ae],visibleBounds:ve,timings:I})})}function u(T,x){f({...T,metricsOnly:!0},U=>{const[A,M,z,N]=U.blockBounds;x({width:z-A,height:N-M})})}function v(T){let x=T.match(/^([\d.]+)%$/),U=x?parseFloat(x[1]):NaN;return isNaN(U)?0:U/100}function p(T,x,U){const A=T[x*4],M=T[x*4+1],z=T[x*4+2],N=T[x*4+3],O=(M-A)/U;for(let G=0;G<U;G++){const V=(x+G)*4;T[V]=A+O*G,T[V+1]=A+O*(G+1),T[V+2]=z,T[V+3]=N}}function g(){return(self.performance||Date).now()}function y(){this.data=[]}const E=["glyphObj","x","y","width","charIndex","fontData"];return y.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/E.length)},glyphAt(T){let x=y.flyweight;return x.data=this.data,x.index=T,x},splitAt(T){let x=new y;return x.data=this.data.splice(T*E.length),x}},y.flyweight=E.reduce((T,x,U,A)=>(Object.defineProperty(T,x,{get(){return this.data[this.index*E.length+U]},set(M){this.data[this.index*E.length+U]=M}}),T),{data:null,index:0}),{typeset:f,measure:u}}const Ql=()=>(self.performance||Date).now(),Xo=ah();let Fd;function Sy(i,n,s,h,r,l,c,f,u,v,p=!0){return p?by(i,n,s,h,r,l,c,f,u,v).then(null,g=>(Fd||(console.warn("WebGL SDF generation failed, falling back to JS",g),Fd=!0),Vd(i,n,s,h,r,l,c,f,u,v))):Vd(i,n,s,h,r,l,c,f,u,v)}const xo=[],Ey=5;let Ks=0;function rh(){const i=Ql();for(;xo.length&&Ql()-i<Ey;)xo.shift()();Ks=xo.length?setTimeout(rh,0):0}const by=(...i)=>new Promise((n,s)=>{xo.push(()=>{const h=Ql();try{Xo.webgl.generateIntoCanvas(...i),n({timing:Ql()-h})}catch(r){s(r)}}),Ks||(Ks=setTimeout(rh,0))}),_y=4,Ty=2e3,Ld={};let My=0;function Vd(i,n,s,h,r,l,c,f,u,v){const p="TroikaTextSDFGenerator_JS_"+My++%_y;let g=Ld[p];return g||(g=Ld[p]={workerModule:Yr({name:p,workerId:p,dependencies:[ah,Ql],init(y,E){const T=y().javascript.generate;return function(...x){const U=E();return{textureData:T(...x),timing:E()-U}}},getTransferables(y){return[y.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(i,n,s,h,r,l).then(({textureData:y,timing:E})=>{const T=Ql(),x=new Uint8Array(y.length*4);for(let U=0;U<y.length;U++)x[U*4+v]=y[U];return Xo.webglUtils.renderImageData(c,x,f,u,i,n,1<<3-v),E+=Ql()-T,--g.requests===0&&(g.idleTimer=setTimeout(()=>{ty(p)},Ty)),{timing:E}})}function Cy(i){i._warm||(Xo.webgl.isSupported(i),i._warm=!0)}const Uy=Xo.webglUtils.resizeWebGLCanvasWithoutClearing,Mi={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ay=new Fr;function Rr(){return(self.performance||Date).now()}const Yd=Object.create(null);function ih(i,n){i=Dy({},i);const s=Rr(),h=[];if(i.font&&h.push({label:"user",src:Oy(i.font)}),i.font=h,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Mi.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Mi.unicodeFontsURL,i.colorRanges!=null){let y={};for(let E in i.colorRanges)if(i.colorRanges.hasOwnProperty(E)){let T=i.colorRanges[E];typeof T!="number"&&(T=Ay.set(T).getHex()),y[E]=T}i.colorRanges=y}Object.freeze(i);const{textureWidth:r,sdfExponent:l}=Mi,{sdfGlyphSize:c}=i,f=r/c*4;let u=Yd[c];if(!u){const y=document.createElement("canvas");y.width=r,y.height=c*256/f,u=Yd[c]={glyphCount:0,sdfGlyphSize:c,sdfCanvas:y,sdfTexture:new Xl(y,void 0,void 0,void 0,ca,ca),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,xy(u)}const{sdfTexture:v,sdfCanvas:p}=u;sh(i).then(y=>{const{glyphIds:E,glyphFontIndices:T,fontData:x,glyphPositions:U,fontSize:A,timings:M}=y,z=[],N=new Float32Array(E.length*4);let O=0,G=0;const V=Rr(),D=x.map(X=>{let F=u.glyphsByFont.get(X.src);return F||u.glyphsByFont.set(X.src,F=new Map),F});E.forEach((X,F)=>{const ce=T[F],{src:C,unitsPerEm:k}=x[ce];let ee=D[ce].get(X);if(!ee){const{path:I,pathBounds:Q}=y.glyphData[C][X],W=Math.max(Q[2]-Q[0],Q[3]-Q[1])/c*(Mi.sdfMargin*c+.5),K=u.glyphCount++,ae=[Q[0]-W,Q[1]-W,Q[2]+W,Q[3]+W];D[ce].set(X,ee={path:I,atlasIndex:K,sdfViewBox:ae}),z.push(ee)}const{sdfViewBox:Z}=ee,Y=U[G++],R=U[G++],j=A/k;N[O++]=Y+Z[0]*j,N[O++]=R+Z[1]*j,N[O++]=Y+Z[2]*j,N[O++]=R+Z[3]*j,E[F]=ee.atlasIndex}),M.quads=(M.quads||0)+(Rr()-V);const L=Rr();M.sdf={};const q=p.height,ie=Math.ceil(u.glyphCount/f),w=Math.pow(2,Math.ceil(Math.log2(ie*c)));w>q&&(console.info(`Increasing SDF texture size ${q}->${w}`),Uy(p,r,w),v.dispose()),Promise.all(z.map(X=>oh(X,u,i.gpuAccelerateSDF).then(({timing:F})=>{M.sdf[X.atlasIndex]=F}))).then(()=>{z.length&&!u.contextLost&&(uh(u),v.needsUpdate=!0),M.sdfTotal=Rr()-L,M.total=Rr()-s,n(Object.freeze({parameters:i,sdfTexture:v,sdfGlyphSize:c,sdfExponent:l,glyphBounds:N,glyphAtlasIndices:E,glyphColors:y.glyphColors,caretPositions:y.caretPositions,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{u.contextLost||Cy(p)})}function oh({path:i,atlasIndex:n,sdfViewBox:s},{sdfGlyphSize:h,sdfCanvas:r,contextLost:l},c){if(l)return Promise.resolve({timing:-1});const{textureWidth:f,sdfExponent:u}=Mi,v=Math.max(s[2]-s[0],s[3]-s[1]),p=Math.floor(n/4),g=p%(f/h)*h,y=Math.floor(p/(f/h))*h,E=n%4;return Sy(h,h,i,s,v,u,r,g,y,E,c)}function xy(i){const n=i.sdfCanvas;n.addEventListener("webglcontextlost",s=>{console.log("Context Lost",s),s.preventDefault(),i.contextLost=!0}),n.addEventListener("webglcontextrestored",s=>{console.log("Context Restored",s),i.contextLost=!1;const h=[];i.glyphsByFont.forEach(r=>{r.forEach(l=>{h.push(oh(l,i,!0))})}),Promise.all(h).then(()=>{uh(i),i.sdfTexture.needsUpdate=!0})})}function Ry({font:i,characters:n,sdfGlyphSize:s},h){let r=Array.isArray(n)?n.join(`
`):""+n;ih({font:i,sdfGlyphSize:s,text:r},h)}function Dy(i,n){for(let s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i}let Eo;function Oy(i){return Eo||(Eo=typeof document>"u"?{}:document.createElement("a")),Eo.href=i,Eo.href}function uh(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:s}=i,{width:h,height:r}=n,l=i.sdfCanvas.getContext("webgl");let c=s.image.data;(!c||c.length!==h*r*4)&&(c=new Uint8Array(h*r*4),s.image={width:h,height:r,data:c},s.flipY=!1,s.isDataTexture=!0),l.readPixels(0,0,h,r,l.RGBA,l.UNSIGNED_BYTE,c)}}const Ny=Yr({name:"Typesetter",dependencies:[yy,gy,ay],init(i,n,s){return i(n,s())}}),sh=Yr({name:"Typesetter",dependencies:[Ny],init(i){return function(n){return new Promise(s=>{i.typeset(n,s)})}},getTransferables(i){const n=[];for(let s in i)i[s]&&i[s].buffer&&n.push(i[s].buffer);return n}});sh.onMainThread;const qd={};function zy(i){let n=qd[i];return n||(n=qd[i]=new Lr(1,1,i,i).translate(.5,.5,0)),n}const wy="aTroikaGlyphBounds",Xd="aTroikaGlyphIndex",By="aTroikaGlyphColor";class Gy extends Vm{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ym,this.boundingBox=new cv}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let s=zy(n);["position","normal","uv"].forEach(h=>{this.attributes[h]=s.attributes[h].clone()}),this.setIndex(s.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,s,h,r,l){this.updateAttributeData(wy,n,4),this.updateAttributeData(Xd,s,1),this.updateAttributeData(By,l,3),this._blockBounds=h,this._chunkedBounds=r,this.instanceCount=s.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:s,boundingBox:h}=this;if(s){const{PI:r,floor:l,min:c,max:f,sin:u,cos:v}=Math,p=r/2,g=r*2,y=Math.abs(s),E=n[0]/y,T=n[2]/y,x=l((E+p)/g)!==l((T+p)/g)?-y:c(u(E)*y,u(T)*y),U=l((E-p)/g)!==l((T-p)/g)?y:f(u(E)*y,u(T)*y),A=l((E+r)/g)!==l((T+r)/g)?y*2:f(y-v(E)*y,y-v(T)*y);h.min.set(x,n[1],s<0?-A:0),h.max.set(U,n[3],s<0?0:A)}else h.min.set(n[0],n[1],0),h.max.set(n[2],n[3],0);h.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let s=this.getAttribute(Xd).count,h=this._chunkedBounds;if(h)for(let r=h.length;r--;){s=h[r].end;let l=h[r].rect;if(l[1]<n.w&&l[3]>n.y&&l[0]<n.z&&l[2]>n.x)break}this.instanceCount=s}updateAttributeData(n,s,h){const r=this.getAttribute(n);s?r&&r.array.length===s.length?(r.array.set(s),r.needsUpdate=!0):(this.setAttribute(n,new qm(s,h)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(n)}}const jy=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Hy=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Fy=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ly=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Vy(i){const n=Qs(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Br},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new $f(0,0,0,0)},uTroikaClipRect:{value:new $f(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Br},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Fr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Xm},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:jy,vertexTransform:Hy,fragmentDefs:Fy,fragmentColorTransform:Ly,customRewriter({vertexShader:s,fragmentShader:h}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(h)&&(h=h.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(s)||(s=s.replace(lh,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:s,fragmentShader:h}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const uc=new sv({color:16777215,side:Lo,transparent:!0}),Zd=8421504,Qd=new uv,bo=new rt,Rs=new rt,bi=[],Yy=new rt,Ds="+x+y";function Kd(i){return Array.isArray(i)?i[0]:i}let ch=()=>{const i=new Il(new Lr(1,1),uc);return ch=()=>i,i},fh=()=>{const i=new Il(new Lr(1,1,32,1),uc);return fh=()=>i,i};const qy={type:"syncstart"},Xy={type:"synccomplete"},dh=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Zy=dh.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let vh=class extends Il{constructor(){const n=new Gy;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Zd,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Ds,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(qy),ih({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},s=>{this._isSyncing=!1,this._textRenderInfo=s,this.geometry.updateGlyphs(s.glyphBounds,s.glyphAtlasIndices,s.blockBounds,s.chunkedBounds,s.glyphColors);const h=this._queuedSyncs;h&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{h.forEach(r=>r&&r())})),this.dispatchEvent(Xy),n&&n()})))}onBeforeRender(n,s,h,r,l,c){this.sync(),l.isTroikaTextMaterial&&this._prepareForRender(l)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return Vy(n)}get material(){let n=this._derivedMaterial;const s=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=uc.clone());if((!n||!n.isDerivedFrom(s))&&(n=this._derivedMaterial=this.createDerivedMaterial(s),s.addEventListener("dispose",function h(){s.removeEventListener("dispose",h),n.dispose()})),this.hasOutline()){let h=n._outlineMtl;return h||(h=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),h.isTextOutlineMaterial=!0,h.depthWrite=!1,h.map=null,n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),h.dispose()})),[h,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return Kd(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return Kd(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const s=n.isTextOutlineMaterial,h=n.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:f,blockBounds:u}=r;h.uTroikaSDFTexture.value=f,h.uTroikaSDFTextureSize.value.set(f.image.width,f.image.height),h.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,h.uTroikaSDFExponent.value=r.sdfExponent,h.uTroikaTotalBounds.value.fromArray(u),h.uTroikaUseGlyphColors.value=!s&&!!r.glyphColors;let v=0,p=0,g=0,y,E,T,x=0,U=0;if(s){let{outlineWidth:M,outlineOffsetX:z,outlineOffsetY:N,outlineBlur:O,outlineOpacity:G}=this;v=this._parsePercent(M)||0,p=Math.max(0,this._parsePercent(O)||0),y=G,x=this._parsePercent(z)||0,U=this._parsePercent(N)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(T=this.strokeColor,h.uTroikaStrokeColor.value.set(T??Zd),E=this.strokeOpacity,E==null&&(E=1)),y=this.fillOpacity;h.uTroikaEdgeOffset.value=v,h.uTroikaPositionOffset.value.set(x,U),h.uTroikaBlurRadius.value=p,h.uTroikaStrokeWidth.value=g,h.uTroikaStrokeOpacity.value=E,h.uTroikaFillOpacity.value=y??1,h.uTroikaCurveRadius.value=this.curveRadius||0;let A=this.clipRect;if(A&&Array.isArray(A)&&A.length===4)h.uTroikaClipRect.value.fromArray(A);else{const M=(this.fontSize||.1)*100;h.uTroikaClipRect.value.set(u[0]-M,u[1]-M,u[2]+M,u[3]+M)}this.geometry.applyClipRect(h.uTroikaClipRect.value)}h.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const l=s?this.outlineColor||0:this.color;if(l==null)delete n.color;else{const f=n.hasOwnProperty("color")?n.color:n.color=new Fr;(l!==f._input||typeof l=="object")&&f.set(f._input=l)}let c=this.orientation||Ds;if(c!==n._orientation){let f=h.uTroikaOrient.value;c=c.replace(/[^-+xyz]/g,"");let u=c!==Ds&&c.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,v,p,g,y]=u;bo.set(0,0,0)[p]=v==="-"?1:-1,Rs.set(0,0,0)[y]=g==="-"?-1:1,Qd.lookAt(Yy,bo.cross(Rs),Rs),f.setFromMatrix4(Qd)}else f.identity();n._orientation=c}}_parsePercent(n){if(typeof n=="string"){let s=n.match(/^(-?[\d.]+)%$/),h=s?parseFloat(s[1]):NaN;n=(isNaN(h)?0:h/100)*this.fontSize}return n}localPositionToTextCoords(n,s=new Br){s.copy(n);const h=this.curveRadius;return h&&(s.x=Math.atan2(n.x,Math.abs(h)-Math.abs(n.z))*Math.abs(h)),s}worldPositionToTextCoords(n,s=new Br){return bo.copy(n),this.localPositionToTextCoords(this.worldToLocal(bo),s)}raycast(n,s){const{textRenderInfo:h,curveRadius:r}=this;if(h){const l=h.blockBounds,c=r?fh():ch(),f=c.geometry,{position:u,uv:v}=f.attributes;for(let p=0;p<v.count;p++){let g=l[0]+v.getX(p)*(l[2]-l[0]);const y=l[1]+v.getY(p)*(l[3]-l[1]);let E=0;r&&(E=r-Math.cos(g/r)*r,g=Math.sin(g/r)*r),u.setXYZ(p,g,y,E)}f.boundingSphere=this.geometry.boundingSphere,f.boundingBox=this.geometry.boundingBox,c.matrixWorld=this.matrixWorld,c.material.side=this.material.side,bi.length=0,c.raycast(n,bi);for(let p=0;p<bi.length;p++)bi[p].object=this,s.push(bi[p])}}copy(n){const s=this.geometry;return super.copy(n),this.geometry=s,Zy.forEach(h=>{this[h]=n[h]}),this}clone(){return new this.constructor().copy(this)}};dh.forEach(i=>{const n="_private_"+i;Object.defineProperty(vh.prototype,i,{get(){return this[n]},set(s){s!==this[n]&&(this[n]=s,this._needsSync=!0)}})});new cv;new Fr;const Qy=$.forwardRef(({sdfGlyphSize:i=64,anchorX:n="center",anchorY:s="middle",font:h,fontSize:r=1,children:l,characters:c,onSync:f,...u},v)=>{const p=Za(({invalidate:T})=>T),[g]=$.useState(()=>new vh),[y,E]=$.useMemo(()=>{const T=[];let x="";return $.Children.forEach(l,U=>{typeof U=="string"||typeof U=="number"?x+=U:T.push(U)}),[T,x]},[l]);return Ws(()=>new Promise(T=>Ry({font:h,characters:c},T)),["troika-text",h,c]),$.useLayoutEffect(()=>void g.sync(()=>{p(),f&&f(g)})),$.useEffect(()=>()=>g.dispose(),[g]),$.createElement("primitive",Di({object:g,ref:v,font:h,text:E,anchorX:n,anchorY:s,fontSize:r,sdfGlyphSize:i},u),y)});function Ky(i,n){const s=i+"Geometry";return $.forwardRef(({args:h,children:r,...l},c)=>{const f=$.useRef(null);return $.useImperativeHandle(c,()=>f.current),$.useLayoutEffect(()=>void(n==null?void 0:n(f.current))),$.createElement("mesh",Di({ref:f},l),$.createElement(s,{attach:"geometry",args:h}),r)})}const Py=Ky("plane"),hh=(i,n,s)=>{let h;switch(i){case Do:h=new Uint8ClampedArray(n*s*4);break;case sa:h=new Uint16Array(n*s*4);break;case Im:h=new Uint32Array(n*s*4);break;case Pm:h=new Int8Array(n*s*4);break;case Km:h=new Int16Array(n*s*4);break;case Qm:h=new Int32Array(n*s*4);break;case Xa:h=new Float32Array(n*s*4);break;default:throw new Error("Unsupported data type")}return h};let _o;const Iy=(i,n,s,h)=>{if(_o!==void 0)return _o;const r=new fv(1,1,h);n.setRenderTarget(r);const l=new Il(new Lr,new sv({color:16777215}));n.render(l,s),n.setRenderTarget(null);const c=hh(i,r.width,r.height);return n.readRenderTargetPixels(r,0,0,r.width,r.height,c),r.dispose(),l.geometry.dispose(),l.material.dispose(),_o=c[0]!==0,_o};class sc{constructor(n){var s,h,r,l,c,f,u,v,p,g,y,E,T,x,U,A;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(z){throw this._renderer.setRenderTarget(null),z}this._renderer.setRenderTarget(null)},this._width=n.width,this._height=n.height,this._type=n.type,this._colorSpace=n.colorSpace;const M={format:wr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((s=n.renderTargetOptions)===null||s===void 0?void 0:s.anisotropy)!==void 0?(h=n.renderTargetOptions)===null||h===void 0?void 0:h.anisotropy:1,generateMipmaps:((r=n.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(l=n.renderTargetOptions)===null||l===void 0?void 0:l.generateMipmaps:!1,magFilter:((c=n.renderTargetOptions)===null||c===void 0?void 0:c.magFilter)!==void 0?(f=n.renderTargetOptions)===null||f===void 0?void 0:f.magFilter:ca,minFilter:((u=n.renderTargetOptions)===null||u===void 0?void 0:u.minFilter)!==void 0?(v=n.renderTargetOptions)===null||v===void 0?void 0:v.minFilter:ca,samples:((p=n.renderTargetOptions)===null||p===void 0?void 0:p.samples)!==void 0?(g=n.renderTargetOptions)===null||g===void 0?void 0:g.samples:void 0,wrapS:((y=n.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(E=n.renderTargetOptions)===null||E===void 0?void 0:E.wrapS:vl,wrapT:((T=n.renderTargetOptions)===null||T===void 0?void 0:T.wrapT)!==void 0?(x=n.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:vl};if(this._material=n.material,n.renderer?this._renderer=n.renderer:(this._renderer=sc.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Is,this._camera=new iv,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Iy(this._type,this._renderer,this._camera,M)){let z;switch(this._type){case sa:z=this._renderer.extensions.has("EXT_color_buffer_float")?Xa:void 0;break}z!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Xa}`),this._type=z):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Il(new Lr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new fv(this.width,this.height,M),this._renderTarget.texture.mapping=((U=n.renderTargetOptions)===null||U===void 0?void 0:U.mapping)!==void 0?(A=n.renderTargetOptions)===null||A===void 0?void 0:A.mapping:No}static instantiateRenderer(){const n=new lv;return n.setSize(128,128),n}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const n=hh(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,n),n}toDataTexture(n){const s=new Zm(this.toArray(),this.width,this.height,wr,this._type,(n==null?void 0:n.mapping)||No,(n==null?void 0:n.wrapS)||vl,(n==null?void 0:n.wrapT)||vl,(n==null?void 0:n.magFilter)||ca,(n==null?void 0:n.minFilter)||ca,(n==null?void 0:n.anisotropy)||1,Ro);return s.generateMipmaps=(n==null?void 0:n.generateMipmaps)!==void 0?n==null?void 0:n.generateMipmaps:!1,s}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(n){this.disposeOnDemandRenderer(),n&&this.renderTarget.dispose(),this.material instanceof Fo&&Object.values(this.material.uniforms).forEach(s=>{s.value instanceof Xl&&s.value.dispose()}),Object.values(this.material).forEach(s=>{s instanceof Xl&&s.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(n){this._width=n,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(n){this._height=n,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(n){this._renderTarget=n,this._width=n.width,this._height=n.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const ky=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Jy=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Wy extends Fo{constructor({gamma:n,offsetHdr:s,offsetSdr:h,gainMapMin:r,gainMapMax:l,maxDisplayBoost:c,hdrCapacityMin:f,hdrCapacityMax:u,sdr:v,gainMap:p}){super({name:"GainMapDecoderMaterial",vertexShader:ky,fragmentShader:Jy,uniforms:{sdr:{value:v},gainMap:{value:p},gamma:{value:new rt(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new rt().fromArray(s)},offsetSdr:{value:new rt().fromArray(h)},gainMapMin:{value:new rt().fromArray(r)},gainMapMax:{value:new rt().fromArray(l)},weightFactor:{value:(Math.log2(c)-f)/(u-f)}},blending:Wm,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=c,this._hdrCapacityMin=f,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const s=this.uniforms.gamma.value;s.x=1/n[0],s.y=1/n[1],s.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class ph extends Error{}class mh extends Error{}const _i=(i,n,s)=>{const h=new RegExp(`${n}="([^"]*)"`,"i").exec(i);if(h)return h[1];const r=new RegExp(`<${n}[^>]*>([\\s\\S]*?)</${n}>`,"i").exec(i);if(r){const l=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return l&&l.length===3?l.map(c=>c.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(s!==void 0)return s;throw new Error(`Can't find ${n} in gainmap metadata`)},$y=i=>{let n;typeof TextDecoder<"u"?n=new TextDecoder().decode(i):n=i.toString();let s=n.indexOf("<x:xmpmeta");for(;s!==-1;){const h=n.indexOf("x:xmpmeta>",s),r=n.slice(s,h+10);try{const l=_i(r,"hdrgm:GainMapMin","0"),c=_i(r,"hdrgm:GainMapMax"),f=_i(r,"hdrgm:Gamma","1"),u=_i(r,"hdrgm:OffsetSDR","0.015625"),v=_i(r,"hdrgm:OffsetHDR","0.015625"),p=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),g=p?p[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!y)throw new Error("Incomplete gainmap metadata");const E=y[1];return{gainMapMin:Array.isArray(l)?l.map(T=>parseFloat(T)):[parseFloat(l),parseFloat(l),parseFloat(l)],gainMapMax:Array.isArray(c)?c.map(T=>parseFloat(T)):[parseFloat(c),parseFloat(c),parseFloat(c)],gamma:Array.isArray(f)?f.map(T=>parseFloat(T)):[parseFloat(f),parseFloat(f),parseFloat(f)],offsetSdr:Array.isArray(u)?u.map(T=>parseFloat(T)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(v)?v.map(T=>parseFloat(T)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(g),hdrCapacityMax:parseFloat(E)}}catch{}s=n.indexOf("<x:xmpmeta",h)}};class e2{constructor(n){this.options={debug:n&&n.debug!==void 0?n.debug:!1,extractFII:n&&n.extractFII!==void 0?n.extractFII:!0,extractNonFII:n&&n.extractNonFII!==void 0?n.extractNonFII:!0}}extract(n){return new Promise((s,h)=>{const r=this.options.debug,l=new DataView(n.buffer);if(l.getUint16(0)!==65496){h(new Error("Not a valid jpeg"));return}const c=l.byteLength;let f=2,u=0,v;for(;f<c;){if(++u>250){h(new Error(`Found no marker after ${u} loops `));return}if(l.getUint8(f)!==255){h(new Error(`Not a valid marker at offset 0x${f.toString(16)}, found: 0x${l.getUint8(f).toString(16)}`));return}if(v=l.getUint8(f+1),r&&console.log(`Marker: ${v.toString(16)}`),v===226){r&&console.log("Found APP2 marker (0xffe2)");const p=f+4;if(l.getUint32(p)===1297106432){const g=p+4;let y;if(l.getUint16(g)===18761)y=!1;else if(l.getUint16(g)===19789)y=!0;else{h(new Error("No valid endianness marker found in TIFF header"));return}if(l.getUint16(g+2,!y)!==42){h(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const E=l.getUint32(g+4,!y);if(E<8){h(new Error("Not valid TIFF data! (First offset less than 8)"));return}const T=g+E,x=l.getUint16(T,!y),U=T+2;let A=0;for(let O=U;O<U+12*x;O+=12)l.getUint16(O,!y)===45057&&(A=l.getUint32(O+8,!y));const z=T+2+x*12+4,N=[];for(let O=z;O<z+A*16;O+=16){const G={MPType:l.getUint32(O,!y),size:l.getUint32(O+4,!y),dataOffset:l.getUint32(O+8,!y),dependantImages:l.getUint32(O+12,!y),start:-1,end:-1,isFII:!1};G.dataOffset?(G.start=g+G.dataOffset,G.isFII=!1):(G.start=0,G.isFII=!0),G.end=G.start+G.size,N.push(G)}if(this.options.extractNonFII&&N.length){const O=new Blob([l]),G=[];for(const V of N){if(V.isFII&&!this.options.extractFII)continue;const D=O.slice(V.start,V.end+1,"image/jpeg");G.push(D)}s(G)}}}f+=2+l.getUint16(f+2)}})}}const t2=async i=>{const n=$y(i);if(!n)throw new mh("Gain map XMP metadata not found");const h=await new e2({extractFII:!0,extractNonFII:!0}).extract(i);if(h.length!==2)throw new ph("Gain map recovery image not found");return{sdr:new Uint8Array(await h[0].arrayBuffer()),gainMap:new Uint8Array(await h[1].arrayBuffer()),metadata:n}},Pd=i=>new Promise((n,s)=>{const h=document.createElement("img");h.onload=()=>{n(h)},h.onerror=r=>{s(r)},h.src=URL.createObjectURL(i)});class gh extends km{constructor(n,s){super(s),n&&(this._renderer=n),this._internalLoadingManager=new Jm}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=new Wy({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Xl,sdr:new Xl});return new sc({width:16,height:16,type:sa,colorSpace:Ro,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(n,s,h,r){const l=r?new Blob([r],{type:"image/jpeg"}):void 0,c=new Blob([h],{type:"image/jpeg"});let f,u,v=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([l?Pd(l):Promise.resolve(void 0),Pd(c)]);u=y[0],f=y[1],v=!0}else{const y=await Promise.all([l?createImageBitmap(l,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(c,{imageOrientation:"flipY"})]);u=y[0],f=y[1]}const p=new Xl(u||new ImageData(2,2),No,vl,vl,ca,ed,wr,Do,1,Ro);p.flipY=v,p.needsUpdate=!0;const g=new Xl(f,No,vl,vl,ca,ed,wr,Do,1,ks);g.flipY=v,g.needsUpdate=!0,n.width=f.width,n.height=f.height,n.material.gainMap=p,n.material.sdr=g,n.material.gainMapMin=s.gainMapMin,n.material.gainMapMax=s.gainMapMax,n.material.offsetHdr=s.offsetHdr,n.material.offsetSdr=s.offsetSdr,n.material.gamma=s.gamma,n.material.hdrCapacityMin=s.hdrCapacityMin,n.material.hdrCapacityMax=s.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),n.material.needsUpdate=!0,n.render()}}class n2 extends gh{load([n,s,h],r,l,c){const f=this.prepareQuadRenderer();let u,v,p;const g=async()=>{if(u&&v&&p){try{await this.render(f,p,u,v)}catch(L){this.manager.itemError(n),this.manager.itemError(s),this.manager.itemError(h),typeof c=="function"&&c(L),f.disposeOnDemandRenderer();return}typeof r=="function"&&r(f),this.manager.itemEnd(n),this.manager.itemEnd(s),this.manager.itemEnd(h),f.disposeOnDemandRenderer()}};let y=!0,E=0,T=0,x=!0,U=0,A=0,M=!0,z=0,N=0;const O=()=>{if(typeof l=="function"){const L=E+U+z,q=T+A+N,ie=y&&x&&M;l(new ProgressEvent("progress",{lengthComputable:ie,loaded:q,total:L}))}};this.manager.itemStart(n),this.manager.itemStart(s),this.manager.itemStart(h);const G=new To(this._internalLoadingManager);G.setResponseType("arraybuffer"),G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(n,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");u=L,await g()},L=>{y=L.lengthComputable,T=L.loaded,E=L.total,O()},L=>{this.manager.itemError(n),typeof c=="function"&&c(L)});const V=new To(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(s,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");v=L,await g()},L=>{x=L.lengthComputable,A=L.loaded,U=L.total,O()},L=>{this.manager.itemError(s),typeof c=="function"&&c(L)});const D=new To(this._internalLoadingManager);return D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(h,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");p=JSON.parse(L),await g()},L=>{M=L.lengthComputable,N=L.loaded,z=L.total,O()},L=>{this.manager.itemError(h),typeof c=="function"&&c(L)}),f}}class a2 extends gh{load(n,s,h,r){const l=this.prepareQuadRenderer(),c=new To(this._internalLoadingManager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(this.withCredentials),this.manager.itemStart(n),c.load(n,async f=>{if(typeof f=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(f);let v,p,g;try{const y=await t2(u);v=y.sdr,p=y.gainMap,g=y.metadata}catch(y){if(y instanceof mh||y instanceof ph)console.warn(`Failure to reconstruct an HDR image from ${n}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),g={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},v=u;else throw y}try{await this.render(l,g,v,p)}catch(y){this.manager.itemError(n),typeof r=="function"&&r(y),l.disposeOnDemandRenderer();return}typeof s=="function"&&s(l),this.manager.itemEnd(n),l.disposeOnDemandRenderer()},h,f=>{this.manager.itemError(n),typeof r=="function"&&r(f)}),l}}const Oi={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},yh="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",zr=i=>Array.isArray(i),cc=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Zo({files:i=cc,path:n="",preset:s=void 0,colorSpace:h=void 0,extensions:r}={}){s&&(fc(s),i=Oi[s],n=yh);const l=zr(i),{extension:c,isCubemap:f}=dc(i),u=vc(c);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+i);const v=Za(E=>E.gl);$.useLayoutEffect(()=>{if(c!=="webp"&&c!=="jpg"&&c!=="jpeg")return;function E(){Gr.clear(u,l?[i]:i)}v.domElement.addEventListener("webglcontextlost",E,{once:!0})},[i,v.domElement]);const p=Gr(u,l?[i]:i,E=>{(c==="webp"||c==="jpg"||c==="jpeg")&&E.setRenderer(v),E.setPath==null||E.setPath(n),r&&r(E)});let g=l?p[0]:p;if(c==="jpg"||c==="jpeg"||c==="webp"){var y;g=(y=g.renderTarget)==null?void 0:y.texture}return g.mapping=f?$m:e0,g.colorSpace=h??(f?"srgb":"srgb-linear"),g}const l2={files:cc,path:"",preset:void 0,extensions:void 0};Zo.preload=i=>{const n={...l2,...i};let{files:s,path:h=""}=n;const{preset:r,extensions:l}=n;r&&(fc(r),s=Oi[r],h=yh);const{extension:c}=dc(s);if(c==="webp"||c==="jpg"||c==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const f=vc(c);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+s);Gr.preload(f,zr(s)?[s]:s,u=>{u.setPath==null||u.setPath(h),l&&l(u)})};const r2={files:cc,preset:void 0};Zo.clear=i=>{const n={...r2,...i};let{files:s}=n;const{preset:h}=n;h&&(fc(h),s=Oi[h]);const{extension:r}=dc(s),l=vc(r);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+s);Gr.clear(l,zr(s)?[s]:s)};function fc(i){if(!(i in Oi))throw new Error("Preset must be one of: "+Object.keys(Oi).join(", "))}function dc(i){var n;const s=zr(i)&&i.length===6,h=zr(i)&&i.length===3&&i.some(c=>c.endsWith("json")),r=zr(i)?i[0]:i;return{extension:s?"cube":h?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(n=r.split(".").pop())==null||(n=n.split("?"))==null||(n=n.shift())==null?void 0:n.toLowerCase(),isCubemap:s,isGainmap:h}}function vc(i){return i==="cube"?t0:i==="hdr"?j1:i==="exr"?H1:i==="jpg"||i==="jpeg"?a2:i==="webp"?n2:null}const i2=i=>i.current&&i.current.isScene,o2=i=>i2(i)?i.current:i;function hc(i,n,s,h,r={}){var l,c,f,u;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const v=o2(n||s),p=v.background,g=v.environment,y={backgroundBlurriness:v.backgroundBlurriness,backgroundIntensity:v.backgroundIntensity,backgroundRotation:(l=(c=v.backgroundRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0],environmentIntensity:v.environmentIntensity,environmentRotation:(f=(u=v.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&f!==void 0?f:[0,0,0]};return i!=="only"&&(v.environment=h),i&&(v.background=h),Ma(v,r),()=>{i!=="only"&&(v.environment=g),i&&(v.background=p),Ma(v,y)}}function pc({scene:i,background:n=!1,map:s,...h}){const r=Za(l=>l.scene);return $.useLayoutEffect(()=>{if(s)return hc(n,i,r,s,h)}),null}function Sh({background:i=!1,scene:n,blur:s,backgroundBlurriness:h,backgroundIntensity:r,backgroundRotation:l,environmentIntensity:c,environmentRotation:f,...u}){const v=Zo(u),p=Za(g=>g.scene);return $.useLayoutEffect(()=>hc(i,n,p,v,{backgroundBlurriness:s??h,backgroundIntensity:r,backgroundRotation:l,environmentIntensity:c,environmentRotation:f})),$.useEffect(()=>()=>{v.dispose()},[v]),null}function u2({children:i,near:n=.1,far:s=1e3,resolution:h=256,frames:r=1,map:l,background:c=!1,blur:f,backgroundBlurriness:u,backgroundIntensity:v,backgroundRotation:p,environmentIntensity:g,environmentRotation:y,scene:E,files:T,path:x,preset:U=void 0,extensions:A}){const M=Za(D=>D.gl),z=Za(D=>D.scene),N=$.useRef(null),[O]=$.useState(()=>new Is),G=$.useMemo(()=>{const D=new n0(h);return D.texture.type=sa,D},[h]);$.useEffect(()=>()=>{G.dispose()},[G]),$.useLayoutEffect(()=>{if(r===1){const D=M.autoClear;M.autoClear=!0,N.current.update(M,O),M.autoClear=D}return hc(c,E,z,G.texture,{backgroundBlurriness:f??u,backgroundIntensity:v,backgroundRotation:p,environmentIntensity:g,environmentRotation:y})},[i,O,G.texture,E,z,c,r,M]);let V=1;return zi(()=>{if(r===1/0||V<r){const D=M.autoClear;M.autoClear=!0,N.current.update(M,O),M.autoClear=D,V++}}),$.createElement($.Fragment,null,u1($.createElement($.Fragment,null,i,$.createElement("cubeCamera",{ref:N,args:[n,s,G]}),T||U?$.createElement(Sh,{background:!0,files:T,preset:U,path:x,extensions:A}):l?$.createElement(pc,{background:!0,map:l,extensions:A}):null),O))}function s2(i){var n,s,h,r;const l=Zo(i),c=i.map||l;$.useMemo(()=>Uv({GroundProjectedEnvImpl:G1}),[]),$.useEffect(()=>()=>{l.dispose()},[l]);const f=$.useMemo(()=>[c],[c]),u=(n=i.ground)==null?void 0:n.height,v=(s=i.ground)==null?void 0:s.radius,p=(h=(r=i.ground)==null?void 0:r.scale)!==null&&h!==void 0?h:1e3;return $.createElement($.Fragment,null,$.createElement(pc,Di({},i,{map:c})),$.createElement("groundProjectedEnvImpl",{args:f,scale:p,height:u,radius:v}))}function c2(i){return i.ground?$.createElement(s2,i):i.map?$.createElement(pc,i):i.children?$.createElement(u2,i):$.createElement(Sh,i)}function f2({name:i,visible:n}){return We.jsx(Qy,{position:[0,Qg,0],fontSize:.4,color:"black",anchorX:"center",anchorY:"middle",visible:n,children:i})}const Os=new ml,Id=new rt(0,0,-1),dl=new rt,qa=new rt,Dr=new rt,Or=new rt;function d2(i){const[n,s]=$.useState({}),[h,r]=$.useState(!1);$.useEffect(()=>{const c=u=>{s(v=>({...v,[u.key.toLowerCase()]:!0}))},f=u=>{s(v=>({...v,[u.key.toLowerCase()]:!1}))};return window.addEventListener("keydown",c),window.addEventListener("keyup",f),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",f)}},[]);const l=$.useCallback(c=>{const f=i.current;if(!f)return;let u=!1,v=!1;if(dl.copy(f.linvel()),qa.copy(f.angvel()),Os.copy(f.rotation()),n.w||n.arrowup){const p=Id.clone().applyQuaternion(Os);Dr.copy(p).multiplyScalar(jg*c),f.applyImpulse(Dr,!0),u=!0}if(n.s||n.arrowdown){const p=Id.clone().applyQuaternion(Os);Dr.copy(p).multiplyScalar(-180*c),f.applyImpulse(Dr,!0),u=!0}(n.a||n.q)&&(Or.set(0,Hg*c,0),f.applyTorqueImpulse(Or,!0),v=!0),n.d&&(Or.set(0,-150*c,0),f.applyTorqueImpulse(Or,!0),v=!0),!u&&dl.lengthSq()>.01&&(Dr.copy(dl).multiplyScalar(-.5),f.applyImpulse(Dr,!0)),!v&&Math.abs(qa.y)>.01&&(Or.set(0,-qa.y*Fg,0),f.applyTorqueImpulse(Or,!0)),dl.copy(f.linvel()),dl.length()>Od&&(dl.normalize().multiplyScalar(Od),f.setLinvel(dl,!0)),qa.copy(f.angvel()),Math.abs(qa.y)>Nd&&(qa.y=Math.sign(qa.y)*Nd,f.setAngvel(qa,!0)),r(dl.lengthSq()>.1||Math.abs(qa.y)>.1)},[n,i]);return{isMoving:h,updateMovement:l}}const Ns=new rt,zs=new rt,kd=new ml,Jd=new ml,Wd=new ml,ws=new ml,v2=new rt(0,1,0),h2=1e-5;function p2(i,n,s){const{camera:h,raycaster:r,pointer:l}=Za();return{updateAiming:$.useCallback(f=>{if(!i.current||!n.current||!s.current)return;r.setFromCamera(l,h);const u=r.intersectObject(s.current);if(u.length>0){Ns.copy(u[0].point),i.current.getWorldPosition(zs),n.current.getWorldQuaternion(kd);const v=Ns.x-zs.x,p=Ns.z-zs.z,g=Math.atan2(v,p)+Math.PI;Jd.setFromAxisAngle(v2,g),Wd.copy(kd).invert(),ws.copy(Wd).multiply(Jd);const y=Lg*f,E=i.current.quaternion,T=E.angleTo(ws);if(T>h2){const x=Math.min(y,T);E.rotateTowards(ws,x)}}},[i,n,s,h,r,l])}}const Eh=$.forwardRef(({name:i="Tank",position:n=[0,.5,0],groundPlaneRef:s},h)=>{const r=$.useRef(null),l=$.useRef(null),c=$.useRef(null),{isMoving:f,updateMovement:u}=d2(r),{updateAiming:v}=p2(c,l,s);return $.useImperativeHandle(h,()=>({rigidBody:r.current,group:l.current})),zi((p,g)=>{r.current&&(u(g),v(g))}),We.jsxs(qo,{ref:r,colliders:!1,position:n,mass:50,linearDamping:.5,angularDamping:.8,enabledRotations:[!1,!0,!1],ccd:!0,children:[We.jsx(th,{ref:l,turretRef:c,children:We.jsx(f2,{name:i,visible:!f})}),We.jsx(oc,{args:[$v/2,Hr/2,eh/2],position:[0,kg,0]})]})});Eh.displayName="Tank";const Bs=new rt,$d=new rt,Ti=new rt,ev=new rt,tv=new rt,nv=new rt,m2=new rt(1,0,0),g2=new rt(0,0,1);function y2({tankRef:i}){const{camera:n,size:s}=Za(),h=$.useRef({x:0,y:0}),r=$.useRef(new rt().copy(n.position)),l=$.useRef(new rt);return $.useEffect(()=>{const c=f=>{h.current.x=f.clientX/s.width*2-1,h.current.y=-(f.clientY/s.height)*2+1};return window.addEventListener("mousemove",c),()=>window.removeEventListener("mousemove",c)},[s.width,s.height]),zi(()=>{var f;const c=(f=i.current)==null?void 0:f.group;c&&(c.getWorldPosition(Bs),$d.copy(Bs).add(qs),Ti.set(0,0,0),Ti.addScaledVector(m2,h.current.x*zd),Ti.addScaledVector(g2,-h.current.y*zd*.5),ev.copy($d).add(Ti),tv.copy(Bs).add(qg),nv.copy(tv).add(Ti),r.current.lerp(ev,Xg),l.current.lerp(nv,Zg),n.position.copy(r.current),n.lookAt(l.current))}),null}class S2 extends Il{constructor(n,s,h,r,l="xzy"){h=new Fr(h!==void 0?h:"white"),n=n!==void 0?n:10,s=s!==void 0?s:100,r=r!==void 0?r:8e3;const c=l.substring(0,2),f=new Lr(2,2,1,1),u=new Fo({side:Lo,uniforms:{uSize1:{value:n},uSize2:{value:s},uColor:{value:h},uDistance:{value:r}},transparent:!0,vertexShader:`
                // ... (vertex shader code) ...
                varying vec3 worldPosition;
                uniform float uDistance;
                void main() {
                    vec3 pos = position.${l} * uDistance;
                    pos.${c} += cameraPosition.${c};
                    worldPosition = pos;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
                }
                `,fragmentShader:`
                // ... (fragment shader code) ...
                 varying vec3 worldPosition;
                 uniform float uSize1;
                 uniform float uSize2;
                 uniform vec3 uColor;
                 uniform float uDistance;
                 float getGrid(float size) {
                    vec2 r = worldPosition.${c} / size;
                    vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
                    float line = min(grid.x, grid.y);
                    return 1.0 - min(line, 1.0);
                 }
                 void main() {
                    float d = 1.0 - min(distance(cameraPosition.${c}, worldPosition.${c}) / uDistance, 1.0);
                    float g1 = getGrid(uSize1);
                    float g2 = getGrid(uSize2);
                    gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));
                    gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);
                    if ( gl_FragColor.a <= 0.0 ) discard;
                 }
                `,extensions:{derivatives:!0}});super(f,u),this.name="InfiniteGridHelper",this.frustumCulled=!1}updateUniforms(n){const s=this.material;n.size1!==void 0&&(s.uniforms.uSize1.value=n.size1),n.size2!==void 0&&(s.uniforms.uSize2.value=n.size2),n.color!==void 0&&s.uniforms.uColor.value.set(n.color),n.distance!==void 0&&(s.uniforms.uDistance.value=n.distance)}}const bh=$.forwardRef(({},i)=>{const n=$.useMemo(()=>{const h=new S2(10,100,13421772,80),r=h.material;return r.transparent=!0,r.depthWrite=!1,h.position.y=-.01,h},[]),s=$.useRef(null);return We.jsxs(We.Fragment,{children:[We.jsx("ambientLight",{intensity:1}),We.jsx("directionalLight",{position:[15,20,10],intensity:2.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":50,"shadow-camera-left":-15,"shadow-camera-right":15,"shadow-camera-top":15,"shadow-camera-bottom":-15}),We.jsx(c2,{preset:"city",background:!1}),We.jsx("primitive",{object:n,ref:s}),We.jsx(qo,{type:"fixed",colliders:"cuboid",name:"physicsGround",children:We.jsx(oc,{args:[1e3,.1,1e3],position:[0,-.1,0]})}),We.jsx(Py,{ref:i,args:[2e3,2e3],rotation:[-Math.PI/2,0,0],position:[0,-.05,0],name:"raycastPlane",visible:!1,children:We.jsx("meshBasicMaterial",{side:Lo,transparent:!0,opacity:0,depthWrite:!1})})]})});bh.displayName="SceneSetup";function C2({playerName:i}){const n=$.useRef(null),s=$.useRef(null),h={position:qs.toArray(),fov:55};return qs.toArray(),We.jsx(E1,{shadows:!0,camera:h,style:{background:"#ffffff"},gl:{antialias:!0},dpr:[1,2],children:We.jsx(pg,{gravity:[0,-9.81,0],children:We.jsxs($.Suspense,{fallback:null,children:[We.jsx(bh,{ref:s}),We.jsx(Eh,{ref:n,name:i,position:[0,.5,0],groundPlaneRef:s}),We.jsx(y2,{tankRef:n})]})})})}export{C2 as GameScene,C2 as default};
